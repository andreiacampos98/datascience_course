"use strict";(self.webpackChunk_snowflake_nu_ui=self.webpackChunk_snowflake_nu_ui||[]).push([["8208"],{152412:function(e,t,n){n.d(t,{_:()=>a,x:()=>E});var r=n(499924),o=n(868809),i=n(332653);function a(e,t,{serialize:n=JSON.stringify,deserialize:o=JSON.parse}={}){let[l,s]=r.useState(()=>{let n=window.localStorage.getItem(e);return null!==n?o(n):"function"==typeof t?t():t}),c=r.useRef(e);return[l,(0,i.z)(t=>{s(r=>{let o="function"==typeof t?t(r):t,i=c.current;return i!==e&&window.localStorage.removeItem(i),c.current=e,window.localStorage.setItem(e,n(o)),o})})]}function l(e,t){window.dispatchEvent(new StorageEvent("storage",{key:e,newValue:t}))}let s=(e,t)=>{window.localStorage.setItem(e,t),l(e,t)},c=e=>{window.localStorage.removeItem(e),l(e,null)},u=e=>window.localStorage.getItem(e),d=e=>(window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)),f=()=>{throw Error("useLocalStorage is a client-only hook")};function E(e,t){let n=(0,o.useSyncExternalStore)(d,()=>u(e),f),i=(0,r.useMemo)(()=>{if(null===n)return null;try{return JSON.parse(n)}catch(e){return null}},[n]),a=(0,r.useMemo)(()=>null!=i,[i]),l=(0,r.useMemo)(()=>a?i:t,[a,t,i]),E=(0,r.useCallback)(()=>{c(e)},[e]),p=(0,r.useCallback)(t=>{try{null==t&&c(e);let n="function"==typeof t?t(l):t;null==n?c(e):s(e,JSON.stringify(n))}catch(e){console.warn(e)}},[e,l]);return{value:l,setValue:p,hasStoredValue:a,clear:E}}},149383:function(e,t,n){n.d(t,{CH:()=>d,FR:()=>f,Fg:()=>u,xV:()=>c});var r=n(184168),o=n(54649),i=n(499924),a=n(29174),l=n(654658);let s=i.memo(()=>(0,r.jsx)(a.Z,{id:"Unknown error"}));function c(e,t=s){if(e&&"object"==typeof e&&e.hasOwnProperty("externalErrorCause")){let t=e.externalErrorCause;if((0,o.isExternalSFDBError)(t))return t.message;if((0,o.isExternalAppsError)(t))return f(t.code);if(t.requestId)return(0,r.jsx)(a.Z,{id:"Incident {requestId}",values:{requestId:t.requestId}})}return(0,r.jsx)(t,{err:e})}function u(e){if((0,l.k)(e))return e.code||e.statusCode}function d(e){if(e&&"object"==typeof e&&e.hasOwnProperty("externalErrorCause")){let t=e.externalErrorCause,n=null==t?void 0:t.message;if(n)return n}return e instanceof Error?e.message:"Unknown Error"}function f(e){switch(e){case o.AppsErrorCode.AccountNameMissing:return(0,r.jsx)(a.Z,{id:"Account Name Missing"});case o.AppsErrorCode.ExchangeNotFound:return(0,r.jsx)(a.Z,{id:"Exchange Not Found"});case o.AppsErrorCode.ListingNameAlreadyExists:return(0,r.jsx)(a.Z,{id:"Listing name already exists, please choose another name"});case o.AppsErrorCode.ListingCannotDeletePublished:return(0,r.jsx)(a.Z,{id:"Cannot delete a published listing, please unpublish first"});case o.AppsErrorCode.ListingCannotMonetizePublished:return(0,r.jsx)(a.Z,{id:"Cannot monetize a published listing, please create a new listing with type 'Purchase with free sample'"});case o.AppsErrorCode.ListingCannotUnmonetizePublished:return(0,r.jsx)(a.Z,{id:"Cannot unmonetize a published listing, please create a new listing with type 'Free' or 'Personalized'"});case o.AppsErrorCode.ListingTitleCharacterLimitExceeded:return(0,r.jsx)(a.Z,{id:"Listing title exceeds 110 character limit."});case o.AppsErrorCode.ListingSubTitleCharacterLimitExceeded:return(0,r.jsx)(a.Z,{id:"Listing subtitle exceeds 110 character limit."});case o.AppsErrorCode.ListingDescriptionCharacterLimitExceeded:return(0,r.jsx)(a.Z,{id:"Listing description exceeds 7500 character limit."});case o.AppsErrorCode.ListingGlobalNameNotFound:return(0,r.jsx)(a.Z,{id:"No listing global name provided"});case o.AppsErrorCode.ListingMissingProfile:return(0,r.jsx)(a.Z,{id:"Listing is missing a valid profile"});case o.AppsErrorCode.ListingNoRegionsProvided:return(0,r.jsx)(a.Z,{id:"Error publishing listing. Published Listings require set regions"});case o.AppsErrorCode.ListingInvalidRegion:return(0,r.jsx)(a.Z,{id:"Error setting regions. Cannot set ALL and also specific regions"});case o.AppsErrorCode.MemberErrorAdding:return(0,r.jsx)(a.Z,{id:"Unable to add membership for account"});case o.AppsErrorCode.MemberErrorUpdating:return(0,r.jsx)(a.Z,{id:"Unable to update membership for account"});case o.AppsErrorCode.ProviderProfileErrorUploadingImage:return(0,r.jsx)(a.Z,{id:"Problem uploading image, please try again"});case o.AppsErrorCode.ProviderProfileNotFound:return(0,r.jsx)(a.Z,{id:"Invalid provider profile"});case o.AppsErrorCode.ProviderProfileImageTooLarge:return(0,r.jsx)(a.Z,{id:"Converted image too large, please upload another image"});case o.AppsErrorCode.ProviderProfileInUse:return(0,r.jsx)(a.Z,{id:"Cannot delete profile, still attached to listing"});case o.AppsErrorCode.ErrorBootstrap:return(0,r.jsx)(a.Z,{id:"Error with Bootstrap Reqeust"});case o.AppsErrorCode.ErrorValidatingEmail:return(0,r.jsx)(a.Z,{id:"Error Validating Email"});case o.AppsErrorCode.ExampleValidationError:return(0,r.jsx)(a.Z,{id:"Invalid SQL query"});case o.AppsErrorCode.ExampleValidationNoShare:return(0,r.jsx)(a.Z,{id:"Cannot check queries, share not found"});case o.AppsErrorCode.ExampleValidationNoExamples:return(0,r.jsx)(a.Z,{id:"No queries to check"});case o.AppsErrorCode.SharingFailed:return(0,r.jsx)(a.Z,{id:"Sharing failed"});case o.AppsErrorCode.SharingNotPermitted:return(0,r.jsx)(a.Z,{id:"Sharing not permitted between these accounts"});case o.AppsErrorCode.CouldNotAccessListing:return(0,r.jsx)(a.Z,{id:"Provider account does not have access to listing"});case o.AppsErrorCode.NotSupportedSchema:return(0,r.jsx)(a.Z,{id:"Schema Not Supported"});case o.AppsErrorCode.ShareAlreadyAttachedToListing:return(0,r.jsx)(a.Z,{id:"Share already attached to another listing"});case o.AppsErrorCode.BodyTooLarge:return(0,r.jsx)(a.Z,{id:"Image too large, please upload another image"});case o.AppsErrorCode.NotFound:return(0,r.jsx)(a.Z,{id:"Not found"});case o.AppsErrorCode.FailedToParseJSON:return(0,r.jsx)(a.Z,{id:"Unknown error"});case o.AppsErrorCode.UserLoggedOut:return(0,r.jsx)(a.Z,{id:"UserLoggedOut"});case o.AppsErrorCode.NetPolicyFailed:return(0,r.jsx)(a.Z,{id:"NetPolicyFailed"});case o.AppsErrorCode.NotProvisioned:return(0,r.jsx)(a.Z,{id:"NotProvisioned"});case o.AppsErrorCode.DxNotAdmin:return(0,r.jsx)(a.Z,{id:"DxNotAdmin"});case o.AppsErrorCode.InvalidHeader:return(0,r.jsx)(a.Z,{id:"InvalidHeader"});case o.AppsErrorCode.SecurableNotFound:return(0,r.jsx)(a.Z,{id:"Securable object not found"});case o.AppsErrorCode.DuplicateSecurablesFound:return(0,r.jsx)(a.Z,{id:"Duplicate securable objects found"});case o.AppsErrorCode.TrialSuspended:return(0,r.jsx)(a.Z,{id:"Trial suspended"});case o.AppsErrorCode.WrongCommand:return(0,r.jsx)(a.Z,{id:"Wrong command"});case o.AppsErrorCode.LoginFailed:return(0,r.jsx)(a.Z,{id:"Login Failed"});case o.AppsErrorCode.CountryCodeMissing:return(0,r.jsx)(a.Z,{id:"Missing Country ISO code for setup"});case o.AppsErrorCode.StripeKeyMissing:return(0,r.jsx)(a.Z,{id:"Stripe key missing"});case o.AppsErrorCode.StripeKeyInvalid:return(0,r.jsx)(a.Z,{id:"Stripe key invalid"});case o.AppsErrorCode.StripeIdMissing:return(0,r.jsx)(a.Z,{id:"Stripe account is pending"});case o.AppsErrorCode.StripeInvalidCountryCode:return(0,r.jsx)(a.Z,{id:"Invalid Country ISO code for setup"});case o.AppsErrorCode.StripeError:return(0,r.jsx)(a.Z,{id:"Stripe encountered an error"});case o.AppsErrorCode.StripeErrorGettingPaymentMethod:return(0,r.jsx)(a.Z,{id:"Stripe encountered an error getting payment method"});case o.AppsErrorCode.FailedToRefreshAcceptanceDetails:return(0,r.jsx)(a.Z,{id:"Failed to refresh acceptance details"});case o.AppsErrorCode.InvalidRegionAllError:return(0,r.jsx)(a.Z,{id:"Cannot enable auto-fulfillment using the global region"});case o.AppsErrorCode.ResultsNotFound:return(0,r.jsx)(a.Z,{id:"Results unavailable. Please try rerunning your query."});case o.AppsErrorCode.FailedToParseBillingEntity:return(0,r.jsx)(a.Z,{id:"Your account is not enabled to setup a payment method."});case o.AppsErrorCode.NoPurchasePrivilege:return(0,r.jsx)(a.Z,{id:"Your role does not have purchase privilege."})}}s.displayName="DefaultErrorMessage"},654658:function(e,t,n){n.d(t,{b:()=>i,k:()=>o});var r=n(96012);function o(e){return e instanceof r.M}function i(e){let t=e;for(;t;){if(o(t))return t;t=t.cause}}},337607:function(e,t,n){n.d(t,{j:()=>S});var r=n(818531),o=n(466646),i=n(603112),a=n(213041),l=n(51151),s=n(155205),c=n(476335),u=n(469264),d=n(115922),f=n(470233),E=n(100467),p=n(582049),y=n(380700),b=n(197322);function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function g(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}class v extends b.x{loadStores(e){if(this.dispatch){let{user:t,organization:n,securable:r}=e;!this.securablePromises&&r&&this.loadSecurableStore(r),!this.userStore&&t&&this.loadUserStore(t),this.initializeRolesAndWarehouse(t),!this.organizationStore&&n&&this.loadOrganizationStore(n)}}initializeRolesAndWarehouse(e){if(this.dispatch&&!this.userStore&&e){let n=e.isUiSpecifiedSnowflakeFeatureEnabled("UI_ENABLE_WAW_DEX_FEATURE_20");if(this.dataDiscoverRole)e.switchCurrentRole(this.dataDiscoverRole);else{var t;let r=(null===(t=e.currentRole)||void 0===t?void 0:t.call(e))||(0,d.d)(e.currentUser);this.setDataDiscoverRole(r,n)}if(!this.currentWarehouse&&e.currentUser){let{settings:t}=e.currentUser;this.setCurrentWarehouse(null==t?void 0:t.defaultWarehouse,n)}}}get exchangeId(){return(0,f.H)()}get organizationName(){return this.organizationStore.activeOrg.settings.snowflakeOrgName}get isHealthCheckEnabled(){return this.userStore.dxHealthCheckEnabled}get hasSuperAccountAdminRole(){return(0,i.i)(this.availableRoles)}get isCurrentRoleSuperAccountAdmin(){return(0,s.h)(this.dataDiscoverRole)}get hasSuperOrgAdminRole(){return(0,a.j)(this.availableRoles)}get isCurrentRoleSuperOrgAdmin(){return(0,c.l)(this.dataDiscoverRole)}get hasSuperSecurityAdmin(){return(0,l.w)(this.availableRoles)}get isCurrentRoleSuperSecurityAdmin(){return(0,u.E)(this.dataDiscoverRole)}isCurrentUser(e){return this.userStore.isCurrentUser(e)}async validateSnowflakeURL(e){try{let t=await o.nufetch("/validate-snowflake-url?"+r.nZ({url:e}),this.userStore.userRequestContext(),void 0,void 0,!1);if(!t.valid)return{valid:!1};if(!e.toLowerCase().includes(".snowflakecomputing.com"))return console.error("account must include full url"),{valid:!1};return t}catch(e){return console.error("Validate snowflake url failed with err",e),{valid:!1}}}async validateAccountIdentifier(e,t,n){try{let i=await o.nufetch("/validate-snowflake-account-region?"+r.nZ({region:e.toUpperCase(),account:t.toUpperCase(),isSecondaryAccount:n}),this.userStore.userRequestContext());if(!i.valid)return{valid:!1};return i}catch(e){return console.error("Validate snowflake account region failed with err",e),{valid:!1}}}async fetchAccountDeploymentInfo(e,t){try{let n=await o.nufetch("/fetch-account-deployment-info?"+r.nZ({org:e.toUpperCase(),accountAlias:t.toUpperCase()}),this.userStore.userRequestContext());if(!n.valid)return{valid:!1};return g(O({},n),{org:n.org.toUpperCase(),accountAlias:n.accountAlias.toUpperCase()})}catch(e){return console.error("Fetch account deployment info failed with err",e),{valid:!1}}}async fetchAccountDeploymentInfoFromURL(e){try{let t=await o.nufetch("/fetch-account-deployment-info-from-url?"+r.nZ({url:e}),this.userStore.userRequestContext());if(!t.valid)return{valid:!1};return g(O({},t),{org:t.org.toUpperCase(),accountAlias:t.accountAlias.toUpperCase()})}catch(e){return console.error("Fetch account deployment info from url failed with err",e),{valid:!1}}}getCurrentRegion(){return this.organizationStore.activeOrg.settings.region}constructor(...e){super(...e),this.dataDiscoverRole="",this.secondaryRoles="",this.availableRoles=[],this.currentWarehouse="",this.googleTagManagerInitialized=!1,this.dataDiscoverRoleInitializedResolver=e=>{},this.dataDiscoverRoleInitialized=new Promise(e=>{this.dataDiscoverRoleInitializedResolver=e}),this.loadUserStore=e=>{var t;null===(t=this.dispatch)||void 0===t||t.call(this,t=>{t.userStore=e})},this.loadOrganizationStore=e=>{var t;null===(t=this.dispatch)||void 0===t||t.call(this,t=>{t.organizationStore=e})},this.loadSecurableStore=e=>{var t;null===(t=this.dispatch)||void 0===t||t.call(this,t=>{t.securablePromises=e})},this.validateRoleWarehousePair=(e=!0)=>{var t;null===(t=this.dispatch)||void 0===t||t.call(this,t=>{if(""===t.currentWarehouse||!t.securablePromises)return;let n=t.roleWarehouseValidationKey=new Promise((r,o)=>{var i;null===(i=t.securablePromises)||void 0===i||i.list(t.dataDiscoverRole,p.M.WAREHOUSE,E.Y.show,void 0,{forceRefresh:e,filter:t.currentWarehouse}).then(e=>{var t;null===(t=this.dispatch)||void 0===t||t.call(this,t=>{t.roleWarehouseValidationKey===n&&(e.result.map(e=>e.name).includes(t.currentWarehouse)||(t.currentWarehouse="",r(!1)),r(!0))})},e=>{var t;null===(t=this.dispatch)||void 0===t||t.call(this,t=>{t.roleWarehouseValidationKey===n&&(t.currentWarehouse="",o(e))})})})})},this.setDataDiscoverRole=(e,t=!1)=>{var n;null===(n=this.dispatch)||void 0===n||n.call(this,t=>{var n,r,o,i,a;t.dataDiscoverRole=e,null===(r=t.userStore)||void 0===r||null===(n=r.switchCurrentRole)||void 0===n||n.call(r,e),t.currentWarehouse||(t.currentWarehouse=null===(a=t.userStore)||void 0===a?void 0:null===(i=a.currentUser)||void 0===i?void 0:null===(o=i.settings)||void 0===o?void 0:o.defaultWarehouse)}),t||this.validateRoleWarehousePair(!1),this.dataDiscoverRoleInitializedResolver(e)},this.setSecondaryRoles=(e,t=!1)=>{var n;null===(n=this.dispatch)||void 0===n||n.call(this,t=>{var n,r;t.secondaryRoles=e,null===(r=t.userStore)||void 0===r||null===(n=r.switchCurrentSecondaryRoles)||void 0===n||n.call(r,e)}),t||this.validateRoleWarehousePair(!1)},this.setAvailableRoles=e=>{var t;null===(t=this.dispatch)||void 0===t||t.call(this,t=>{t.availableRoles=e})},this.setStripeHealthCheckStatus=e=>{var t;null===(t=this.dispatch)||void 0===t||t.call(this,t=>{t.stripeHealthCheckComplete=e})},this.setCurrentWarehouse=(e,t=!1)=>{var n;null===(n=this.dispatch)||void 0===n||n.call(this,t=>{t.currentWarehouse=e}),t||this.validateRoleWarehousePair(!1)},this.setMarketplaceLunrIdx=(e,t)=>{var n;null===(n=this.dispatch)||void 0===n||n.call(this,n=>{n.marketplaceLunrIdx=g(O({},n.marketplaceLunrIdx),{idx:e,lastLoadTime:t})})},this.setMarketplaceLunrPromise=(e,t)=>{var n;null===(n=this.dispatch)||void 0===n||n.call(this,n=>{n.marketplaceLunrIdx=g(O({},n.marketplaceLunrIdx),{promise:e,lastLoadTime:t})})},this.setProviderMarketplaceLunrIdx=(e,t)=>{var n;null===(n=this.dispatch)||void 0===n||n.call(this,n=>{n.providerMarketplaceLunrIdx=g(O({},n.providerMarketplaceLunrIdx),{idx:e,lastLoadTime:t})})},this.setProviderMarketplaceLunrPromise=(e,t)=>{var n;null===(n=this.dispatch)||void 0===n||n.call(this,n=>{n.providerMarketplaceLunrIdx=g(O({},n.providerMarketplaceLunrIdx),{promise:e,lastLoadTime:t})})},this.setGoogleTagManagerInitialized=e=>{var t;null===(t=this.dispatch)||void 0===t||t.call(this,t=>{t.googleTagManagerInitialized=e})},this.setAccountCreatedDetails=e=>{var t;null===(t=this.dispatch)||void 0===t||t.call(this,t=>{t.accountCreatedDetails=e})}}}let S=(0,y.q)(()=>(0,b.A)(v))},380700:function(e,t,n){n.d(t,{q:()=>o});var r=n(237257);function o(e,...t){let[n,i]=(0,r.Z)(e,...t);return Object.defineProperties(i,{Provider:{get:()=>n}}),i}},197322:function(e,t,n){n.d(t,{A:()=>l,x:()=>a});var r,o=n(499269),i=n(499924);class a{constructor(e){this.dispatch=e,this[r]=!0}}function l(e){let t=new e,[n,r]=(0,i.useReducer)(function(e,t){return(0,o.Uy)(e,t)},t);return(0,i.useEffect)(()=>r(()=>new e(r)),[e]),n}r=o.sc},852460:function(e,t,n){n.d(t,{e:()=>r});function r(e){return e.loading?"loading":e.error?"error":"resolved"}},29183:function(e,t,n){n.d(t,{p:()=>o});var r=n(601583);function o(e){if(e instanceof r._4)return!0;if(e&&"object"==typeof e&&Object.hasOwnProperty.call(e,"loading")&&Object.hasOwnProperty.call(e,"data")&&Object.hasOwnProperty.call(e,"error")){let t=JSON.stringify(e);throw Error(`Argument ${t} is not an instance of ChainedAsyncResult`)}return!1}},955094:function(e,t,n){n.d(t,{r:()=>l});var r=n(499924),o=n(703559);let i={loading:!0,data:null,error:void 0};function a(e,t){switch(t.type){case"START":return{loading:!0,data:e.data,error:e.error};case"RESOLVE":return{loading:!1,data:t.data,error:void 0};case"REJECT":return{loading:!1,data:e.data,error:t.error};default:return(0,o.U)(t),e}}function l(e,...t){let[n,o]=r.useReducer(a,i);return r.useLayoutEffect(()=>{let n="valid";return async function(){o({type:"START"});try{let r=await e(...t);"valid"===n&&o({type:"RESOLVE",data:r})}catch(e){"valid"===n&&o({type:"REJECT",error:e})}}(),()=>{n="stale"}},[e,...t]),n}},323441:function(e,t,n){n.d(t,{Z:()=>y});var r=n(870793),o=n(561843),i=n(499924),a=n(396710),l=n.n(a),s=n(852460),c=n(29183),u=n(601583),d=n(322505),f=n(955094),E=n(35777);let p=async()=>await new Promise(()=>{});function y(e,...t){var n;let a=t.filter(c.p),b=(n=a.map(s.e)).includes("error")?"error":n.includes("loading")?"waitingOnUpstream":"enabled",O=t.map(e=>(0,c.p)(e)?e.data:e),g=function(e,t,...n){var r,o;let i=(0,d.N)(e.enabled),a=(0,E.j)(n,e.enabled,{initialValueIfInvalid:n.map(e=>null)}),l=(0,f.r)(i?t:p,...a);return r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},l),o=o={loading:!!i&&l.loading},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}),r}({enabled:"enabled"===b},e,...O),v=function(e,t){let n=(0,r.D)(e),o=(0,r.D)(t);return n!==e||o&&!l()(o,t)}(e,O),S=!!("waitingOnUpstream"===b||"enabled"===b&&(g.loading||v)),m=function(e,t){let n=i.useRef(void 0),r=n.current,a="error"===e?function(e,t){let n=e.filter(e=>"error"===(0,s.e)(e)).map(e=>e.error);if(n.length<1)throw Error("An upstream node is in error state but there is no upstream error!");if(!t&&n.length>1&&n.some(e=>e!==n[0])){let e=Error("There are multiple upstream errors but this node didn't already catch one!");return o.cM.error(e,{message:"Error when resolving chained async tasks"}),n[0]}if(t&&!n.includes(t)){let e=Error("There is a previously stored error but it doesn't match current errors from upstream");return o.cM.error(e,{message:"Error when resolving chained async tasks"}),n[0]}return null!=t?t:n[0]}(t,r):void 0;return n.current=a,a}(b,a),h=null!=m?m:g.error,_=(0,E.j)(g.data,!S,{initialValueIfInvalid:null}),I=(0,E.j)(h,!S,{initialValueIfInvalid:void 0});return i.useMemo(()=>new u._4({loading:S,data:_,error:I}),[S,_,I])}},35777:function(e,t,n){n.d(t,{j:()=>o});var r=n(499924);function o(e,t,n){let o=function(e,t,n){let o=r.useRef(n.initialValueIfInvalid);return r.useEffect(()=>{t&&(o.current=e)},[e,t]),o.current}(e,t,n);return t?e:o}},601583:function(e,t,n){n.d(t,{Re:()=>i,_4:()=>r,fO:()=>o,w2:()=>a});class r{constructor(e){this.__type="ChainedAsyncResult",this.data=e.data,this.loading=e.loading,this.error=e.error}}function o(e){let{loading:t,value:n,error:o}=e;return new r({loading:t,data:null!=n?n:null,error:o})}function i(){return o({loading:!0,error:null,value:void 0})}function a(e){return o({loading:!1,error:null,value:e})}},725839:function(e,t,n){n.d(t,{p:()=>i,Z:()=>a});var r=n(237257),o=n(499924);let[i,a]=(0,r.Z)(()=>(function(){let[e,t]=(0,o.useState)({});return{getFetchId:(0,o.useCallback)(t=>`${e[t]||1}`,[e]),incrementFetchId:(0,o.useCallback)(e=>{t(t=>{var n,r;return n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},t),r=r={[e]:(t[e]||1)+1},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}),n})},[])}})())},895430:function(e,t,n){n.d(t,{e:()=>a,w:()=>i});var r=n(237257),o=n(210038);let[i,a]=(0,r.Z)(()=>(0,o.b)())},637658:function(e,t,n){n.d(t,{O:()=>r});function r(e,t){let{getCacheKey:n,getData:r}=t,o=e?n():void 0,i=e&&o?e.getEntry(o):void 0;if(i)return i;let a=r();return e&&o&&e.setEntry(o,a),a}},814539:function(e,t,n){n.d(t,{m:()=>i});var r=n(499924),o=n(725839);function i(e){let{getFetchId:t,incrementFetchId:n}=(0,o.Z)();return{fetchId:t(e),updateFetchId:(0,r.useCallback)(()=>n(e),[n,e])}}},210038:function(e,t,n){n.d(t,{b:()=>o});var r=n(499924);function o(){let e=(0,r.useRef)({entries:{},currentEvictionBucketIndex:0,evictionBuckets:Array.from({length:6},()=>[])}),t=(0,r.useCallback)(t=>{var n;let{entries:r}=e.current;return null===(n=r[t])||void 0===n?void 0:n.data},[]),n=(0,r.useCallback)((t,n)=>{let{entries:r,currentEvictionBucketIndex:o,evictionBuckets:i}=e.current;r[t]={data:n,evictionBucketIndex:o},i[o].push(t)},[]),o=(0,r.useCallback)(t=>{let{entries:n}=e.current;delete n[t]},[]);return(0,r.useEffect)(()=>{let t=setInterval(()=>{let{entries:t,currentEvictionBucketIndex:n,evictionBuckets:r}=e.current,o=(n+1)%r.length;for(let e of r[o]){var i;(null===(i=t[e])||void 0===i?void 0:i.evictionBucketIndex)===o&&delete t[e]}r[o]=[],e.current.currentEvictionBucketIndex=o},6e4);return()=>{clearInterval(t)}},[]),(0,r.useMemo)(()=>({getEntry:t,setEntry:n,clearEntry:o}),[o,t,n])}},130092:function(e,t,n){n.d(t,{k:()=>i});var r=n(641419),o=n(946570);function i(e,t){(0,o.WC)()&&console.error(e,t),r.v.addError(e,t)}},897727:function(e,t,n){n.d(t,{EQ:()=>l,I1:()=>a});var r=n(184168),o=n(499924);let i=o.createContext(void 0),a=()=>(0,o.useContext)(i),l=({configToml:e,children:t})=>(0,r.jsx)(i.Provider,{value:e,children:t});l.displayName="ConfigTomlProvider"},315234:function(e,t,n){n.d(t,{R:()=>o});var r=n(925819);function o(e,t){let n=e.lastVersionLocationUri,o=e.liveVersionLocationUri,i=e.rootLocation;return!t&&o?{kind:"versioned",isLive:!0,rootLocation:o}:n?{kind:"versioned",isLive:!1,rootLocation:n}:{kind:"checkouts",rootLocation:(0,r.h)(i,"Invalid or unsupported location")}}},815046:function(e,t,n){n.d(t,{T:()=>o});var r=n(625306);function o(e){if((0,r.f)(e)){let[t,n]=e.split("/versions/");if((null==n?void 0:n.length)>0)return{stage:t,path:`/versions/${n}`};let r="/checkouts/",[o,i]=e.split(r);if((null==i?void 0:i.length)>0)return{stage:o,path:`${r}${i}`};let a="/commits/",[l,s]=e.split(a);return(null==s?void 0:s.length)>0?{stage:l,path:`${a}${s}`}:{stage:e,path:""}}let t=/^(@?(?:[^/"]*|"(?:[^"]|"")*")*)\/?(.*)/u.exec(e);return t?{stage:t[1].startsWith("@")?t[1]:`@${t[1]}`,path:t[2]}:{stage:e,path:""}}},625306:function(e,t,n){n.d(t,{f:()=>r});function r(e){return e.startsWith("snow://")}},313964:function(e,t,n){n.d(t,{A:()=>a});var r=n(499924),o=n(867073),i=n(896315);function a(){let{user:e}=(0,i.m)(["user"]),t="alter-entity-checkout";return(0,r.useCallback)(async({id:n,role:r,secondaryRoles:i})=>{let a=(0,o.BW)(n);return await e.api.query(a,{isInternal:!0,role:r,secondaryRoles:i,desc:t})},[e.api,t])}},549979:function(e,t,n){n.d(t,{U:()=>u});var r=n(499924),o=n(758566),i=n(278257),a=n(264644),l=n(100467),s=n(432541);function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function u(){let e=(0,r.useContext)(i.V1),{formatMessage:t}=(0,o.Z)();return(0,r.useCallback)(async(n,r,o)=>{let i=await (0,a.W)(e.get(r,n,l.Y.describe,{secondaryRoles:o}));if((0,s.D)(i)){var u;throw Error(t({id:"Could not get details for the object. Error: {message}"},{message:null===(u=i.error)||void 0===u?void 0:u.message}))}if(!i.result)throw Error(t({id:"Could not get details for the object. No result data."}));let d=i.result.columns[0];return d.rootLocation&&!d.lastVersionName?c({kind:"checkouts"},d):c({kind:"versioned"},d)},[t,e])}},98416:function(e,t,n){n.d(t,{h:()=>u});var r=n(499924),o=n(278257),i=n(286161),a=n(100467),l=n(313964),s=n(867073),c=n(896315);let u=()=>{let e=function(){let{user:e}=(0,c.m)(["user"]),t="show-checkouts";return(0,r.useCallback)(async({id:n,role:r,secondaryRoles:o})=>{let i=(0,s.CG)(n);return await e.api.query(i,{isInternal:!0,role:r,secondaryRoles:o,desc:t})},[e.api,t])}(),t=(0,l.A)(),n=(0,r.useContext)(o.V1);return(0,r.useCallback)(async({id:r,role:o,secondaryRoles:l})=>{0===(await e({id:r,role:o,secondaryRoles:l})).rows.length&&(await t({id:r,role:o,secondaryRoles:l}),await (0,i.r)(n.get(o,r,a.Y.describe,{forceRefresh:!0,secondaryRoles:l})))},[e,t,n])}},434025:function(e,t,n){n.d(t,{P:()=>a,X:()=>i});var r=n(499924);let o=(0,r.createContext)(null),i=o.Provider,a=()=>(0,r.useContext)(o)},535250:function(e,t,n){n.d(t,{Z:()=>s});var r=n(278257),o=n(796723),i=n(100467),a=n(740238),l=n(865072);function s(e){var t;let n=(0,r.fo)();if((0,l.$)())return!1;let s=n.get(e,i.Y.describe);if((0,a.M)(s))return null;let c=null==s?void 0:null===(t=s.result)||void 0===t?void 0:t.columns[0];return!!(null==c?void 0:c.runtimeName)&&c.runtimeName!==o.U}},865072:function(e,t,n){n.d(t,{$:()=>l,S:()=>a});var r=n(184168),o=n(499924);let i=(0,o.createContext)(!1),a=({children:e})=>(0,r.jsx)(i.Provider,{value:!0,children:e});a.displayName="StaticNotebookProvider";let l=()=>(0,o.useContext)(i)},536365:function(e,t,n){n.d(t,{r:()=>r});function r(e){for(let t of e)return!1;return!0}},663271:function(e,t,n){function r(e,t="/"){return e.startsWith(t)?e.substring(1):e}function o(e,t="/"){return e.startsWith(t)?e:`${t}${e}`}function i(e,t="/"){return e.endsWith(t)?e:`${e}${t}`}function a(e,t="/"){return e.endsWith(t)?e.substring(0,e.length-1):e}function l(e,t="/"){let n=e.lastIndexOf(t);return -1===n?"":e.slice(0,n)}function s(e,t){let n=i(r(t));return 0!==e.indexOf(n)?e:e.slice(n.length)}n.d(t,{$3:()=>r,FR:()=>a,X7:()=>l,kN:()=>i,mJ:()=>o,sR:()=>s})},518553:function(e,t,n){n.d(t,{Q:()=>o});let r={undefined:()=>0,boolean:()=>4,number:()=>8,string:e=>2*e.length,bigint:e=>o(e.toString()),function:e=>o(e.toString()),symbol:e=>o(e.toString()),object:e=>e?e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array?e.byteLength:Object.entries(e).reduce((e,[t,n])=>o(t)+o(n)+e,0):0};function o(e){return r[typeof e](e)}},322505:function(e,t,n){n.d(t,{N:()=>o});var r=n(499924);function o(e){let t=r.useRef(e);return e&&(t.current=!0),t.current}},115922:function(e,t,n){n.d(t,{d:()=>o});var r=n(54649);function o(e,t){var n,o;if(t)return t;let i=null==e?void 0:null===(n=e.settings)||void 0===n?void 0:n.defaultRole;return i&&(null==e?void 0:null===(o=e.availableRoles)||void 0===o?void 0:o.includes(i))?i:r.PUBLIC_ROLE}},654009:function(e,t,n){n.d(t,{l:()=>a});var r=n(865439),o=n(913533),i=n(585452);class a{getPath(){return this.path}goBackOrNavigate(e,t={},n=[]){let r=i.l.entries;if(r.length>1)for(let e=r.length-2;e>=0;e--){if(this.matchesAgainstPath(r[e].pathname)){i.l.push(r[e].pathname+r[e].search);return}let t=!1;for(let o of n)if(o.matchesAgainstPath(r[e].pathname)){t=!0;break}if(!t)break}i.l.push(this.getURL(e,t))}goBackWithDataOrNavigate(e,t={},n=[]){let r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},e);Object.entries(r).forEach(([e,t])=>{"string"==typeof t&&(r[e]=decodeURIComponent(t))});let o=i.l.entries;if(o.length>1)for(let e=o.length-2;e>=0;e--){let t=!1;for(let r of[...n,this])if(r.matchesAgainstPath(o[e].pathname)){t=!0;break}if(t){if(this.getURL(r)===o[e].pathname){i.l.push(o[e].pathname+o[e].search);return}}else break}i.l.push(this.getURL(r,t))}getURL(e,t){return(0,o.m)(this.path,e,t)}navigate(e,t={}){i.l.push(this.getURL(e,t))}replaceCurrentURL(e,t={}){i.l.replace(this.getURL(e,t))}matchesAgainstPath(e){return"string"!=typeof(0,r.Yt)(this.path,e)}constructor(e){this.path=e.path,this.page=e.page}}},222219:function(e,t,n){n.d(t,{k:()=>i});var r=n(654009),o=n(552626);let i=new r.l({path:[`${(0,o.D)()}/notebooks/{entityIdStr:string}`],page:"notebook_detail"})},824676:function(e,t,n){n.d(t,{a:()=>r});function r(e,t){let n;n=t instanceof URLSearchParams?Array.from(t.entries()):Object.entries(t);let r=e;if(n.length>0){let t=n.map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`).join("&");r=`${e}?${t}`}return r}},865439:function(e,t,n){n.d(t,{Mp:()=>s,Yt:()=>l});var r=n(351436),o=n.n(r),i=n(72856);function a(e,t){let n=[].concat(e);for(n=n.map(e=>(0,i.Q)(e)),t=(0,i.Q)(t);n.length;){let e=t.split("/").filter(e=>e.length),r=n.shift(),i=r||"",a=r.replace(/^\//,"").replace(/\/$/,"").split("/").filter(e=>e.length);if("*"!==a.at(-1)&&e.length!==a.length)continue;let l={},s=!1;for(;a.length;){let t=e.shift(),n=a.shift();if(n.startsWith("{")){let e=n.slice(1,-1),r=e.split(":");switch(r[1].replace(/<[^>]*>/,"")){case"number":l[r[0]]=+t;break;case"string":l[r[0]]=decodeURIComponent(t);break;case"exists":t===r[0]?l[r[0]]=!0:s=!0;break;case"enum":let a=r[1].match(/enum<([^>]+)>/);if(null==a?void 0:a[1].match(RegExp(`(^|\\|)${o()(t)}(\\||$)`))){l[r[0]]=t;let e=RegExp(`/{${String(r[0])}:enum<([^\\|}]+(?:\\|[^\\|}]+)+)>}(?:/|$)`);(null==i?void 0:i.match(e))&&(i=i.replace(e,`/${encodeURIComponent(o()(t))}/`))}else s=!0;break;default:let c=this.constructor.name;return{data:`Unknown data typing of "{${e}}" in ${c}.`,path:""}}}else if(t===n)continue;else if(n&&"*"!==n||0!==a.length){s=!0;break}else break}if(!s)return{data:l,path:i}}return{data:`There was a path mismatch for the URL at "${t}"`,path:""}}function l(e,t){return a(e,t).data}function s(e,t){return a(e,t).path}},552626:function(e,t,n){n.d(t,{D:()=>r});function r(){return"/{region:string}/{org:string}"}},34084:function(e,t,n){n.d(t,{U:()=>r});function r(){return"/{region:string}/{org:string}/#"}},843591:function(e,t,n){n.d(t,{s:()=>o});var r=n(585452);function o(e=r.l.location.search){return new URLSearchParams(decodeURI(e))}},913533:function(e,t,n){n.d(t,{m:()=>a});var r=n(824676),o=n(552626),i=n(34084);function a(e,t={},n={},l=!1){let s=[].concat(e),c="";for(s=s.map(e=>e.includes((0,o.D)())?e.replace((0,o.D)(),(0,i.U)()):e);s.length;){let e=!1,o=`/${s.shift().replace(/^\//,"")}`;for(let n in t){let r=t[n];if(null==r)continue;let i=RegExp(`/{${n}:string}(?:/|$)`),a=RegExp(`/{${n}:exists}(?:/|$)`),l=RegExp(`/{${n}:enum<([^\\|}]+(?:\\|[^\\|}]+)*)>}(?:/|$)`);if(o.match(i))o=o.replace(i,`/${encodeURIComponent(r)}/`);else if(o.match(a))o=o.replace(a,`/${encodeURIComponent(n)}/`);else if(o.match(l)&&o.match(l)[1].split("|").includes(r))o=o.replace(l,`/${encodeURIComponent(r)}/`);else{e=!0;break}}if(!o.match(/{/)){o=o.replace(/\/$/,"");let t=(0,r.a)(o,n);if(!e)return t.replace(/%25/g,"%2525");c=c||t;break}}if(c){let e=`Left over data when building URL "${c}". Supplied data: ${JSON.stringify(t)}`;if(l)throw Error(e);return console.error(e),encodeURI(c)}throw Error(`Invalid data supplied to "${e}". Supplied data: ${JSON.stringify(t)}`)}},470233:function(e,t,n){n.d(t,{H:()=>s});var r=n(54649),o=n(789541),i=n(585452);let a=["/:region/:org/data/marketplace","/marketplace","/:region/:org/data/provider-studio","/provider-studio","/:region/:org/data/shared/listing","/:region/:org/apps/listing"],l=["/:region/:org/data/manage/admin/:id?","/:region/:org/data/manage/provider/:id?","/:region/:org/data/manage/:id?","/:region/:org/data/shared/manage/:id?","/:region/:org/data/shared/provider/:id?","/:region/:org/data/shared/:id?","/:region/:org/admin/exchange/:id?","/:region/:org/data/","/:region/:org//"],s=()=>{var e;if(a.some(e=>(0,o.matchPath)({path:e,end:!1},i.l.location.pathname)))return r.SnowflakePuDxName;let t=l.reduce((e,t)=>{var n;return(null==e?void 0:null===(n=e.params)||void 0===n?void 0:n.id)?e:(0,o.matchPath)({path:t,end:!1},i.l.location.pathname)},null);return(null==t?void 0:null===(e=t.params)||void 0===e?void 0:e.id)&&decodeURI(t.params.id)}},72856:function(e,t,n){n.d(t,{Q:()=>r});function r(e){return e.includes("/#/")?e.replace("/#/","/"):e}},278257:function(e,t,n){n.d(t,{V1:()=>g,fo:()=>v});var r=n(206763),o=n(51723),i=n(710807),a=n.n(i),l=n(499924),s=n(337607),c=n(115922),u=n(630814),d=n(939819),f=n(502845),E=n(432541),p=n(740238),y=n(896315);function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function O(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let g=l.createContext(void 0);function v(e,t={}){let{secondaryRoles:n,sessionContext:r}=t,i=(0,l.useContext)(g),a=(0,l.useContext)(o.TelemetryPerformanceContext),u=(0,s.j)(),d=(0,l.useContext)(y.L),f=null==d?void 0:d.user,E=e||(null==f?void 0:f.currentRole())||(0,c.d)(null==f?void 0:f.currentUser),p=null!=n?n:u.secondaryRoles,[,b]=(0,l.useState)(0),O={};return(0,l.useEffect)(()=>{let e=Object.values(O).map(e=>e(()=>{b(e=>e+1)}));return()=>{for(let t of e)t()}}),new S(E,p,i,O,a,r)}class S{async create(e,t,n){return this.securableStore.create(this.role,e,t,b({profiler:this.profiler,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles},n))}async clone(e,t,n,r){return this.securableStore.clone(this.role,e,t,n,b({profiler:this.profiler,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles},r))}async alter(e,t,n){return this.securableStore.alter(this.role,e,t,b({profiler:this.profiler,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles},n))}async drop(e,t){return this.securableStore.drop(this.role,e,b({profiler:this.profiler,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles},t))}async undrop(e,t){return this.securableStore.undrop(this.role,e,b({profiler:this.profiler,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles},t))}useList(e,t,n,o){let i=this.useListSkippable(e,t,n,o),a=(0,r.N)(b({profiler:this.profiler},o)),s=(0,r.N)(n),c=this.role,u=l.useCallback(()=>this.securableStore.list(c,e,t,s,O(b({},a),{sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles,forceRefresh:!0})),[c,t,s,e,a]);if(void 0===i)throw Error("skipped somehow");return[i,u]}useListSkippable(e,t,n,r){let o=this.useListSkippableNoThrowAux(e,t,n,r);if(o){if((0,p.M)(o.value))throw(0,d.d)(o);if((0,E.D)(o.value))throw o.value.error;return o.value}}useListSkippableNoThrowAux(e,t,n,o){let[,i]=(0,l.useState)(null),a=(0,r.N)(b({profiler:this.profiler,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles},o)),s=this.role;if((0,l.useEffect)(()=>{if(null==a||!a.skipFetch)return this.securableStore.list(s,e,t,n,a).register(i)},[s,e,t,n,a]),null==a||!a.skipFetch)return this.securableStore.list(s,e,t,n,a)}useListSkippableNoThrow(e,t,n,r){var o;return null===(o=this.useListSkippableNoThrowAux(e,t,n,r))||void 0===o?void 0:o.value}useGet(e,t,n){let r=this.useGetSkippable(e,t,n);if(void 0===r)throw Error("skipped somehow");return r}useGetMulti(e,t,n){let o=t instanceof Array?t:[t],i=o.map(t=>this.useGet(e,t,n)),s=(0,l.useMemo)(()=>Object.assign({},...a()(i,["lastLoadTime"]).map(e=>e.result)),i),c=Object.fromEntries(i.map((e,t)=>[o[t],e])),u=(0,r.N)(n),d=this.role;return{merged:s,bylevel:c,refresh:l.useCallback(t=>this.securableStore.get(d,e,t,O(b({profiler:this.profiler},u),{sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles,forceRefresh:!0})),[d,e,u])}}useGetSkippableNoThrowAux(e,t,n){let[,o]=(0,l.useState)({result:void 0,loadState:f.p.loading});n=(0,r.N)(b({profiler:this.profiler,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles},n));let i=this.role;if((0,l.useEffect)(()=>{if(null==n?void 0:n.skipFetch)return;let r=this.securableStore.get(i,e,t,n);return o(r.value),r.register(o)},[i,e,t,n]),null==n||!n.skipFetch)return this.securableStore.get(i,e,t,n)}useGetSkippableNoThrow(e,t,n){var r;return null===(r=this.useGetSkippableNoThrowAux(e,t,n))||void 0===r?void 0:r.value}useGetSkippable(e,t,n){let r=this.useGetSkippableNoThrowAux(e,t,n);if(r){if((0,p.M)(r.value))throw(0,u.c)(r);if((0,E.D)(r.value))throw r.value.error;return r.value}}get(e,t,n){var r;let o=null!==(r=null==n?void 0:n.role)&&void 0!==r?r:this.role,i=this.securableStore.get(o,e,t,O(b({profiler:this.profiler},n),{sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles}));return this.registersMap[i.updatingKey]=i.register,i.value}listIds(e,t,n,r){var o;let i=null!==(o=null==r?void 0:r.role)&&void 0!==o?o:this.role,a=this.securableStore.list(i,e,t,n,O(b({profiler:this.profiler},r),{sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles}));return this.registersMap[a.updatingKey]=a.register,a.value}useRefreshGet(e,t,n){let o=(0,r.N)(n),i=(0,r.N)(e);return l.useCallback(()=>this.securableStore.get(this.role,i,t,O(b({profiler:this.profiler},o),{sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles,forceRefresh:!0})),[i,t,o])}useHydratedList(e,t,n,o){let[i,a]=this.useHydratedListSkippable(e,t,n,o),s=(0,r.N)(b({profiler:this.profiler},o)),c=(0,r.N)(n),u=this.role,d=l.useCallback(()=>this.securableStore.list(u,e,t,c,O(b({},s),{sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles,forceRefresh:!0})),[u,t,c,e,s]);if(void 0===i||void 0===a)throw Error("skipped somehow");return[i,a,d]}useHydratedListNoThrow(e,t,n,o){let i=this.useListSkippableNoThrow(e,t,n,o),a=(0,r.N)(b({profiler:this.profiler},o)),s=(0,r.N)(n),c=null==o?void 0:o.requestContext,u=this.role,d=(0,r.N)(this.sessionContext),f=l.useCallback(()=>this.securableStore.list(u,e,t,s,O(b({},a),{sessionContext:d,forceRefresh:!0})),[u,e,t,s,a,d]);return[(0,l.useMemo)(()=>{var e;return null==i?void 0:null===(e=i.result)||void 0===e?void 0:e.map(e=>{var n;return this.securableStore.get(this.role,e,t,{profiler:this.profiler,ttlMs:Number.MAX_SAFE_INTEGER,requestContext:c,sessionContext:this.sessionContext,secondaryRoles:null!==(n=null==o?void 0:o.secondaryRoles)&&void 0!==n?n:this.secondaryRoles}).value.result},this.profiler)},[i,t,c,null==o?void 0:o.secondaryRoles]),i,f]}useHydratedListSkippable(e,t,n,o){let i=this.useListSkippable(e,t,n,o),a=(0,r.N)(null==o?void 0:o.requestContext),s=null==i?void 0:i.result;return[(0,l.useMemo)(()=>null==s?void 0:s.map(e=>{var n;return this.securableStore.get(this.role,e,t,{profiler:this.profiler,ttlMs:Number.MAX_SAFE_INTEGER,requestContext:a,sessionContext:this.sessionContext,secondaryRoles:null!==(n=null==o?void 0:o.secondaryRoles)&&void 0!==n?n:this.secondaryRoles}).value.result},this.profiler),[s,t,a,null==o?void 0:o.secondaryRoles]),i]}grant(e,t){return this.securableStore.grant(this.role,e,b({profiler:this.profiler,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles},t))}useIsRefreshing(e){let[t,n]=(0,l.useState)(!1),[r,o]=(0,l.useState)(e);return(0,l.useEffect)(()=>{if(!r)return;let e=this.securableStore.areRefreshesWithIDPending(r);return n(e.value||!0),e.register(e=>{n(e),o(void 0)})},[r]),[t,r,o]}constructor(e,t,n,r,o,i){this.role=e,this.secondaryRoles=t,this.securableStore=n,this.registersMap=r,this.profiler=o,this.sessionContext=i}}},630814:function(e,t,n){n.d(t,{c:()=>i});var r=n(555013),o=n(432541);function i(e){return new Promise((t,n)=>{let i=e.register(e=>{(0,o.D)(e)?(i(),n(e.error)):(0,r.j)(e)&&(i(),t(e))})})}},939819:function(e,t,n){n.d(t,{d:()=>i});var r=n(432541),o=n(205166);function i(e){return new Promise((t,n)=>{let i=e.register(e=>{(0,r.D)(e)?(i(),n(e.error)):(0,o.g)(e)&&(i(),t(e))})})}},286161:function(e,t,n){n.d(t,{r:()=>i});var r=n(740238),o=n(548484);function i(e,t){return new Promise(n=>{if((0,o.O)(e.value)||(0,r.M)(e.value)){let i=e.register(e=>{(0,o.O)(e)||(0,r.M)(e)||(t||i(),n(e))})}else n(e.value)})}},264644:function(e,t,n){n.d(t,{W:()=>o});var r=n(740238);function o(e){return new Promise(t=>{if((0,r.M)(e.value)){let n=e.register(e=>{(0,r.M)(e)||(n(),t(e))})}else t(e.value)})}},836898:function(e,t,n){n.d(t,{g:()=>O,w:()=>b});var r=n(582049),o=n(50820),i=n(491742),a=n(207001),l=n(645959),s=n(708048),c=n(325463),u=n(562808),d=n(160510),f=n(37640),E=n(460926);function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function y(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let b=e=>{var t,n,o,l;let u,b;let O=(null===(t=e.id)||void 0===t?void 0:t.name)||"",g=(null===(l=e.options)||void 0===l?void 0:null===(o=l.extras)||void 0===o?void 0:null===(n=o.filter)||void 0===n?void 0:n.toString())||"",v=(0,s.M)({name:O,type:r.M.APPLICATION});g?(u="CALL SYSTEM$GET_REFERENCE_DEFINITIONS(?,[?])",b=[v,(0,c.i)(g)]):(u="CALL SYSTEM$GET_REFERENCE_DEFINITIONS(?)",b=[v]);let S=new i.L(u,...b).toQuery();return y(p({},e),{query:S,adapter:e=>{var t,n,o;let i=null!==(o=null===(n=e.rows)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t[0])&&void 0!==o?o:"",l=i?(0,f.F)(i):[],s=(0,E.y)(l);return s.forEach(e=>{let t=e.objectType.toLowerCase();if("api integration"===t)e.objectType=r.M.API_INTEGRATION;else if("external table"===t)e.objectType=r.M.EXTERNAL_TABLE;else if("external_access integration"===t||"external access integration"===t)e.objectType=r.M.EXTERNAL_ACCESS_INTEGRATION;else if("function"===t||"procedure"===t){let t=e.bindings;for(let e=0;e<t.length;e++)if(t[e].name){let n=t[e],{args:r,name:o}=(0,a.L)(n.name),i=(0,d.Z2)(o);n.name=i||o,n.args=r}}}),{rows:[{id:{type:r.M.APPLICATION,name:O},references:s}]}},desc:"show-application-references"})},O=(e,t)=>{let n;let a=e.reference;if(!a)return[];let d=(0,l.y)(p({type:r.M.PROCEDURE,database:t.name},a.registerCallback)),f=[],E=(0,c.i)(a.name),b=(0,c.i)(a.actionType);switch(a.actionType){case o.l.ADD:if(a.objects&&a.objects.length>0){n=`call ${d}(?, {}, system$reference({}, ?, 'PERSISTENT', {}))`;for(let e=0;e<a.objects.length;e++){let t=a.objects[e],r=(0,s.M)(t,{withArgs:!0}),o=(0,c.i)(t.type),l=new i.L().add(n,E,b,o,r,(0,u.K)(a.privileges||[]));f.push(y(p({},l.toQuery()),{desc:"set-reference-add"}))}}break;case o.l.REMOVE:if(a.objects&&a.objects.length>0){n=`call ${d}(?, {}, ?)`;for(let e=0;e<a.objects.length;e++){let t=(0,c.i)(a.objects[e]),r=new i.L().add(n,E,b,t);f.push(y(p({},r.toQuery()),{desc:"set-reference-remove"}))}}break;case o.l.CLEAR:{n=`call ${d}(?, {}, '')`;let e=new i.L().add(n,E,b);f.push(y(p({},e.toQuery()),{desc:"set-reference-clear"}))}}return f}},796723:function(e,t,n){n.d(t,{T:()=>r,U:()=>o});let r="SYSTEM$STREAMLIT_NOTEBOOK_WH",o="SYSTEM$WAREHOUSE_RUNTIME"},724625:function(e,t,n){n.d(t,{w3:()=>eb,n5:()=>e_,As:()=>eg,jJ:()=>ep,Vq:()=>eI,pV:()=>es,Nj:()=>eS,r5:()=>ey,_t:()=>el,Vk:()=>eT,rW:()=>ea});var r=n(678830),o=n.n(r),i=n(326290),a=n.n(i),l=n(582049),s=n(491742),c=n(708048),u=n(264243);function d(e,t){if(t.type===l.M.EXTERNAL_TABLE)e.add("{} IDENTIFIER(?)",(0,u.T)(l.M.TABLE),(0,c.M)(t));else if(t.type===l.M.ML_MODEL_VERSION){let n={database:t.database,schema:t.schema,name:t.module,type:l.M.ML_MODEL};e.add("MODEL IDENTIFIER (?) MODIFY VERSION {}",(0,c.M)(n),{bindingsJSONRepr:t.name,inlineRepr:t.name})}else e.addFullyQualifiedIdentifier(t)}var f=n(830658),E=n(121085),p=n(127061),y=n(345970),b=n(475387),O=n(548513),g=n(645333),v=n(568655),S=n(366212),m=n(325463),h=n(139629),_=n(118470),I=n(107181),T=n(185181),R=n(966727);let C={[T.Q.EDIT_APP_PACKAGE]:({id:e,alterProps:t,descPrefix:n})=>{let{comment:r,distribution:o}=t,i=new s.L;return i.add("ALTER APPLICATION PACKAGE {} SET COMMENT = {} DISTRIBUTION = {}; ",(0,c.M)(e),(0,m.i)(r),(0,h.V)(o)),{alterSqlQuery:i.toQuery(),desc:`${n}-edit`}},[T.Q.RENAME_APP_PACKAGE]:({id:e,alterProps:t,descPrefix:n})=>{let{name:r}=t,o=new s.L;return o.add("ALTER APPLICATION PACKAGE IDENTIFIER(?) RENAME TO IDENTIFIER(?)",(0,c.M)(e),(0,c.M)({type:l.M.APPLICATION_PACKAGE,name:r})),{alterSqlQuery:o.toQuery(),desc:`${n}-rename`,newName:r}},[T.Q.ADD_VERSION]:({id:e,alterProps:t,descPrefix:n})=>{let{version:r,pathToVersionDirectory:o,label:i,releaseChannel:a}=t,l=new s.L;return l.add("ALTER APPLICATION PACKAGE {}",(0,c.M)(e)),a?l.add("MODIFY RELEASE CHANNEL {} ADD VERSION {}",(0,R.t)(a),(0,R.t)(r)):l.add("ADD VERSION {} USING {} LABEL = {}",(0,R.t)(r),(0,m.i)(o),(0,m.i)(null!=i?i:"")),{alterSqlQuery:l.toQuery(),desc:a?`${n}-add-version-to-release-channel`:`${n}-add-version`}},[T.Q.ADD_PATCH_TO_VERSION]:({id:e,alterProps:t,descPrefix:n})=>{let{version:r,pathToVersionDirectory:o,label:i}=t;return{alterSqlQuery:new s.L().add("ALTER APPLICATION PACKAGE IDENTIFIER(?) ADD PATCH FOR VERSION {} USING {} LABEL = {}",(0,c.M)(e),(0,R.t)(r),(0,m.i)(o),(0,m.i)(null!=i?i:"")).toQuery(),desc:`${n}-create-new-patch`}},[T.Q.DROP_VERSION]:({id:e,alterProps:t,descPrefix:n})=>{let{version:r}=t;return{alterSqlQuery:new s.L().add("ALTER APPLICATION PACKAGE {} DROP VERSION {}",(0,c.M)(e),(0,R.t)(r)).toQuery(),desc:`${n}-drop-version`}},[T.Q.SET_DEFAULT_RELEASE_DIRECTIVE]:({id:e,alterProps:t,descPrefix:n})=>{let{version:r,patch:o,releaseChannel:i}=t,a=new s.L;return a.add("ALTER APPLICATION PACKAGE {}",(0,c.M)(e)),i&&a.add("MODIFY RELEASE CHANNEL {}",(0,R.t)(i)),a.add("SET DEFAULT RELEASE DIRECTIVE VERSION = {} PATCH = {}",(0,R.t)(r),(0,v._)(o)),{alterSqlQuery:a.toQuery(),desc:i?`${n}-set-default-release-directive-for-release-channel`:`${n}-set-default-release-directive`}},[T.Q.SET_RELEASE_DIRECTIVE]:({id:e,alterProps:t,descPrefix:n})=>{let{version:r,patch:o,directiveName:i,accounts:a,releaseChannel:u}=t,d=new s.L,f=a.map(e=>(0,c.M)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({type:l.M.ACCOUNT},e)));return d.add("ALTER APPLICATION PACKAGE {}",(0,c.M)(e)),u&&d.add("MODIFY RELEASE CHANNEL {}",(0,R.t)(u)),d.add("SET RELEASE DIRECTIVE {} ACCOUNTS = (",(0,R.t)(i)),f.forEach((e,t)=>{let n=t===f.length-1;d.add(n?"{}":"{}, ",e)}),d.add(") VERSION = {} PATCH = {}",(0,R.t)(r),(0,v._)(o)),{alterSqlQuery:d.toQuery(),desc:u?`${n}-set-release-directive-for-release-channel`:`${n}-set-release-directive`}},[T.Q.UNSET_RELEASE_DIRECTIVE]:({id:e,alterProps:t,descPrefix:n})=>{let{directiveName:r,releaseChannel:o}=t,i=new s.L;return i.add("ALTER APPLICATION PACKAGE {}",(0,c.M)(e)),o&&i.add("MODIFY RELEASE CHANNEL {}",(0,R.t)(o)),i.add("UNSET RELEASE DIRECTIVE {}",(0,R.t)(r)),{alterSqlQuery:i.toQuery(),desc:o?`${n}-unset-release-directive-for-release-channel`:`${n}-unset-release-directive`}},[T.Q.MODIFY_RELEASE_DIRECTIVE]:({id:e,alterProps:t,descPrefix:n})=>{let{directiveName:r,version:o,patch:i,releaseChannel:a}=t,l=new s.L;return l.add("ALTER APPLICATION PACKAGE {}",(0,c.M)(e)),a&&l.add("MODIFY RELEASE CHANNEL {}",(0,R.t)(a)),l.add("MODIFY RELEASE DIRECTIVE {} VERSION = {} PATCH = {}",(0,R.t)(r),(0,R.t)(o),(0,v._)(i)),{alterSqlQuery:l.toQuery(),desc:a?`${n}-modify-release-directive-for-release-channel`:`${n}-modify-release-directive`}},[T.Q.REGISTER_VERSION]:({id:e,alterProps:t,descPrefix:n})=>{let{version:r,pathToVersionDirectory:o,label:i}=t;return{alterSqlQuery:new s.L().add("ALTER APPLICATION PACKAGE {} REGISTER VERSION {} USING {} LABEL = {}",(0,c.M)(e),(0,R.t)(r),(0,m.i)(o),(0,m.i)(null!=i?i:"")).toQuery(),desc:`${n}-register-version`}},[T.Q.DEREGISTER_VERSION]:({id:e,alterProps:t,descPrefix:n})=>{let{version:r}=t;return{alterSqlQuery:new s.L().add("ALTER APPLICATION PACKAGE {} DEREGISTER VERSION {}",(0,c.M)(e),(0,R.t)(r)).toQuery(),desc:`${n}-deregister-version`}}},A=e=>{var t,n;let{alterSqlQuery:r,desc:o,newName:i}=(0,C[e.alterProps.alterType])(e);return{alters:[(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},r),n=n={desc:o},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t)],newName:null!=i?i:""}};var N=n(836898),w=n(179833);let L=(e,t)=>{let{shareId:n,distribution:r,title:o,description:i,profile:a,targetAccounts:l,regions:u,autoFulfillment:d,reviewParameter:f="FALSE",publishParameter:E="FALSE"}=t,p={title:o,description:i,profile:null!=a?a:void 0,terms_of_service:{type:"OFFLINE"},targets:{accounts:l.length>0?l:void 0,regions:u.length>0?u:void 0},auto_fulfillment:d?{refresh_type:d.refreshType,refresh_schedule:d.refreshSchedule}:void 0};return new s.L().add("CREATE LISTING IDENTIFIER(?) FOR SHARE IDENTIFIER(?) AS {} DISTRIBUTION={} REVIEW={} PUBLISH={}",(0,c.M)(e),(0,c.M)(n),(0,w.Z)(p,{forceQuotes:!0}),(0,h.V)(r),(0,h.V)(f),(0,h.V)(E)).toQuery()},k=e=>new s.L().add("DROP LISTING IDENTIFIER(?)",(0,c.M)(e)).toQuery();var P=n(445070),D=n(502146);let M=e=>{if(e)return{featured:e}},j=e=>{var t,n;if(e)return{documentation:null!==(t=e.documentation)&&void 0!==t?t:void 0,media:null!==(n=e.media)&&void 0!==n?n:void 0}},U=e=>{var t,n,r,o,i,l;let s=j(e.resources),c=M(e.dataDictionary);return{title:e.title,subtitle:null!==(t=e.subtitle)&&void 0!==t?t:void 0,description:null!==(n=e.description)&&void 0!==n?n:void 0,custom_contact:null!==(r=e.customContact)&&void 0!==r?r:void 0,profile:null!==(o=e.profile)&&void 0!==o?o:void 0,terms_of_service:{type:e.termsOfService.type,link:null!==(i=e.termsOfService.link)&&void 0!==i?i:void 0},auto_fulfillment:e.autoFulfillment?{refresh_type:e.autoFulfillment.refreshType,refresh_schedule:e.autoFulfillment.refreshSchedule}:void 0,business_needs:e.businessNeeds,targets:{accounts:e.targetAccounts,regions:e.regions},usage_examples:e.usageExamples,categories:e.categories,resources:s,data_attributes:e.dataAttributes?{refresh_rate:e.dataAttributes.refreshRate,geography:{geo_option:e.dataAttributes.geography.geoOption,granularity:e.dataAttributes.geography.granularity,coverage:e.dataAttributes.geography.coverage},time:(0,D.l)(e.dataAttributes.time,a()),features:null!==(l=e.dataAttributes.features)&&void 0!==l?l:void 0}:void 0,data_dictionary:c}},x={[P.d.EDIT]:({id:e,alterProps:t,descPrefix:n})=>{let{listingDetails:r}=t,o=U(r);return{alterSqlQuery:new s.L("ALTER LISTING IDENTIFIER(?) AS {}",(0,c.M)(e),(0,w.Z)(o,{forceQuotes:!0})).toQuery(),desc:`${n}-edit`}},[P.d.PUBLISH]:({id:e,descPrefix:t})=>({alterSqlQuery:new s.L("ALTER LISTING IDENTIFIER(?) PUBLISH",(0,c.M)(e)).toQuery(),desc:`${t}-publish`}),[P.d.UNPUBLISH]:({id:e,descPrefix:t})=>({alterSqlQuery:new s.L("ALTER LISTING IDENTIFIER(?) UNPUBLISH",(0,c.M)(e)).toQuery(),desc:`${t}-unpublish`})},F=e=>{var t,n;let{alterSqlQuery:r,desc:o,newName:i}=(0,x[e.alterProps.alterType])(e);return{alters:[(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},r),n=n={desc:o.replaceAll("_","-").toLowerCase()},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t)],newName:null!=i?i:""}};var G=n(729991),B=n(867073);function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function H(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function $(e){return(t,n)=>e(t,n)}function K(e,t){let n=`alter-${e.type.toLowerCase()}`;return`${n}-${t}`}let Q=$((e,t)=>{if(!t.push)return null;if(t.secret&&t.push){let{secret:n,name:r,email:o,comment:i,to:a}=t;return[H(V({},(0,B.fd)(e,{secret:n,name:r,email:o,comment:i,to:a})),{desc:K(e,"push")})]}let{username:n,password:r,name:o,email:i,comment:a,to:l}=t;return[H(V({},(0,B.fd)(e,{username:n,password:r,name:o,email:i,comment:a,to:l})),{desc:K(e,"push")})]}),W=$((e,t)=>{if(!0===t.add){let{from:n,live:r}=t;return[H(V({},(0,B.Hb)(e,{from:n,live:r||!n})),{desc:K(e,"add-version")})]}return null}),Y=$((e,t)=>!0===t.commit?[H(V({},(0,B.Tp)(e)),{desc:K(e,"commit")})]:null),Z=$((e,t)=>!0===t.pull?[H(V({},(0,B.Qo)(e,t.enableConflictResolution)),{desc:K(e,"pull")})]:null),z=$((e,t)=>t.executeAs?[H(V({},(0,B.cA)(e,t.executeAs)),{desc:K(e,"execute-as")})]:null),q=[W,Y,Q,Z,z,$((e,t)=>t.newId?[H(V({},(0,B.U9)(e,t.newId)),{desc:K(e,"rename-to")})]:null),$((e,t)=>t.newSchema&&t.newOwner?[H(V({},(0,B.oh)(e,t.newSchema,t.newOwner)),{desc:K(e,"move-to")})]:null)];var J=n(916616),X=n.n(J);let ee=(e,t)=>{let n=[],r=[],o=[];return e.forEach(e=>{e.targetColNames?e.targetColNames.forEach(t=>{o.push({mappedColumns:e.mappedColumns,policy:e.policy,targetColName:t})}):o.push(e)}),t.forEach(e=>{e.targetColNames?e.targetColNames.forEach(t=>{r.push({mappedColumns:e.mappedColumns,policy:e.policy,targetColName:t})}):r.push(e)}),r.forEach(e=>{if(e.policy.domain===l.M.AGGREGATION_POLICY||e.policy.domain===l.M.ROW_ACCESS_POLICY){let t=o.find(t=>t.policy.domain===e.policy.domain);t&&n.push({toSet:t,toUnset:e})}else{let t=o.find(t=>t.policy.domain===e.policy.domain&&t.targetColName===e.targetColName);t&&n.push({toSet:t,toUnset:e})}}),{toRemove:r.filter(e=>!n.some(({toUnset:t})=>X()(t,e))),toAdd:o.filter(e=>!n.some(({toSet:t})=>X()(t,e))),toEdit:n}};function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function en(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function er(e){return a()(e).toUpperCase().replace("UTF_8","UTF8")}function eo(e,t){var n;e.add("{} {}",(n=t.name,(0,I.yB)(n)?(0,S.M)(n):(0,S.M)((0,E.P)(n))),(0,b.j)(t.type));let r="STRING"===t.type||"VARCHAR"===t.type||"DATE"===t.type||"TIMESTAMP"===t.type?`'${t.default}'`:String(t.default);void 0!==t.default&&e.add("DEFAULT {}",(0,h.V)(r)),t.notNull&&e.add("NOT NULL"),t.comment&&e.add("COMMENT {}",(0,m.i)(t.comment))}let ei=["ALLOWED_AUTHENTICATION_SECRETS","STORAGE_INTEGRATION"];function ea(e,t,n){if(t){let r=!1;for(let i of Object.keys(t)){let a=t[i],s=er(i);switch(typeof a){case"string":"FILE_FORMAT"===s?e.add("FILE_FORMAT = (TYPE = {})",(0,g.a)(a)):"DEFAULT_SECONDARY_ROLES"===s?(e.add("{} = (",(0,g.a)(s)),a&&e.add("{}",(0,m.i)(a)),e.add(")")):ei.includes(s)?e.add("{} = {}",(0,O.e)(s),(0,O.e)(a)):e.add("{} = {}",(0,g.a)(s),(0,m.i)(a));break;case"boolean":e.add("{} = {}",(0,g.a)(s),(0,y.S)(a));break;case"number":e.add("{} = {}",(0,g.a)(s),(0,v._)(a));break;case"object":if(o()(a))a.length>0?(e.add("{} = (",(0,g.a)(s)),a.forEach((t,n)=>{n>0&&e.add(","),e.add("{}",(0,m.i)(t))}),e.add(")")):n&&e.add("{} = ()",(0,g.a)(s));else if(null===a)e.add("{} = null",(0,g.a)(s));else switch(s){case"REPLICA_OF":e.add("AS REPLICA OF IDENTIFIER(?)",(0,c.M)(et({type:l.M.DATABASE},a)));break;case"SCHEDULE":"mins"in a?e.add("{} = {}",(0,g.a)(s),(0,m.i)(`${a.mins} MINUTE`)):"expression"in a&&e.add("{} = {}",(0,g.a)(s),(0,m.i)(`USING CRON ${a.expression} ${a.timezone}`));break;case"LOCATION":e.add("{} = {}",(0,g.a)(s),(0,c.M)(a));break;case"FILE_FORMAT":e.add("{} = (FORMAT_NAME = {})",(0,g.a)(s),(0,c.M)(a));break;case"TRIGGERS":r=!0;break;case"METADATA":e.add("METADATA = '{}'",{inlineRepr:(0,f.H)(JSON.stringify(a))});break;default:e.add("{} = (",(0,g.a)(s)),ea(e,a),e.add(")")}}}r&&eR(e,t.triggers)}}function el(e){return(0,I.SD)(e)?e.toUpperCase():(0,I.r9)(e)?(0,_.b)(e):e}function es(e){return en(et({},e),{name:el(e.name)})}let ec=[{keyword:"secure",renderer:e=>{e.add("secure")}},{keyword:"replace",renderer:e=>{e.add("or replace")}}],eu=[{keyword:"existsConditional",renderer:(e,t)=>{"ifNotExists"===t&&e.add("if not exists")}}],ed=[{keyword:"columns",renderer:function(e,t){e.add("("),function(e,t,n){for(let r=0;r<t.length;r++)r>0&&e.add(","),n(e,t[r])}(e,t,eo),e.add(")")}},{keyword:"sourceTable",renderer:function(e,t){e.add("on"),e.addFullyQualifiedIdentifier(t)}},{keyword:"returns",renderer:(e,t)=>{e.add("returns {}",(0,O.e)(t))}},{keyword:"withManagedAccess",renderer:e=>{e.add("WITH MANAGED ACCESS")}},{keyword:"language",renderer:(e,t)=>{e.add("language {}",(0,O.e)(t))}},{keyword:"from",renderer:(e,t)=>{e.add("FROM"),"string"==typeof t?e.add("{}",(0,m.i)(t)):e.addFullyQualifiedIdentifier(t)}}],ef=[{keyword:"definition",renderer:function(e,t,n){e.add("as"),n.type===l.M.FUNCTION||n.type===l.M.PROCEDURE?e.add("{}",(0,m.i)(t)):e.add("{}",(0,S.M)(t))}}];function eE(e,t,n,r){for(let o of t){let t=n[o.keyword];void 0!==t&&(o.renderer(e,t,r),delete n[o.keyword])}}function ep(e,t){if(e.type===l.M.ORG_EMAIL)return eC(l.M.ORG_EMAIL,"CREATE",t);if(e.type===l.M.BUDGET_BUNDLE)return(0,G.cQ)(e);if(e.type===l.M.APPLICATION){let n=t;return n.from.type===l.M.APPLICATION_PACKAGE?function(e,t){let n=t.from.name,r=t.version,o=t.patch,i=new s.L().add("create {} IDENTIFIER(?) from APPLICATION PACKAGE IDENTIFIER(?)",(0,u.T)(e.type),(0,c.M)(e),(0,c.M)({name:n,type:l.M.APPLICATION_PACKAGE}));return t.from.type===l.M.APPLICATION_PACKAGE&&r&&void 0!==o&&i.add("USING VERSION {} PATCH {}",(0,R.t)(r),(0,v._)(o)),i.toQuery()}(e,n):function(e,t){let n=t.from?t.from.name:"",r=t.using?t.using.name:"",o=t.trial,i=t.autoRenew,a=t.preferMCD,l=t.paymentMethodId,d=t.purchaseOrderId,f=t.isBackgroundInstall,E=t.isEventSharingAuthorization,p=t.offer,y=new s.L().add("create {} IDENTIFIER(?)",(0,u.T)(e.type),(0,c.M)(e)).add("from LISTING {}",(0,m.i)(n));return r&&y.add("using RELEASE CHANNEL {}",(0,h.V)(r)),f&&y.add("BACKGROUND_INSTALL = true"),E&&y.add("AUTHORIZE_TELEMETRY_EVENT_SHARING = true"),ea(y,{trial:o,autoRenew:i,preferMCD:a,paymentMethodId:l,purchaseOrderId:d,offer:p}),y.toQuery()}(e,n)}if(e.type===l.M.PROVIDER_LISTING)return L(e,t);t=et({},t);let n=new s.L("create");eE(n,ec,t,e);let r=[];for(let e of eu){let n=t[e.keyword];void 0!==n&&(r.push({keyword:e.keyword,renderer:t=>e.renderer(t,n)}),delete t[e.keyword])}n.addFullyQualifiedIdentifier(e,r),eE(n,ed,t,e);let o=et({},t);for(let e of ef)delete o[e.keyword];return ea(n,o),eE(n,ef,t,e),n.toQuery()}function ey(e,t,n){let r=new s.L("CREATE");return r.add("{}",(0,u.T)(e.type)),r.add("IDENTIFIER(?)",(0,c.M)(t)),r.add("CLONE"),r.add("IDENTIFIER(?)",(0,c.M)(e)),n.comment&&r.add("COMMENT = {}",(0,m.i)(n.comment)),r.toQuery()}function eb(e,t){if(e.type===l.M.PROVIDER_LISTING)return k(e);if(e.type===l.M.ML_MODEL_VERSION){let t={name:e.module,database:e.database,schema:e.schema,type:l.M.ML_MODEL};return new s.L().add("ALTER MODEL IDENTIFIER(?) DROP VERSION {}",(0,c.M)(t),{bindingsJSONRepr:e.name,inlineRepr:e.name}).toQuery()}let n=new s.L("drop");return e.type===l.M.BUDGET_BUNDLE?n.add("instance IDENTIFIER(?)",(0,c.M)(e)):n.addFullyQualifiedIdentifier(e),(null==t?void 0:t.cascade)&&e.type===l.M.APPLICATION&&n.add("CASCADE"),e.type===l.M.ACCOUNT&&(null==t?void 0:t.gracePeriodInDays)&&n.add("grace_period_in_days="+t.gracePeriodInDays),n.toQuery()}function eO(e,{emailType:t,oldEmail:n,newEmail:r},o){let[i,a]=function(...e){return e.map(e=>Array.isArray(e)?e:[e])}(n,r),l=i.filter(e=>!a.includes(e)),s=a.filter(e=>!i.includes(e));return{alters:[...l.map((n,r)=>en(et({},eC(e,"DROP",{email:n,emailType:t})),{desc:`${o}-drop${0===r?"":"-"+(r+1)}`})),...s.map((n,r)=>en(et({},eC(e,"CREATE",{email:n,emailType:t})),{desc:`${o}-create${0===r?"":"-"+(r+1)}`}))],newName:""}}function eg(e,t){let n;let r=`alter-${e.type.toLowerCase()}`;if(e.type===l.M.ORG_EMAIL)return eO(l.M.ORG_EMAIL,t,r);if(e.type===l.M.ACCOUNT_EMAIL)return eO(l.M.ACCOUNT_EMAIL,t,r);if(e.type===l.M.SHARE&&t.useAdd){let n=[];return n.push(en(et({},function(e,t){let n=new s.L("alter");d(n,e),n.add("add");let r=t.accounts||[];return delete t.accounts,eA(n,r),n.toQuery()}(e,t)),{desc:`${r}-add-accounts`})),{alters:n,newName:""}}if(e.type===l.M.CONSUMER_LISTING&&t.unpublishByAdmin)return{alters:[en(et({},new s.L().add("call system$unpublish_data_exchange_listing_by_admin(?, ?, ?)",(0,m.i)(e.exchangeId),(0,m.i)(e.name),(0,m.i)(t.reason)).toQuery()),{desc:`${r}-unpublish-listing-by-admin`})],newName:""};if(e.type===l.M.LISTING&&t.appPackage)return{alters:[en(et({},new s.L().add("call SYSTEM$SETUP_LISTING_WITH_APPLICATION_PACKAGE(?, ?)",(0,c.M)(e),(0,c.M)({name:t.appPackage,type:l.M.APPLICATION_PACKAGE})).toQuery()),{desc:`${r}-setup-listing-with-app-package`})],newName:""};if(e.type===l.M.BUDGET_BUNDLE){let n;let o=[],i="";if(t.budgetId){let o=t.budgetId;i=el(o.name),n=en(et({},(0,G.Wh)(e,o)),{desc:`${r}-rename`})}if(t.spendingLimit&&o.push(en(et({},(0,G._w)(e,t.spendingLimit)),{desc:`${r}-set-spending-limit`})),t.emailNotification){let n=t.emailNotification;o.push(en(et({},(0,G.FX)(e,n.recipient)),{desc:`${r}-set-email-notification-without-integration`}))}return t.activate&&o.push(en(et({},(0,G.qz)(e)),{desc:`${r}-activate-account-budget`})),t.deactivate&&o.push(en(et({},(0,G.wS)(e)),{desc:`${r}-deactivate-account-budget`})),t.addResources&&t.addResources.length>0&&t.addResources.forEach(t=>o.push(en(et({},(0,G.Pl)(e,t)),{desc:`${r}-add-resource-to-budget`}))),t.removeResources&&t.removeResources.length>0&&t.removeResources.forEach(t=>o.push(en(et({},(0,G.yu)(e,t)),{desc:`${r}-remove-resource-from-budget`}))),n&&o.push(n),{alters:o,newName:i}}if(e.type===l.M.APPLICATION_PACKAGE&&t.alterType)return A({alterProps:t,id:e,descPrefix:r});if(e.type===l.M.PROVIDER_LISTING&&t.alterType)return F({alterProps:t,id:e,descPrefix:r});if(e.type===l.M.APPLICATION&&t.reference)return{alters:(0,N.g)(t,e),newName:""};if(e.type===l.M.ACCOUNT&&t.name){let n=el(t.name),o=[];return o.push(en(et({},function(e,t,n){var r,o;let i=new s.L("alter");return d(i,e),i.add("rename to IDENTIFIER(?)",(0,c.M)((r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},e),o=o={name:t},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}),r))),void 0!==n&&i.add("save_old_url = "+n),i.toQuery()}(e,n,t.saveOldUrl)),{desc:`${r}-rename`})),{alters:o,newName:n}}if(e.type===l.M.NOTEBOOK||e.type===l.M.STREAMLIT){let n=function(e,t){for(let n of q){let r=n(e,t);if(r)return r}return null}(e,t);if(n)return{alters:n,newName:""}}let o=[],i={},a=!1,u=[],f="";for(let E in t){let y=t[E];if("name"===E)y&&el(y)!==e.name&&(n=en(et({},eI(e,f=el(y))),{desc:`${r}-rename`}));else if("networkPolicy"===E&&e.type===l.M.ACCOUNT)o.push(en(et({},function(e,t){let n=new s.L("alter");return d(n,e),"activate"===t.action?n.add("set NETWORK_POLICY = {}",(0,m.i)(t.name)):n.add("unset NETWORK_POLICY"),n.toQuery()}(e,y)),{desc:`${r}-${y.action}-${y.name.replace(" ","-")}`}));else if("action"===E)o.push(en(et({},eT(e,y)),{desc:`${r}-${y.replace(" ","-")}`}));else if("secure"===E&&e.type===l.M.FUNCTION){let t=y?"set":"unset";o.push(en(et({},eT(e,`${t} secure`)),{desc:`${r}-${t}-secure`}))}else if("enableReplication"===E&&e.type===l.M.DATABASE)o.push(en(et({},eN(e,y,"enable replication")),{desc:`${r}-enable-replication`}));else if("disableReplication"===E&&e.type===l.M.DATABASE)o.push(en(et({},eN(e,y,"disable replication")),{desc:`${r}-disable-replication`}));else if("enableFailover"===E&&e.type===l.M.DATABASE)o.push(en(et({},eN(e,y,"enable failover")),{desc:`${r}-enable-failover`}));else if("disableFailover"===E&&e.type===l.M.DATABASE)o.push(en(et({},eN(e,y,"disable failover")),{desc:`${r}-disable-failover`}));else if("policy"===E){let t;let{toSet:n,toUnset:i,targetColumnName:a,entityColumns:s}=y,c=n?n.policy.domain:i.domain,u=c===l.M.ROW_ACCESS_POLICY,d=c===l.M.MASKING_POLICY,f=c===l.M.PROJECTION_POLICY,E=c===l.M.AGGREGATION_POLICY,p=c===l.M.PRIVACY_POLICY;u?ek({id:e,actions:o,toSet:n,toUnset:i,targetColumnName:a,descPrefix:r}):p?(n&&i?t=`${r}-drop-and-add-privacy-policy`:n?t=`${r}-add-privacy-policy`:i&&(t=`${r}-drop-privacy-policy`),o.push(en(et({},em({id:e,addParams:n,dropParams:i})),{desc:t}))):d?n&&i?o.push(en(et({},em({id:e,addParams:n,dropParams:i,targetColumnName:a})),{desc:`${r}-set-masking-policy-force`})):n?o.push(en(et({},em({id:e,addParams:n,targetColumnName:a})),{desc:`${r}-set-masking-policy`})):i&&o.push(en(et({},em({id:e,dropParams:i,targetColumnName:a})),{desc:`${r}-unset-masking-policy`})):f?n&&i?o.push(en(et({},em({id:e,addParams:n,dropParams:i,targetColumnName:a})),{desc:`${r}-set-projection-policy-force`})):n?o.push(en(et({},em({id:e,addParams:n,targetColumnName:a})),{desc:`${r}-set-projection-policy`})):i&&o.push(en(et({},em({id:e,dropParams:i,targetColumnName:a})),{desc:`${r}-unset-projection-policy`})):E&&eP({id:e,actions:o,toSet:n,toUnset:i,entityColumns:s,descPrefix:r})}else if("policies"===E){let{rowAccessPolicy:t,aggregationPolicy:n,projectionPolicies:i}=y;if(t){let{toSet:n,toUnset:i,targetColumnName:a}=t;ek({id:e,actions:o,toSet:n,toUnset:i,targetColumnName:a,descPrefix:r})}if(n){let{toSet:t,toUnset:i}=n;eP({id:e,actions:o,toSet:t,toUnset:i,entityColumns:null==t?void 0:t.entityColumns,descPrefix:r})}if(i){let{toSet:t,toUnset:n}=i;!function({id:e,actions:t,toSet:n,toUnset:r,descPrefix:o}){let{toAdd:i,toRemove:a,toEdit:l}=ee(null!=n?n:[],null!=r?r:[]);i.forEach(n=>{t.push(en(et({},em({id:e,addParams:n,targetColumnName:n.targetColName})),{desc:`${o}-set-projection-policy`}))}),a.forEach(n=>{t.push(en(et({},em({id:e,dropParams:n.policy,targetColumnName:n.targetColName})),{desc:`${o}-unset-projection-policy`}))}),l.forEach(n=>{t.push(en(et({},em({id:e,addParams:n.toSet,dropParams:n.toUnset.policy,targetColumnName:n.toSet.targetColName})),{desc:`${o}-set-projection-policy-force`}))})}({id:e,actions:o,toSet:t,toUnset:n,descPrefix:r})}}else if("tags"===E)(null==y?void 0:y.length)>0&&o.push(en(et({},function(e,t){let n=new s.L("alter");return ew(e,n),t[0].targetColumnName&&eL(n,t[0].targetColumnName),n.add("set TAG"),t.forEach((e,t)=>{t>0&&n.add(",");let r={name:e.name,database:e.database,schema:e.schema,type:l.M.TAG};n.add("IDENTIFIER(?) = {}",(0,c.M)(r),(0,m.i)(e.value))}),n.toQuery()}(e,y)),{desc:`${r}-set`}));else if("tagsToUnset"===E)(null==y?void 0:y.length)>0&&o.push(en(et({},function(e,t){let n=new s.L("alter");return ew(e,n),t[0].targetColumnName&&eL(n,t[0].targetColumnName),n.add("unset TAG"),t.forEach((e,t,r)=>{let o={type:l.M.TAG,name:e.name,database:e.database,schema:e.schema};t<r.length-1?n.add("IDENTIFIER(?),",(0,c.M)(o)):n.add("IDENTIFIER(?)",(0,c.M)(o))}),n.toQuery()}(e,y)),{desc:`${r}-unset`}));else if("columnToDrop"===E)o.push(en(et({},function(e,t){let n=new s.L("alter");ew(e,n),n.add("drop COLUMN");let r={type:l.M.SCHEMA,name:t};return n.add("{}",(0,c.M)(r)),n.toQuery()}(e,y)),{desc:`${r}-drop-column`}));else if((e.type===l.M.TABLE||e.type===l.M.VIEW||e.type===l.M.DYNAMIC_TABLE||e.type===l.M.ICEBERG_TABLE||e.type===l.M.EXTERNAL_TABLE)&&"columnComment"===E){let{column:t,comment:n}=y;o.push(en(et({},function(e,t,n){let r=new s.L("ALTER");return d(r,e),r.add(`ALTER COLUMN ${(0,p.v)(t)}`),n?r.add("COMMENT {}",(0,m.i)(n)):r.add("UNSET COMMENT"),r.toQuery()}(e,t,n)),{desc:`${r}-column-comment`}))}else{let t=e.type===l.M.WAREHOUSE&&"autoSuspend"===E;null!==y||e.type===l.M.RESOURCE_MONITOR||t?(i[E]=y,a=!0):u.push(E)}}let E=[];return o.length>0&&E.push(...o),a&&E.push(en(et({},eS(e,i)),{desc:`${r}-set`})),u.length>0&&E.push(en(et({},e_(e,u)),{desc:`${r}-unset`})),n&&E.push(n),{alters:E,newName:f}}let ev=[l.M.NETWORK_POLICY,l.M.NOTEBOOK,l.M.STREAMLIT];function eS(e,t){let n=new s.L("alter");d(n,e);let r=Object.keys(t);if(e.type===l.M.RESOURCE_MONITOR&&1===r.length&&"triggers"===r[0])eR(n,t.triggers);else if(e.type===l.M.SHARE&&void 0!==t.accounts&&null!==t.accounts){n.add("set");let e=t.accounts;delete t.accounts,eA(n,e),ea(n,t)}else n.add("set"),ea(n,t,ev.includes(e.type));return n.toQuery()}function em({id:e,addParams:t,dropParams:n,targetColumnName:r,entityColumns:o}){let i=new s.L("alter");ew(e,i);let a=null==t?void 0:t.policy.domain;return r&&eL(i,r),n&&t&&a!==l.M.ROW_ACCESS_POLICY&&a!==l.M.PRIVACY_POLICY?eh(i,t,r,o,!0):(n&&function(e,t){let{domain:n,name:r,schema:o,database:i}=t;n===l.M.MASKING_POLICY?e.add("unset masking policy"):n===l.M.ROW_ACCESS_POLICY?(e.add("drop row access policy"),e.add("IDENTIFIER(?)",(0,c.M)({type:n,name:r,schema:o,database:i}))):n===l.M.PRIVACY_POLICY?(e.add("drop privacy policy"),e.add("IDENTIFIER(?)",(0,c.M)({type:n,name:r,schema:o,database:i}))):n===l.M.AGGREGATION_POLICY?e.add("unset aggregation policy"):n===l.M.PROJECTION_POLICY&&e.add("unset projection policy")}(i,n),n&&t&&i.add(","),t&&eh(i,t,r,o)),i.toQuery()}function eh(e,t,n,r,o){let{policy:i,mappedColumns:a}=t,{domain:s,name:u,schema:d,database:f}=i,E={type:s,name:u,schema:d,database:f};s===l.M.MASKING_POLICY&&n&&a?(e.add("set masking policy"),e.add("IDENTIFIER(?)",(0,c.M)(E)),a.length>1&&(e.add("using ("),a.forEach((t,r,o)=>{0===r?e.add("{}",(0,c.M)({type:l.M.SCHEMA,name:n})):e.add("{}",(0,c.M)({type:l.M.SCHEMA,name:t.mappedColName})),r<o.length-1&&e.add(",")}),e.add(")")),o&&e.add("force")):s===l.M.ROW_ACCESS_POLICY&&!n&&a?(e.add("add row access policy"),e.add("IDENTIFIER(?)",(0,c.M)(E)),e.add("on ("),a.forEach((t,n,r)=>{let o={type:l.M.SCHEMA,name:t.mappedColName};e.add("{}",(0,c.M)(o)),n<r.length-1&&e.add(",")}),e.add(")")):s===l.M.AGGREGATION_POLICY?(e.add("set aggregation policy"),e.add("IDENTIFIER(?)",(0,c.M)(E)),(null==r?void 0:r.length)&&(e.add("ENTITY KEY ("),r.forEach((t,n)=>{e.add("{}",(0,c.M)({type:l.M.SCHEMA,name:t})),n<r.length-1&&e.add(",")}),e.add(")")),o&&e.add("force")):s===l.M.PROJECTION_POLICY&&n?(e.add("set projection policy"),e.add("IDENTIFIER(?)",(0,c.M)(E)),o&&e.add("force")):s===l.M.PRIVACY_POLICY&&(e.add("add privacy policy"),e.add("IDENTIFIER(?)",(0,c.M)(E)))}function e_(e,t){let n=new s.L("alter");n.addFullyQualifiedIdentifier(e),n.add("unset");for(let e=0;e<t.length;e++){let r=er(t[e]);e<t.length-1?n.add("{},",(0,g.a)(r)):n.add("{}",(0,g.a)(r))}return n.toQuery()}function eI(e,t){let n=new s.L("alter");return d(n,e),n.add("rename to IDENTIFIER(?)",(0,c.M)(en(et({},e),{name:t}))),n.toQuery()}function eT(e,t){let n=new s.L("alter");return n.addFullyQualifiedIdentifier(e),n.add("{}",(0,g.a)(t)),n.toQuery()}function eR(e,t){let{suspend:n,suspendImmediately:r,notify:o}=t;for(let t of((n||r||o)&&e.add("TRIGGERS"),n&&e.add("ON {} PERCENT DO SUSPEND",(0,v._)(n)),r&&e.add("ON {} PERCENT DO SUSPEND_IMMEDIATE",(0,v._)(r)),o))t&&e.add("ON {} PERCENT DO NOTIFY",(0,v._)(t))}function eC(e,t,n){let r=new s.L,o="";return e===l.M.ACCOUNT_EMAIL?"CREATE"===t?o="call system$ADD_EMAIL_STORAGE_FOR_ACCOUNT({}, {})":"DROP"===t&&(o="call system$DELETE_EMAIL_STORAGE_FOR_ACCOUNT({}, {})"):e===l.M.ORG_EMAIL&&("CREATE"===t?o="call system$ADD_EMAIL_STORAGE_FOR_ORGANIZATION({}, {})":"DROP"===t&&(o="call system$DELETE_EMAIL_STORAGE_FOR_ORGANIZATION({}, {})")),r.add(o,(0,m.i)(n.emailType),(0,m.i)(n.email)),r.toQuery()}function eA(e,t){e.add("ACCOUNTS ="),t.forEach((t,n)=>{0!==n&&e.add(","),e.add("{}",(0,c.M)({type:l.M.ACCOUNT,name:t}))})}function eN(e,t,n){let r=new s.L("alter");return d(r,e),r.add(`${n} to accounts`),t.forEach((e,t)=>{0!==t&&r.add(","),r.add("IDENTIFIER(?)",(0,c.M)(e))}),r.toQuery()}function ew(e,t){e.type===l.M.EXTERNAL_TABLE?t.add("{} IDENTIFIER(?)",(0,u.T)(l.M.TABLE),(0,c.M)(e)):e.type===l.M.MATERIALIZED_VIEW?t.add("{} IDENTIFIER(?)",(0,u.T)(l.M.VIEW),(0,c.M)(e)):t.addFullyQualifiedIdentifier(e)}function eL(e,t){let n={type:l.M.SCHEMA,name:t};e.add("modify COLUMN"),e.add("{}",(0,c.M)(n))}function ek({id:e,actions:t,toSet:n,toUnset:r,targetColumnName:o,descPrefix:i}){let a="";n&&r?a=`${i}-drop-and-add-row-access-policy`:n?a=`${i}-add-row-access-policy`:r&&(a=`${i}-drop-row-access-policy`),t.push(en(et({},em({id:e,addParams:n,dropParams:r,targetColumnName:o})),{desc:a}))}function eP({id:e,actions:t,toSet:n,toUnset:r,entityColumns:o,descPrefix:i}){let a="";n&&r?t.push(en(et({},em({id:e,addParams:n,dropParams:r,entityColumns:o})),{desc:`${i}-set-aggregation-policy-force`})):n?(a=`${i}-set-aggregation-policy`,t.push(en(et({},em({id:e,addParams:n,entityColumns:o})),{desc:a}))):r&&(a=`${i}-unset-aggregation-policy`,t.push(en(et({},em({id:e,dropParams:r})),{desc:a})))}},38601:function(e,t,n){n.d(t,{J:()=>i});var r=n(224454);let o=e=>{try{let t=JSON.parse(e);return"string"==typeof t}catch(e){return!0}},i=e=>{let t=e.filter(e=>!(0,r.U)(e));return 0===t.length?"":JSON.stringify(t.reduce((e,t)=>{var n,r;return n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},e),r=r={[t.key]:o(t.value)?t.value:JSON.parse(t.value)},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}),n},{}))}},37640:function(e,t,n){n.d(t,{F:()=>i});var r=n(54649),o=n(561843);function i(e){try{return(0,r.jsonParseDoubleDollarSafe)(e)}catch(e){return o.cM.error(Error(`error running jsonParseDoubleDollarSafe ${e}`)),{}}}},224454:function(e,t,n){n.d(t,{U:()=>r});let r=e=>""===e.key&&""===e.value},460926:function(e,t,n){n.d(t,{n:()=>u,y:()=>c});var r=n(693936),o=n.n(r),i=n(812598),a=n.n(i),l=n(502146),s=n(37640);function c(e){return(0,l.l)(e,o())}let u=e=>{let t=(0,s.F)(null!=e?e:"{}");return a()(t)?void 0:c(t)}},729991:function(e,t,n){n.d(t,{cQ:()=>b,Iq:()=>R,qz:()=>m,i4:()=>E,YY:()=>f,sq:()=>T,S6:()=>v,wS:()=>h,zZ:()=>I,yu:()=>A,SN:()=>y,FX:()=>g,ll:()=>S,Wh:()=>_,_w:()=>O,ny:()=>N,cC:()=>p,Pl:()=>C});var r=n(582049),o=n(81967),i=n(6407),a=n(121280),l=n(491742),s=n(708048),c=n(568655),u=n(325463);let d=e=>{var t;let n=(null==e?void 0:null===(t=e.database)||void 0===t?void 0:t.replace("/","."))||"",[r="",o=""]=e.name.split("/");return{tagName:[...n&&[n],r].join("."),tagValue:o}};function f(e){return new l.L().add("CALL {}!GET_SPENDING_LIMIT();",(0,s.M)(e)).toQuery()}function E(e){return new l.L().add("CALL {}!GET_NOTIFICATION_INTEGRATION_NAME();",(0,s.M)(e)).toQuery()}function p(e){return new l.L().add("CALL {}!GET_NOTIFICATION_EMAIL();",(0,s.M)(e)).toQuery()}function y(e,t){let{lowerBound:n,upperBound:r}=t;return new l.L().add("CALL {}!get_spending_history({}, {})",(0,s.M)(e),(0,u.i)(n),(0,u.i)(r)).toQuery()}function b(e){return new l.L().add("CREATE SNOWFLAKE.CORE.BUDGET {}();",(0,s.M)(e)).toQuery()}function O(e,t){return new l.L().add("CALL {}!SET_SPENDING_LIMIT({});",(0,s.M)(e),(0,c._)(t)).toQuery()}function g(e,t){return new l.L().add("CALL {}!SET_EMAIL_NOTIFICATIONS({});",(0,s.M)(e),(0,u.i)(t)).toQuery()}function v(){return new l.L("CALL SYSTEM$SHOW_BUDGETS_IN_ACCOUNT();").toQuery()}function S(){return new l.L("CALL SYSTEM$SHOW_BUDGET_DETAILS_IN_ACCOUNT();").toQuery()}function m(e){return new l.L().add("CALL {}!ACTIVATE();",(0,s.M)(e)).toQuery()}function h(e){return new l.L().add("CALL {}!DEACTIVATE();",(0,s.M)(e)).toQuery()}function _(e,t){return new l.L("ALTER SNOWFLAKE.CORE.BUDGET {} RENAME TO {};",(0,s.M)(e),(0,s.M)(t)).toQuery()}let I=e=>{let{inclusiveDateRange:t,timezone:n,serviceType:r,budgetId:c}=e,{lowerBound:d,upperBound:f}=(0,a.A)(t),E=(0,i.f)(t);return new l.L().add("CALL {}!GET_SERVICE_TYPE_USAGE({}, {}, {}, {}, {});",(0,s.M)(c),(0,u.i)(r),(0,u.i)(E),(0,u.i)(n||"UTC"),(0,u.i)((0,o.c)(d)),(0,u.i)((0,o.c)(f))).toQuery()},T=e=>new l.L().add("CALL {}!get_linked_resources();",(0,s.M)(e)).toQuery(),R=e=>new l.L().add("CALL {}!get_activation_date();",(0,s.M)(e)).toQuery(),C=(e,t)=>{if(t.type===r.M.TAG){let{tagName:n,tagValue:r}=d(t);return new l.L().add("CALL {}!ADD_TAG((SELECT SYSTEM$REFERENCE('TAG', {}, 'SESSION', 'APPLYBUDGET')), {});",(0,s.M)(e),(0,u.i)(n),(0,u.i)(r)).toQuery()}let n=t.type===r.M.APPLICATION?r.M.DATABASE:t.type;return new l.L().add("CALL {}!ADD_RESOURCE(SELECT SYSTEM$REFERENCE({}, '{}', 'SESSION', 'APPLYBUDGET'));",(0,s.M)(e),(0,u.i)(n),(0,s.M)(t)).toQuery()},A=(e,t)=>{if(t.type===r.M.TAG){let{tagName:n,tagValue:r}=d(t);return new l.L().add("CALL {}!REMOVE_TAG((SELECT SYSTEM$REFERENCE('TAG', {}, 'SESSION', 'APPLYBUDGET')), {});",(0,s.M)(e),(0,u.i)(n),(0,u.i)(r)).toQuery()}let n=t.type===r.M.APPLICATION?r.M.DATABASE:t.type;return new l.L().add("CALL {}!REMOVE_RESOURCE(SELECT SYSTEM$REFERENCE({}, '{}', 'SESSION', 'APPLYBUDGET'));",(0,s.M)(e),(0,u.i)(n),(0,s.M)(t)).toQuery()};function N(e){return new l.L().add("CALL {}!GET_CONFIG();",(0,s.M)(e)).toQuery()}},867073:function(e,t,n){n.d(t,{BW:()=>E,CG:()=>p,DS:()=>g,Hb:()=>v,M0:()=>y,Qo:()=>h,Rf:()=>_,Tp:()=>S,U9:()=>R,V1:()=>b,YK:()=>I,cA:()=>T,fd:()=>m,iv:()=>O,oh:()=>C});var r=n(582049),o=n(491742),i=n(26194),a=n(708048),l=n(568655),s=n(264243),c=n(141017),u=n(325463),d=n(139629),f=n(38601);function E(e){return new o.L().add("ALTER {} {} CHECKOUT;",(0,s.T)(e.type),(0,a.M)(e)).toQuery()}function p(e){return new o.L().add("SHOW CHECKOUTS IN {} {};",(0,s.T)(e.type),(0,a.M)(e)).toQuery()}function y(e){return new o.L().add("CALL SYSTEM$SHOW_WAREHOUSES_FOR_FILE_BASED_ENTITY({});",(0,u.i)(e)).toQuery()}function b(e){return new o.L().add("CALL SYSTEM$SHOW_SCHEMAS_IN_ACCOUNT_WITH_CREATE_FILE_BASED_ENTITY({});",(0,u.i)(e)).toQuery()}function O(e){return e.params?function({entityId:e,scheduleName:t,scheduleCronExpression:n,scheduleTimezone:i,warehouse:l,params:s}){return new o.L(`CREATE TASK IDENTIFIER(?) WAREHOUSE={} SCHEDULE={} CONFIG=$$${(0,f.J)([{id:0,key:"params",value:null!=s?s:""}])}$$ AS BEGIN LET PARAMS STRING := SYSTEM$GET_TASK_GRAPH_CONFIG('params')::string; EXECUTE {} {}(:PARAMS); END;`,(0,a.M)({type:r.M.TASK,name:t,database:e.database,schema:e.schema}),(0,u.i)(l),(0,u.i)(`USING CRON ${n} ${null!=i?i:"UTC"}`),(0,d.V)(e.type),(0,a.M)(e)).toQuery()}(e):function({entityId:e,scheduleName:t,scheduleCronExpression:n,scheduleTimezone:i,warehouse:l}){return new o.L("CREATE TASK IDENTIFIER(?) WAREHOUSE={} SCHEDULE={} AS EXECUTE {} {}();",(0,a.M)({type:r.M.TASK,name:t,database:e.database,schema:e.schema}),(0,u.i)(l),(0,u.i)(`USING CRON ${n} ${null!=i?i:"UTC"}`),(0,d.V)(e.type),(0,a.M)(e)).toQuery()}(e)}function g(e){return new o.L().add("ALTER TASK IDENTIFIER(?) RESUME",(0,a.M)(e)).toQuery()}function v(e,{from:t,live:n,versionAlias:r}){let i=new o.L("ALTER {} {} ADD",(0,s.T)(e.type),(0,a.M)(e));return n&&i.add("LIVE"),i.add("VERSION"),r&&!1===/^live$/iu.test(r)&&i.add("{}",(0,u.i)(r)),i.add("FROM {}",null==t||"last"===t?(0,d.V)("LAST"):(0,c.F)(t.gitRepository,t.path)).toQuery()}function S(e){return new o.L("ALTER {} {} COMMIT;",(0,s.T)(e.type),(0,a.M)(e)).toQuery()}function m(e,{username:t,password:n,name:r,email:i,comment:l,secret:d,to:f}){let E=new o.L("ALTER {} {} PUSH",(0,s.T)(e.type),(0,a.M)(e));return f&&E.add("TO {}",(0,c.F)(f.gitRepository,f.path)),d&&E.add("GIT_CREDENTIALS={}",(0,a.M)(d)),t&&E.add("USERNAME={}",(0,u.i)(t)),n&&E.add("PASSWORD={}",(0,u.i)(n)),r&&E.add("NAME={}",(0,u.i)(r)),i&&E.add("EMAIL={}",(0,u.i)(i)),l&&E.add("COMMENT={}",(0,u.i)(l)),E.toQuery()}function h(e,t=!1){let n=new o.L("ALTER {} {} PULL",(0,s.T)(e.type),(0,a.M)(e));return t&&n.add("ENABLE_MANUAL_CONFLICT_RESOLUTION=true"),n.toQuery()}function _({entityId:e,maxRuns:t}){return new o.L().add("CALL SYSTEM$LIST_FILE_BASED_ENTITY_EXECUTIONS({}, {}, {});",(0,u.i)(e.type),(0,u.i)((0,i.m)(e)),(0,l._)(t)).toQuery()}function I({entityId:e,queryId:t}){return new o.L().add("CALL SYSTEM$GET_FILE_BASED_ENTITY_EXECUTION({}, {}, {});",(0,u.i)(e.type),(0,u.i)((0,i.m)(e)),(0,u.i)(t)).toQuery()}function T(e,t){return new o.L(`ALTER {} IDENTIFIER(?) EXECUTE AS ${t}`,(0,s.T)(e.type),(0,a.M)(e)).toQuery()}function R(e,t){return new o.L("ALTER {} IDENTIFIER(?) RENAME TO IDENTIFIER(?)",(0,s.T)(e.type),(0,a.M)(e),(0,a.M)(t)).toQuery()}function C(e,t,n){return new o.L("ALTER {} IDENTIFIER(?) MOVE TO SCHEMA IDENTIFIER(?) GRANT OWNERSHIP TO ROLE IDENTIFIER(?)",(0,s.T)(e.type),(0,a.M)(e),(0,a.M)(t),(0,u.i)(n)).toQuery()}},100467:function(e,t,n){n.d(t,{Y:()=>o});var r,o=((r={}).terse="terse",r.show="show",r.describe="describe",r.grants="grants",r.grants_to="grants_to",r.grants_of="grants_of",r.grantable_privileges="grantable_privileges",r.future_grants="future_grants",r.visible_grants="visible_grants",r.replication_information="replication_information",r.get_ddl="get_ddl",r.bootstrap="bootstrap",r.organization_account_info="organization_account_info",r.external_table="external_table",r.query_result="query_result",r.query_history="query_history",r.query_plan="query_plan",r.user_name="user_name",r.preview="preview",r.inbound_shares="inbound_shares",r.outbound_shares="outbound_shares",r.outbound_share_details="outbound_share_details",r.share_properties="share_properties",r.provider_data_dictionary_shared_object_list="provider_data_dictionary_shared_object_list",r.pwd_change_info="pwd_change_info",r.edition="edition",r.available_databases="available_databases",r.replication="replication",r.available_roles="available_roles",r.mfa="mfa",r.mfa_optin="mfa_optin",r.authorized_actions="authorized_actions",r.metrics="metrics",r.utilization="utilization",r.cluster_utilization="cluster_utilization",r.org_contract_balance="org_contract_balance",r.anaconda_terms="anaconda_terms",r.gov_marketplace_terms="gov_marketplace_terms",r.is_marketplace_terms_accepted="is_marketplace_terms_accepted",r.marketplace_terms="marketplace_terms",r.columns="columns",r.tag_references="tag_references",r.tag_references_internal="tag_references_internal",r.related_listings="related_listings",r.tag_references_all_columns="tag_references_all_columns",r.policy_references="policy_references",r.list_entities_bottomup_check="list_entities_bottomup_check",r.entity_detail="entity_detail",r.by_name_reference="by_name_reference",r.authorized_operations="authorized_operations",r.popularity_scores="popularity_scores",r.listing_popularity_scores="listing_popularity_scores",r.provider_popularity_scores="provider_popularity_scores",r.category_popularity_scores="category_popularity_scores",r.listing_category_mapping="listing_category_mapping",r.database_refresh_history="database_refresh_history",r.imported_databases="imported_databases",r.listing_database_replication_schedules="listing_database_replication_schedules",r.listings_all_private_exchanges="listing_all_private_exchanges",r.private_listings_all_public_exchanges="private_listings_all_public_exchanges",r.listing_target_accounts="listing_target_accounts",r.listing_data_dictionary_provider_featured_objects="listing_data_dictionary_provider_featured_objects",r.available_regions="available_regions",r.listing_data_dictionary_consumer_shared_object_list="listing_data_dictionary_consumer_shared_object_list",r.listing_data_dictionary_consumer_featured_objects="listing_data_dictionary_consumer_featured_objects",r.is_database_imported="is_database_imported",r.mcd_properties="mcd_properties",r.listing_replication_schedules="listing_replication_schedules",r.listing_fulfillment_status="listing_fulfillment_status",r.share_validation_for_fulfillment="share_validation_for_fulfillment",r.compatibility_checker_for_fulfillment="compatibility_checker_for_fulfillment",r.terms_acknowledged="terms_acknowledged",r.listing_data_dictionary_consumer_object_details="listing_data_dictionary_consumer_object_details",r.exchange_regions="exchange_regions",r.spending_limit="spending_limit",r.spending_history="spending_history",r.notification_integration="notification_integration",r.notification_email="notification_email",r.show_budgets_in_account="show_budgets_in_account",r.show_budget_details_in_account="show_budget_details_in_account",r.resource_usage="resource_usage",r.get_attached_resources="get_attached_resources",r.activation_date="activation_date",r.get_config="get_config",r.password_policy="password_policy",r.application_instances="application_instances",r.application_metadata="application_metadata",r.owned_objects="owned_objects",r.privileges="privileges",r.references="references",r.versions="versions",r.associated_listings="associated_listings",r.release_directives="release_directives",r.version_manifest="version_manifest",r.application_package_file="application_package_file",r.application_package_validation_for_fulfillment="application_package_validation_for_fulfillment",r.dcr_versions_info="dcr_versions_info",r.application_package_size="application_package_size",r.application_package_available_regions="application_package_available_regions",r.show_in_account="show_in_account",r.eligible_objects_for_file_based_entity="eligible_objects_for_file_based_entity",r.contact_references_on_object="contact_references_on_object",r)},502845:function(e,t,n){n.d(t,{p:()=>o});var r,o=((r={}).unloaded="unloaded",r.loading="loading",r.loaded="loaded",r.refreshing="refreshing",r.error="error",r)},185181:function(e,t,n){n.d(t,{Q:()=>o});var r,o=((r={}).EDIT_APP_PACKAGE="EDIT_APP_PACKAGE",r.RENAME_APP_PACKAGE="RENAME_APP_PACKAGE",r.ADD_VERSION="ADD_VERSION",r.ADD_PATCH_TO_VERSION="ADD_PATCH_TO_VERSION",r.DROP_VERSION="DROP_VERSION",r.SET_RELEASE_DIRECTIVE="SET_RELEASE_DIRECTIVE",r.SET_DEFAULT_RELEASE_DIRECTIVE="SET_DEFAULT_RELEASE_DIRECTIVE",r.UNSET_RELEASE_DIRECTIVE="UNSET_RELEASE_DIRECTIVE",r.MODIFY_RELEASE_DIRECTIVE="MODIFY_RELEASE_DIRECTIVE",r.REGISTER_VERSION="REGISTER_VERSION",r.DEREGISTER_VERSION="DEREGISTER_VERSION",r)},443423:function(e,t,n){n.d(t,{X:()=>o});var r,o=((r={}).list="list",r.byid="byid",r.forwardId="forwardid",r)},445070:function(e,t,n){n.d(t,{d:()=>o});var r,o=((r={}).EDIT="EDIT",r.PUBLISH="PUBLISH",r.UNPUBLISH="UNPUBLISH",r)},555013:function(e,t,n){n.d(t,{j:()=>o});var r=n(443423);function o(e){return(null==e?void 0:e.resultType)===r.X.byid}},432541:function(e,t,n){n.d(t,{D:()=>o});var r=n(502845);function o(e){return(null==e?void 0:e.loadState)===r.p.error&&void 0==e.result&&void 0==e.resultType}},205166:function(e,t,n){n.d(t,{g:()=>o});var r=n(443423);function o(e){return(null==e?void 0:e.resultType)===r.X.list}},740238:function(e,t,n){n.d(t,{M:()=>o});var r=n(502845);function o(e){return(null==e?void 0:e.loadState)===r.p.loading}},548484:function(e,t,n){n.d(t,{O:()=>r});function r(e){return!!(null==e?void 0:e.isRefreshing)}},50820:function(e,t,n){n.d(t,{l:()=>o});var r,o=((r={}).ADD="ADD",r.REMOVE="REMOVE",r.CLEAR="CLEAR",r)},854544:function(e,t,n){n.d(t,{Aw:()=>s,KP:()=>a,gV:()=>l,oI:()=>i});var r=n(499924),o=n(795954);let i=(0,r.createContext)(o.IL),a=()=>(0,r.useContext)(i),l=()=>{let{featureFlags:e}=a().services;return e},s=e=>l().isEnabled(e)},844130:function(e,t,n){n.d(t,{i:()=>a});var r=n(561843),o=n(427961),i=n(360061);function a(e,t,n){let a,l=0,s=0,c=0,u=1,{maxRetries:d=20,exponent:f=1.5,interval:E=1,constantRetryTimeInSec:p,maxBackOffIntervalInSec:y=45,shouldPauseOnInactive:b=!0,enableBackOffOnPollingFailures:O=!1,maxPollingFailuresBeforeBackOff:g=5,enforceMaxRetryOnConsecutivePollFailures:v=!1}=n||{},S=null==n?void 0:n.customBackOffTimer,m=e,h=i.G.IDLE,_={[i.z.STOP]:[]},I=()=>{if("hidden"===document.visibilityState&&h===i.G.RETRYING){P(i.z.PAUSE);return}if("visible"===document.visibilityState&&h===i.G.PAUSED){P(i.z.RESTART);return}},T=()=>{b&&document.removeEventListener("visibilitychange",I,!1)},R=0,C=()=>{clearTimeout(l),u=1,l=0,s=0,R=0,a=void 0},A=()=>{let e=u>d&&!p||R>d&&v;_[i.z.STOP].forEach(t=>t(e,a))},N=e=>{let t=e;if(S){let t=Math.max(c,S(e,u,R,n));return c=0,t}!p||p&&R>=g?(t+=Number(Math.pow(E*f,O?R:u).toFixed(2)),t=Math.min(t,y)):t=p;let o=c>t?c:t;return c>0&&r.cM.info(`Retriable backoff set: ${o} ${new Date}`),c=0,o},w=async()=>{if(h===i.G.RETRYING){if((null==t?void 0:t.isUserIdle())&&b){r.cM.info("Retriable User idle. Skipping retry"),s||(s=N(s)),l=window.setTimeout(w,1e3*s);return}if(u>d&&!p)return r.cM.info("Retriable Max retries reached. Stopping retries"),k(i.G.IDLE);try{await m(),R=0,a=void 0}catch(e){r.cM.error(Error(`Retriable Async function execution failed with: ${e}`)),e instanceof o.M&&(c=e.retryAfterMs/1e3,r.cM.info(`Retriable Have Http429, setting "minBackoffTimeFrom429" to ${c} ${new Date}`)),R+=1,a=e}if(v&&R>d)return r.cM.info("Retriable Max retries reached. Stopping retries"),k(i.G.IDLE);h===i.G.RETRYING&&(u+=1,s=N(s),l=window.setTimeout(w,1e3*s))}},L={[i.G.IDLE]:{[i.G.RETRYING]:{action:[w,()=>{b&&document.addEventListener("visibilitychange",I,!1)}]}},[i.G.PAUSED]:{[i.G.IDLE]:{action:[A,C,T]},[i.G.RETRYING]:{action:w}},[i.G.RETRYING]:{[i.G.IDLE]:{action:[A,C,T]},[i.G.PAUSED]:{action:()=>clearTimeout(l)}}},k=e=>{if(L[h][e]){let t=L[h][e];h=e,t&&("function"==typeof t.action&&t.action(),Array.isArray(t.action)&&t.action.map(e=>e()))}},P=(e,t)=>{switch(e){case i.z.RESTART:k(i.G.IDLE),k(i.G.RETRYING);break;case i.z.STOP:k(i.G.IDLE);break;case i.z.START:k(i.G.RETRYING);break;case i.z.PAUSE:k(i.G.PAUSED);break;case i.z.RESET:{let e=h;k(i.G.IDLE);let{asyncFunction:n,retriableOptions:r}=t||{};n&&(m=n),r&&(d=r.maxRetries||d,f=r.exponent||f,E=r.interval||E,p=r.constantRetryTimeInSec||p,y=r.maxBackOffIntervalInSec||y,b=r.shouldPauseOnInactive||b,O=r.enableBackOffOnPollingFailures||O,g=r.maxPollingFailuresBeforeBackOff||g,v=r.enforceMaxRetryOnConsecutivePollFailures||v),k(e)}break;default:throw`Unrecognized event: ${e}`}};return{start:()=>P(i.z.START),stop:()=>P(i.z.STOP),restart:()=>P(i.z.RESTART),reset:e=>P(i.z.RESET,e),currentState:()=>h,onStop:e=>(_[i.z.STOP].includes(e)||_[i.z.STOP].push(e),()=>{let t=_[i.z.STOP].indexOf(e);-1!==t&&_[i.z.STOP].splice(t,1)})}}},360061:function(e,t,n){n.d(t,{G:()=>a,z:()=>i});var r,o,i=((r={}).START="START",r.STOP="STOP",r.RESTART="RESTART",r.RESET="RESET",r.PAUSE="PAUSE",r),a=((o={}).IDLE="IDLE",o.RETRYING="RETRYING",o.PAUSED="PAUSED",o)},286478:function(e,t,n){n.d(t,{i:()=>r.i});var r=n(844130)},334239:function(e,t,n){n.d(t,{IG:()=>E,cf:()=>f,cs:()=>y});var r,o=n(184168),i=n(152412),a=n(334394),l=n(333677),s=n(904796),c=n(101114),u=n(777159),d=n(499924),f=((r={}).WEB_SOCKET_LOGGING="WEB_SOCKET_LOGGING",r.NOTEBOOK_EDIT_LOCK_CHECK="NOTEBOOK_EDIT_LOCK_CHECK",r.NOTEBOOK_EDIT_STATUS_SHORT_POLL="NOTEBOOK_EDIT_STATUS_SHORT_POLL",r);function E(e){return"true"===localStorage.getItem(p(e))}function p(e){return`debug:${e}`}function y({onHide:e}){let t=(0,d.useRef)(null),[n,r]=(0,i._)(p("WEB_SOCKET_LOGGING"),!1),[f,E]=(0,i._)(p("NOTEBOOK_EDIT_LOCK_CHECK"),!1),[y,b]=(0,i._)(p("NOTEBOOK_EDIT_STATUS_SHORT_POLL"),!1);return(0,o.jsxs)(a.Vq,{manuallyShown:!0,causalElement:t,onHide:e,children:[(0,o.jsx)(a.fK,{children:"Debug menu"}),(0,o.jsxs)(a.a7,{children:[(0,o.jsxs)(l.X,{align:"justify",children:[(0,o.jsx)(s._,{htmlFor:"log-web-socket-setting",children:"Log web socket messages"}),(0,o.jsx)(c.r,{id:"log-web-socket-setting",checked:n,onChange:()=>r(!n),value:"1"})]}),(0,o.jsxs)(l.X,{align:"justify",marginTop:12,children:[(0,o.jsx)(s._,{htmlFor:"log-notebook-edit-lock-check",children:"Log notebook concurrent edit check"}),(0,o.jsx)(c.r,{id:"log-notebook-edit-lock-check",checked:f,onChange:()=>E(!f),value:"1"})]}),(0,o.jsxs)(l.X,{align:"justify",verticalAlign:"middle",marginTop:12,children:[(0,o.jsx)(s._,{htmlFor:"log-notebook-edit-lock-poll",children:"Use short poll frequency for notebook edit status (10s)"}),(0,o.jsx)(c.r,{id:"log-notebook-edit-lock-poll",checked:y,onChange:()=>b(!y),value:"1"})]})]}),(0,o.jsx)(a.cN,{children:(0,o.jsx)(u.zx,{use:"primary",onClick:e,children:"Close"})})]})}y.displayName="DebugMenuDialog"},81967:function(e,t,n){n.d(t,{c:()=>r});function r(e){return`${e.format("YYYY-MM-DD")}T00:00:00Z`}},6407:function(e,t,n){n.d(t,{f:()=>i});var r=n(807237),o=n(782761);let i=(e,t)=>(0,r.d)(e)?"month":(0,o.e)(e)||t?"day":"hour"},121280:function(e,t,n){n.d(t,{A:()=>r});function r(e){let t=e.endDate.clone().add(1,e.unitOfTime);return{lowerBound:e.startDate.clone(),upperBound:t}}},807237:function(e,t,n){n.d(t,{d:()=>r});function r({startDate:e,endDate:t}){return t.diff(e,"months",!0)>6}},782761:function(e,t,n){function r({startDate:e,endDate:t}){return t.diff(e,"days")>7}function o({startDate:e,endDate:t}){return t.diff(e,"days")>0}n.d(t,{e:()=>r,f:()=>o})},502146:function(e,t,n){n.d(t,{l:()=>function e(t,n){return o()(t)?t.map(t=>e(t,n)):a()(t)?s()(u()(t,t=>e(t,n)),(e,t)=>n(t)):t}});var r=n(268598),o=n.n(r),i=n(303266),a=n.n(i),l=n(84676),s=n.n(l),c=n(297561),u=n.n(c)},245294:function(e,t,n){n.d(t,{h:()=>o});let r=["true","t","yes","y","on","1"],o=e=>r.includes(e.toLowerCase())},146356:function(e,t,n){n.d(t,{J:()=>i});var r=n(959191),o=n(118470);function i(e,t){let n=(0,r.v)(e);if(7!==n.length)throw Error(`Invalid identifier: '${e}'`);let i=n[1],a=n[3],l=n[5];return{type:t,database:(0,o.b)(i),schema:(0,o.b)(a),name:(0,o.b)(l)}}},130830:function(e,t,n){n.d(t,{m:()=>i});let r=/(\([^\(\)]+\))\s*RETURN/u,o=/(\(.+\))\s*/u;function i(e){if(!e)return"";let t=e.match(r),n=e.match(o);return t&&t.length>1?t[1]:n&&n.length>1?function(e){let t=e;if(!t)return"";let n=t.indexOf(" RETURN");if(-1===n&&(n=t.length),-1===(n=(t=t.slice(0,n)).lastIndexOf(")"))||-1===(n=t.lastIndexOf(")")))return"()";let r=n-1,o=1;for(;r>=0&&o>0;)")"===t[r]?o+=1:"("===t[r]&&(o-=1),r-=1;return 0!==o?"()":t.slice(r+1,n+1)||"()"}(e):"()"}},207001:function(e,t,n){n.d(t,{L:()=>o});var r=n(130830);function o(e){if(!e)return{name:"",args:""};let t=(0,r.m)(e),n=e.indexOf(t);return -1===n?{name:e,args:"()"}:{args:t,name:e.slice(0,n)}}},845:function(e,t,n){n.d(t,{$:()=>i});var r=n(830658),o=n(127061);function i(e){let{database:t,schema:n,name:i}=e;return[t,n,i].map(e=>(0,o.v)((0,r.H)(e))).join(".")}},959191:function(e,t,n){n.d(t,{v:()=>r});function r(e){return e.split(/((?:[^."]|"(?:[^"]|"")*")+)/u)}},400558:function(e,t,n){n.d(t,{Q:()=>l,e:()=>a});var r=n(636161),o=n(107181);let i=/[A-Za-z0-9$_]/u;class a{unquotedName(){let e="";for(;this.lexer.hasNext()&&i.test(this.lexer.peek());)e+=this.lexer.next();if(!(0,o.SD)(e))throw Error(`'${this.input}': Invalid unquoted identifier '${e}'`);return e.toUpperCase()}token(e){if(!this.lexer.hasNext())throw Error(`'${this.input}': Unexpected end of input. Expected '${e}'`);let t=this.lexer.next();if(t!==e)throw Error(`'${this.input}': Invalid character '${t}' after '${this.lexer.getReadSoFar()}'. Expected '${e}'`);return t}quotedName(){let e="";for(this.token('"');this.lexer.hasNext();){let t=this.lexer.next();if('"'===t){if('"'===this.lexer.peek())e+=this.lexer.next();else break}else e+=t}return e}maybeQuotedName(){return'"'===this.lexer.peek()?this.quotedName():this.unquotedName()}optionallyFullyQualifiedName(){let e=this.maybeQuotedName();if(this.lexer.hasNext()){this.token(".");let t=this.maybeQuotedName();return this.token("."),{database:e,schema:t,name:this.maybeQuotedName()}}return{name:e}}fullyQualifiedName(){let e=this.maybeQuotedName();this.token(".");let t=this.maybeQuotedName();return this.token("."),{database:e,schema:t,name:this.maybeQuotedName()}}constructor(e){this.input=e,this.lexer=new r.h(e)}}let l=(e,t)=>{let n=new a(e.trim());return t?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},t,n.optionallyFullyQualifiedName()):n.fullyQualifiedName()}},345970:function(e,t,n){n.d(t,{S:()=>r});function r(e){if(!!e!==e)throw Error("Didn't pass a boolean");return{bindingsJSONRepr:e,inlineRepr:String(e)}}},475387:function(e,t,n){n.d(t,{j:()=>r});function r(e){if(!/^[A-Za-z0-9_]+(\([0-9, ]+\))?$/u.test(e))throw Error(`String is not a valid datatype: ${e}`);return{inlineRepr:e}}},548513:function(e,t,n){n.d(t,{e:()=>r});function r(e){if(!e.match(/^[A-Za-z_][A-Za-z_0-9]*$/))throw Error(`String is not a valid keyword: ${e}`);return{inlineRepr:e}}},645333:function(e,t,n){n.d(t,{a:()=>r});function r(e){if(!e.match(/^[A-Za-z_][A-Za-z0-9_ ]*$/))throw Error(`String is not a valid set of keywords: ${e}`);return{inlineRepr:e}}},568655:function(e,t,n){n.d(t,{_:()=>r});function r(e){if(!Number.isFinite(e))throw Error("Didn't pass a finite number");return{bindingsJSONRepr:e,inlineRepr:String(e)}}},366212:function(e,t,n){n.d(t,{M:()=>r});function r(e){return{inlineRepr:e}}},895819:function(e,t,n){n.d(t,{Q:()=>o});var r=n(845);function o(e){let t=`'@${(0,r.$)(e)}'`;return{bindingsJSONRepr:t,inlineRepr:t}}},141017:function(e,t,n){n.d(t,{F:()=>i});var r=n(830658),o=n(845);function i(e,t){let n=`'@${(0,o.$)(e)}/${(0,r.H)(t)}'`;return{bindingsJSONRepr:n,inlineRepr:n}}},562808:function(e,t,n){n.d(t,{K:()=>o});var r=n(830658);function o(e){return{inlineRepr:e.map(e=>`'${(0,r.H)(e)}'`).join(",")}}},966727:function(e,t,n){n.d(t,{t:()=>o});var r=n(127061);let o=e=>{let t=(0,r.v)(e);return{bindingsJSONRepr:t,inlineRepr:t}}},179833:function(e,t,n){n.d(t,{Z:()=>o});var r=n(772598);function o(e,t){let n=r.$w(e,t);return{inlineRepr:`$$${n}$$`}}},160510:function(e,t,n){n.d(t,{RT:()=>l,Z2:()=>a,ZL:()=>i});var r,o=n(118470),i=((r={}).OnlyWhenFullySurrounding="onlyWhenFullySurrounding",r.WhenAtLeastOnOneSide="whenAtLeastOnOneSide",r);function a(e,t="onlyWhenFullySurrounding"){return e?l(e,t):e}function l(e,t="onlyWhenFullySurrounding"){let n=(0,o.b)(e);if(e!==n)return n;{let n;return n=e,"whenAtLeastOnOneSide"===t&&n?('"'===n.charAt(0)&&(n=n.substr(1,n.length-1)),'"'===n.charAt(n.length-1)&&(n=n.substr(0,n.length-1))):n&&'"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substr(1,n.length-2)),n}}},380890:function(e,t,n){n.d(t,{L:()=>l,y:()=>s});var r=n(337607),o=n(323441),i=n(895430),a=n(116868);function l(e){let{sqlQuery:t,description:n,fetchId:i,hideFromQueryHistory:l,cache:s,options:u}=e,{dataDiscoverRole:d,secondaryRoles:f,currentWarehouse:E}=(0,r.j)(),p=(null==u?void 0:u.role)||d,y=(null==u?void 0:u.secondaryRoles)||f,b=(null==u?void 0:u.warehouse)||E,{executeQuery:O}=(0,a.U)(p,y,b,s);return(0,o.Z)(e.skip?c:O,t,n,null!=i?i:"",l,u)}function s(e){var t,n;let r=(0,i.e)();return l((t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},e),n=n={cache:r},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t))}function c(){}},116868:function(e,t,n){n.d(t,{U:()=>u});var r=n(51723),o=n(975477),i=n.n(o),a=n(499924),l=n(637658),s=n(925819),c=n(896315);function u(e,t,n,o){var u;let d=a.useContext(c.L),f=(0,s.h)(null==d?void 0:null===(u=d.user)||void 0===u?void 0:u.api,"UserStore is not loaded"),E=a.useContext(r.TelemetryPerformanceContext);return(0,a.useMemo)(()=>({executeQuery:(r,a,s,c,u)=>{var d,p,y,b,O,g,v,S,m;return d=f,p=r,y=e,b=n,O=a,g=s,v=c,S=o,m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({profiler:E,secondaryRoles:t},u),(0,l.O)(S,{getCacheKey:()=>{var e;let t={sqlQuery:p,currentRole:y,currentWarehouse:b,description:O,fetchId:g,hideFromQueryHistory:v,secondaryRoles:null==m?void 0:m.secondaryRoles},n=null==m?void 0:null===(e=m.requestContext)||void 0===e?void 0:e.userKey;return n&&(t[n]=n),i()(t)},getData:async()=>{var e;let t=null==m?void 0:null===(e=m.profiler)||void 0===e?void 0:e.group(`executeSqlQuery:${O}`);null==t||t.addContext("role",y),null==t||t.addContext("warehouse",b),null==t||t.addContext("sqlText",p.sqlText),null==t||t.addContext("pid",null==m?void 0:m.pid);try{return null==t||t.start(),{tableData:await d.query(p,{isInternal:v,role:y,warehouse:b,desc:O,context:null==m?void 0:m.context,requestContext:null==m?void 0:m.requestContext,pid:null==m?void 0:m.pid,secondaryRoles:null==m?void 0:m.secondaryRoles}),timestamp:new Date(Date.now())}}finally{null==t||t.end()}}})}}),[f,o,E,e,t,n])}},822920:function(e,t,n){n.d(t,{O:()=>f,l:()=>E});var r=n(237257),o=n(975477),i=n.n(o),a=n(499924),l=n(637658),s=n(210038),c=n(550105),u=n(862821),d=n(811099);let[f,E]=(0,r.Z)(()=>(function(){let e=(0,s.b)(),t=(0,a.useCallback)(async(t,n,r,o=c.U.urc.requestContext())=>{var i;let a=await (0,l.O)(e,{getCacheKey:()=>{var e;return p(t,n,r,null!==(e=o.role)&&void 0!==e?e:"")},getData:async()=>await (0,u._)(t,n,r,o)});return e.clearEntry(p(t,n,r,null!==(i=o.role)&&void 0!==i?i:"")),a},[e]),n=(0,a.useCallback)(async(t,n,r,o,i=c.U.urc.requestContext())=>{let a=await (0,d.u)(t,n,r,o,i);if(a.success){var l;e.clearEntry(p(t,n,r,null!==(l=i.role)&&void 0!==l?l:""))}return a},[e]);return(0,a.useMemo)(()=>({read:t,write:n}),[t,n])})());function p(e,t,n,r){return i()({role:r,stage:e,path:t,fileName:n})}},51961:function(e,t,n){n.d(t,{J:()=>s,R:()=>c});var r=n(466646),o=n(895819),i=n(257690);function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}let l="/files/download";async function s(e,t,n,o){return(0,i.a)()?await function(e,t,n,o={}){let i={stage:e,filePath:t,role:n.role,secondaryRoles:n.secondaryRoles};return(0,r.nufetchForm)(l,n,{body:JSON.stringify(i),method:"POST",headers:a({"Content-Type":"application/json"},o)},"/v1")}(e,t,n,o):await function(e,t,n,o){let i=new FormData;return i.set("stage",e),i.set("relativePath",t),i.set("allowUnencryptedReadWrite","true"),n.secondaryRoles&&i.set("secondaryRoles",n.secondaryRoles),(0,r.nufetchForm)(l,n,a({method:"POST",body:i},o?{headers:o}:{}))}(e,t,n,o)}function c(e){return(0,o.Q)(e).inlineRepr}},257690:function(e,t,n){n.d(t,{a:()=>o,z:()=>i});var r=n(795954);function o(){return r.IL.services.featureFlags.isEnabled("UI_ENABLE_WAW_DEX_FEATURE_12")}function i(){return r.IL.services.featureFlags.isEnabled("UI_ENABLE_WAW_DEX_FEATURE_13")}},837178:function(e,t,n){n.d(t,{L:()=>o});var r=n(156839);function o(e,t){return(0,r.Vo)([e,t],!0)}},156839:function(e,t,n){function r(e){return e?e.startsWith("/")?e:`/${e}`:""}function o(e,t=!1){let n=e.map(e=>e?e.replace(/^\/|\/$/gu,""):"").filter(e=>""!==e).join("/");return t?`/${n}`:n}n.d(t,{Vo:()=>o,yx:()=>r})},862821:function(e,t,n){n.d(t,{J:()=>l,_:()=>a});var r=n(550105),o=n(51961),i=n(837178);async function a(e,t,n,l=r.U.urc.requestContext()){try{let r=await (0,o.J)(e,(0,i.L)(t,n),l,{Accept:"text/plain"});return{success:!0,content:r.textContent,error:null}}catch(e){if(e instanceof Error)return{success:!1,error:e,content:null};return{success:!1,error:Error("Unknown Error"),content:null}}}async function l(e){let{success:t,error:n,content:r}=await e;if(t)return r;throw n}},811099:function(e,t,n){n.d(t,{g:()=>l,u:()=>s});var r=n(466646),o=n(550105),i=n(257690),a=n(156839);async function l(e,t,n,s,c=o.U.urc.requestContext()){let u=new FormData;if(u.set("stage",e),u.set("path",(0,a.yx)(t)||"/"),c.secondaryRoles&&u.set("secondaryRoles",c.secondaryRoles),(0,i.z)()){u.set("fileName",n);let e=new URLSearchParams;u.forEach((t,n)=>{e.append(n,t.toString())});let t=`/files/upload?${e.toString()}`;await (0,r.nufetchForm)(t,c,{method:"POST",body:s,headers:{"Content-Type":"application/octet-stream",Accept:"text/plain"}},"/v1")}else u.set("file",new File([s],n)),await (0,r.nufetchForm)("/files/upload",c,{method:"POST",body:u})}async function s(e,t,n,r,i=o.U.urc.requestContext()){try{return await l(e,t,n,r,i),{success:!0,error:null}}catch(e){if(e instanceof Error)return{success:!1,error:e};return{success:!1,error:Error("Unknown Error")}}}},260999:function(e,t,n){n.d(t,{k:()=>i});var r=n(499924),o=n(896315);function i(e){let t=(0,o.m)(["user"]).user;return(0,r.useMemo)(()=>!!t&&t.userRequestContext(e),[t,e])}},430307:function(e,t,n){n.d(t,{Z:()=>s});var r=n(561843),o=n(485387),i=n.n(o),a=n(376147),l=n(886018);let s=new class{registerEventListeners(){document.addEventListener("mousemove",this.onGlobalMouseMoveDebounced),document.addEventListener("mousedown",this.onGlobalMouseDownDebounced),document.addEventListener("visibilitychange",this.onVisibilityChangeHandler)}unregisterEventListeners(){document.removeEventListener("mousemove",this.onGlobalMouseMoveDebounced),document.removeEventListener("mousedown",this.onGlobalMouseDownDebounced),document.removeEventListener("visibilitychange",this.onVisibilityChangeHandler),this.stopUserSessionValidityCheck()}constructor(e={}){this.registerUserActivityListener=e=>{this.onUserActivityListeners.push(e),this.validityCheckTimer||this.registerEventListeners()},this.unregisterUserActivityListener=e=>{this.onUserActivityListeners=this.onUserActivityListeners.filter(t=>t!==e),this.onUserActivityListeners.length||this.unregisterEventListeners()},this.onVisibilityChangeHandler=()=>{"hidden"===document.visibilityState&&(r.cM.info("Tracker: Turning off timers"),this.stopUserSessionValidityCheck()),"visible"===document.visibilityState&&(r.cM.info("Tracker: Turning on timers"),this.startUserSessionValidityCheck())},this.isUserIdle=()=>(this.lastView?i()().diff(this.lastView):6e4)>6e4,this.checkForSessionValidity=async()=>{let e=this.lastView?i()().diff(this.lastView):6e4,t=window.location.pathname;if("/"==t&&(t=""),e>6e4){r.cM.info("Tracker: Check","Checking session with bootstrap activity");try{await l.U.checkUserSession()}catch(e){r.cM.error(e,{message:"User session check failed."});return}}this.validityCheckTimer=window.setTimeout(this.checkForSessionValidity,6e4)},this.startUserSessionValidityCheck=()=>{!this.validityCheckTimer&&this.checkForSessionValidity()},this.stopUserSessionValidityCheck=()=>{this.validityCheckTimer&&clearTimeout(this.validityCheckTimer),this.validityCheckTimer=null},this.view=async()=>{this.lastView=i()(),this.onUserActivityListeners&&this.onUserActivityListeners.map(e=>e(this.lastView))},this.onGlobalMouseMove=()=>{this.view()},this.onGlobalMouseDown=()=>{this.view()},this.lastView=i()(),this.onUserActivityListeners=e.onViewListeners||[],this.onGlobalMouseMoveDebounced=(0,a.D)(this.onGlobalMouseMove,100),this.onGlobalMouseDownDebounced=(0,a.D)(this.onGlobalMouseDown,100),this.registerEventListeners()}}},666628:function(e,t,n){n.d(t,{fc:()=>s,xK:()=>c,zp:()=>l});var r=n(206763),o=n(499924),i=n(286478),a=n(430307);function l(e,t={}){let{pollingIntervalInSec:n=10,maxBackOffIntervalInSec:r=45,shouldPauseOnInactive:o,enableBackOffOnPollingFailures:s,maxPollingFailuresBeforeBackOff:c}=t;return(0,i.i)(e,a.Z,{maxRetries:1/0,constantRetryTimeInSec:n,maxBackOffIntervalInSec:r,shouldPauseOnInactive:o,enableBackOffOnPollingFailures:s,maxPollingFailuresBeforeBackOff:c})}function s(e,t={}){let[n]=o.useState(l(e,t)),i=(0,r.N)(t);return o.useEffect(()=>{let{pollingIntervalInSec:t=10,maxBackOffIntervalInSec:r=45,shouldPauseOnInactive:o,enableBackOffOnPollingFailures:a,maxPollingFailuresBeforeBackOff:l}=i;n.reset({asyncFunction:e,retriableOptions:{constantRetryTimeInSec:t,maxBackOffIntervalInSec:r,shouldPauseOnInactive:o,enableBackOffOnPollingFailures:a,maxPollingFailuresBeforeBackOff:l}})},[e,i]),o.useEffect(()=>()=>{n.stop()},[n]),n}function c(e,t){let{maxRetries:n,shouldPauseOnInactive:r,enforceMaxRetryOnConsecutivePollFailures:o}=t;return(0,i.i)(e,a.Z,{maxRetries:n,shouldPauseOnInactive:r,enforceMaxRetryOnConsecutivePollFailures:o})}},896315:function(e,t,n){n.d(t,{L:()=>l,m:()=>c});var r=n(206763),o=n(906743),i=n(499924),a=n(933377);let l=i.createContext(void 0),s=()=>{};function c(e,t=s,n=a.I){var u,d;let f=i.useContext(l),E=(0,r.N)(e.reduce((e,t)=>(e[t]=f[t],e),{})),p=(0,r.N)(Object.keys(E).map(e=>E[e])),y=(0,r.N)((u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},E),d=d={untracked:f},Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(d)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(d)).forEach(function(e){Object.defineProperty(u,e,Object.getOwnPropertyDescriptor(d,e))}),u)),b=i.useCallback((e,n)=>{t(e,y,n)},[t,y]),O=(0,o.N)(),g=i.useCallback((e,t)=>{n(e,t)&&O()},[O,n]);return i.useEffect(()=>(p.forEach(e=>{e.__subscribe(b,g)}),()=>p.forEach(e=>{e.__unsubscribe(b,g)})),[p,b,g]),y}},866777:function(e,t,n){n.d(t,{d:()=>a});var r=n(499924),o=n(792529),i=n(896315);let a=()=>{let{user:e}=(0,i.m)(["user"]);return(0,r.useCallback)(()=>!!e.isUiSpecifiedSnowflakeFeatureEnabled("UI_ENABLE_IS_PRIVATELINK_OVERRIDE_FOR_INTERNAL_TEST")||(0,o.r)(window.location.hostname),[e])}},727347:function(e,t,n){n.d(t,{T:()=>l});var r=n(96012),o=n(888541),i=n(841242),a=n(647722);let l=({error:e,isUserError:t})=>{let n,l,s;return e instanceof Error?n=e.message:e instanceof a.Z?n=e.payload:"string"==typeof e?n=e:null!=e&&(n="unknown error"),e instanceof r.M?(l=e.logDetailMessage,s=e.externalErrorCause.code):e instanceof i.P?s=e.errorCode:e instanceof a.Z&&(s=e.topic.toString()),{error:n,isUserError:t||(0,o.e)(e),errorDetail:l,errorCode:s}}},134032:function(e,t,n){n.d(t,{aR:()=>l,ho:()=>a,ur:()=>i});let r="streamlit-",o=["embed","embed_options","__parentOrigin","__clientVersion"];function i(e){let t=new URLSearchParams;for(let[n,r]of e)!o.includes(n)&&n.length>0&&t.append(n,r);return t}function a({snowsightQueryParams:e,iframeQueryParams:t}){let n=new URLSearchParams;for(let[t,o]of e)t.startsWith(r)||n.append(t,o);for(let[e,o]of i(t))n.append(`${r}${e}`,o);return n}function l(e){let t=new URLSearchParams;for(let[n,o]of e)if(n.startsWith(r)){let e=n.replace(r,"");e.length>0&&t.append(e,o)}return i(t)}},540313:function(e,t,n){n.d(t,{Du:()=>l,FF:()=>O,Sz:()=>E,VP:()=>f,YT:()=>c,fY:()=>s,fe:()=>u,hk:()=>b,mR:()=>y,s9:()=>p,zL:()=>d});var r=n(491742),o=n(26194),i=n(345970),a=n(325463);function l({fullStreamlitIdentifier:e,isPrivatelink:t}){let n=new r.L().add("CALL SYSTEM$GENERATE_STREAMLIT_URL_FROM_NAME({}",(0,a.i)((0,o.m)(e)));return n.add(", {}",(0,i.S)(t)),n.add(");"),n.toQuery()}function s(e){return new r.L().add("CALL SYSTEM$GENERATE_STREAMLIT_TOKEN({});",(0,a.i)((0,o.m)(e))).toQuery()}function c(e){return new r.L().add("CALL SYSTEM$GET_STREAMLIT_API_TOKEN({});",(0,a.i)((0,o.m)(e))).toQuery()}function u(e){return new r.L().add("CALL SYSTEM$STREAMLIT_RELOAD({});",(0,a.i)((0,o.m)(e))).toQuery()}function d(e,t){return new r.L().add("CALL SYSTEM$ASSOCIATE_STAGE_WITH_STREAMLIT({}, {});",(0,a.i)((0,o.m)(e)),(0,a.i)((0,o.m)(t))).toQuery()}function f(e){return new r.L().add("CALL SYSTEM$STREAMLIT_RERUN({});",(0,a.i)((0,o.m)(e))).toQuery()}function E(e,t,n={}){return new r.L().add("CALL SYSTEM$LOG_STREAMLIT_TELEMETRY({},{},{});",(0,a.i)(null===e?"":(0,o.m)(e)),(0,a.i)(t),(0,a.i)(JSON.stringify(n))).toQuery()}function p(e,t){return new r.L().add("CALL SYSTEM$LOG_STREAMLIT_TELEMETRY_BATCH({},{});",(0,a.i)(null===e?"":(0,o.m)(e)),(0,a.i)(JSON.stringify(t))).toQuery()}function y({fullStreamlitIdentifier:e,appViewRequestId:t,isPrivatelink:n,historyQueryId:l}){let s=new r.L().add("CALL SYSTEM$STREAMLIT_BOOTSTRAP({}",(0,a.i)((0,o.m)(e))),c=(0,a.i)(null!=t?t:""),u=[{param:c,couldIgnore:!t},{param:(0,i.S)(n),couldIgnore:!1},{param:(0,a.i)(null!=l?l:""),couldIgnore:!l}];return u.slice(0,u.findLastIndex(e=>!e.couldIgnore)+1).forEach(e=>s.add(", {}",e.param)),s.add(");"),s.toQuery()}function b(e){return new r.L().add("CALL SYSTEM$STREAMLIT_BOOTSTRAP_STARTUP_STATUS({});",(0,a.i)((0,o.m)(e))).toQuery()}function O({srcStreamlitIdentifier:e,newStreamlitName:t,newStreamlitTitle:n}){return new r.L().add("CALL SYSTEM$DUPLICATE_STREAMLIT_WITHOUT_EMBEDDED_STAGE({}, {}, {});",(0,a.i)((0,o.m)(e)),(0,a.i)(t),(0,a.i)(n)).toQuery()}},700010:function(e,t,n){n.d(t,{$g:()=>S,AU:()=>L,C1:()=>P,EX:()=>x,F2:()=>g,I1:()=>F,JI:()=>k,Jd:()=>s,MI:()=>m,Wh:()=>M,YL:()=>c,Yb:()=>B,ZR:()=>j,_t:()=>h,_y:()=>w,b2:()=>N,bH:()=>b,c:()=>f,cQ:()=>_,dR:()=>O,ff:()=>v,gN:()=>I,gf:()=>A,kL:()=>C,lO:()=>D,nQ:()=>u,p0:()=>l,qE:()=>E,qK:()=>G,rc:()=>U,sB:()=>R,tS:()=>p,tt:()=>y,wd:()=>T,x3:()=>d});var r=n(337607),o=n(854544),i=n(896315);function a(e){let{userStore:t}=(0,r.j)();return null==t?void 0:t.isUiSpecifiedSnowflakeFeatureEnabled(e)}function l(){return a("UI_ENABLE_STREAMLIT_HIDE_PREVIEW_PILL")}function s(){return a("FEATURE_UI_ENABLE_STREAMLIT_CONFIG_TOML")}function c(){return a("UI_ENABLE_STREAMLIT_QUERY_PARAMS")}function u(){return a("UI_ENABLE_STREAMLIT_SUB_PAGE_LINKS")}function d(){return a("UI_ENABLE_STREAMLIT_EMBEDDED_STAGES")}function f(){return(0,i.m)([]).untracked.user.isSnowflakeFeatureEnabled("ENABLE_STREAMLIT_VERSIONED_STAGE")}function E(){return a("UI_ENABLE_STREAMLIT_WITH_SNOWSIGHT_THEME")}function p(){return a("UI_ENABLE_STREAMLIT_NEW_MENU_BUTTON")}function y(){return a("UI_ENABLE_STREAMLIT_SEND_THEME_POST_MESSAGE_ON_SCRIPT_STATE_CHANGED")}function b(){return a("FEATURE_UI_ENABLE_STREAMLIT_SCHEDULING")}function O(){return a("FEATURE_UI_ENABLE_STREAMLIT_CONFIGURABLE_SNOWPARK_VERSION")}function g(){return a("UI_ENABLE_STREAMLIT_THEMING")}function v(){return a("UI_ENABLE_STREAMLIT_SLEEP_TIMER_DEBUG_LOGGING_FOR_TESTING")}function S(){return a("UI_ENABLE_STREAMLIT_DEBUG_FATAL_EXCEPTION_OVERRIDE_FOR_TESTING")}function m(){return a("UI_ENABLE_STREAMLIT_ON_SPCS")}function h(){return a("UI_ENABLE_STREAMLIT_PREAMBLE_CSP_VIOLATION_DETECTION")}function _(){return a("UI_ENABLE_STREAMLIT_PREAMBLE_SERVICE_WORKER")}function I(){return a("UI_ENABLE_STREAMLIT_BATCH_TELEMETRY_ENDPOINT")}function T(){return a("UI_ENABLE_STREAMLIT_PIPE_TELEMETRY_TO_BATCH_ENDPOINT")}function R(){return function(e){let{userStore:t}=(0,r.j)();return null==t?void 0:t.uiSpecifiedSnowflakeFeatureNumber(e)}("STREAMLIT_BATCH_TELEMETRY_QUEUE_THROTTLE_IN_MS")}function C(){return a("UI_ENABLE_STREAMLIT_INDIVIDUAL_LOAD_METRICS")}function A(){return(0,i.m)([]).untracked.user.isSnowflakeFeatureEnabled("ENABLE_STREAMLIT_SERVICE_WORKER")}function N(){return(0,i.m)([]).untracked.user.isSnowflakeFeatureEnabled("ENABLE_STREAMLIT_ALLOW_FILE_UPLOADER")}function w(){return a("UI_ENABLE_STREAMLIT_LOAD_SEQUENCE_IN_SNOWSIGHT")}function L(){return a("UI_ENABLE_STREAMLIT_DISPLAY_SPCS_DETAILED_LOAD_SEQUENCE")}function k(){return a("UI_ENABLE_STREAMLIT_RESTRICTED_CALLERS_RIGHTS")}function P(){return a("UI_ENABLE_STREAMLIT_INITIAL_RETRY_SKIP")}function D(){return a("UI_ENABLE_STREAMLIT_CONSUME_SLEEP_TIMER_DURATION_FROM_BOOTSTRAP")}function M(e){return e.isUiSpecifiedSnowflakeFeatureEnabled("FEATURE_COPILOT_STREAMLIT")}function j(){return a("UI_ENABLE_MLPF_FEATURE_16")}function U(){return a("UI_ENABLE_STREAMLIT_FEATURE_2")}function x(){return a("UI_ENABLE_STREAMLIT_APP_STATE_MACHINE")}function F(){return(0,o.gV)().getBooleanValue("_DP_UI_ENABLE_STREAMLIT_LOG_TELEMETRY_TO_DATADOG_RUM")}function G(){return(0,o.gV)().getBooleanValue("_DP_UI_ENABLE_STREAMLIT_LIST_VIEW_RUNTIME_STATUS_COLUMN")}function B(){return(0,o.gV)().getBooleanValue("_DP_UI_ENABLE_STREAMLIT_ENHANCED_APP_LIFECYCLE_TELEMETRY")}},611541:function(e,t,n){n.d(t,{H:()=>s,h:()=>l});var r=n(499924),o=n(582049),i=n(146356);let a=r.createContext(""),l=a.Provider,s=e=>{let t=(0,r.useContext)(a),n=e||t;return{entityId:(0,r.useMemo)(()=>(0,i.J)(n,o.M.STREAMLIT),[n]),entityIdStr:n}}},845637:function(e,t,n){n.d(t,{A:()=>o});var r=n(705845);function o(e){let t=(0,r.f)({iframeUrl:e,page:void 0});return t?new URL(t).origin:void 0}},705845:function(e,t,n){n.d(t,{f:()=>d});var r=n(768820),o=n(499924),i=n(80583),a=n(925819),l=n(536365),s=n(843591),c=n(134032),u=n(700010);function d({iframeUrl:e,page:t,rawParams:n=(0,s.s)()}){let{theme:d}=(0,r.Z)(),f=(0,u.YL)(),E=(0,u.nQ)(),p=(0,u.F2)();return(0,o.useMemo)(()=>{let r;if(!e)return;(0,a.N)(""===new URL(e).search,"Base URL must not contain search parameters"),(r=E?new URL(null!=t?t:"",e.endsWith("/")?e:`${e}/`):new URL(e)).searchParams.set("embed","true"),r.searchParams.append("embed_options","show_padding"),p&&("dark"===d&&r.searchParams.append("embed_options","dark_theme"),"light"===d&&r.searchParams.append("embed_options","light_theme")),r.searchParams.set("__parentOrigin",window.location.origin),r.searchParams.set("__clientVersion",encodeURIComponent(i.X.clientVersion||""));let o=(0,c.ur)(r.searchParams);if((0,a.N)((0,l.r)(o),`Unknown query parameter(s) [${o.toString()}] set on Streamlit iFrame URL.`),f)for(let[e,t]of(0,c.aR)(n))r.searchParams.append(e,t);return r.toString()},[e,t,p,f,E,d,n])}},109621:function(e,t,n){n.d(t,{I:()=>o});var r,o=((r={}).loading="loading",r.loaded="loaded",r.suspended="suspended",r)},841242:function(e,t,n){n.d(t,{P:()=>r});class r extends Error{}},647722:function(e,t,n){n.d(t,{Z:()=>r});class r extends Error{constructor({topic:e,level:t,payload:n}){super(n),this.topic=e,this.level=t,this.payload=n}}},359135:function(e,t,n){n.d(t,{GK:()=>s,hb:()=>r,mM:()=>c,sd:()=>l});let r=1;var o,i,a,l=((o={}).CacheStarted="cache started",o.InteractiveStarted="Interactive message stream started",o.NativeAppPermissions="NA_PERMISSIONS",o),s=((i={}).InitializationState="INITIALIZATION_STATE",i.LifecycleMessage="LIFECYCLE_MESSAGE",i.Error="ERROR",i),c=((a={}).NOT_RUNNING="notRunning",a.RUNNING="running",a.RERUN_REQUESTED="rerunRequested",a.STOP_REQUESTED="stopRequested",a.COMPILATION_ERROR="compilationError",a)},763063:function(e,t,n){n.d(t,{e:()=>r});let r={CONNECTED:"CONNECTED",DISCONNECTED_FOREVER:"DISCONNECTED_FOREVER",INITIAL:"INITIAL",PINGING_SERVER:"PINGING_SERVER",CONNECTING:"CONNECTING"}},434841:function(e,t,n){function r(e,t){let n=e,r=null;for(;n;){let e=n;if(e.getAttribute&&(r=e.getAttribute(t)))return r;n=n.parentNode}return null}function o(e,t){return r(e,"data-"+t)}function i(e,t){for(;e;){if(t(e))return!0;e=e.parentNode}return!1}function a(){}function l(e){e.preventDefault(),e.stopPropagation()}function s(e){return e.stopPropagation()}function c(e){e.dataTransfer.setData("text/plain",""),d(e)}function u(e){e.preventDefault(),e.dataTransfer.dropEffect="move"}function d(e){if(e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage){let t=document.createElement("img");t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e.dataTransfer.setDragImage(t,0,0)}}function f(e){for(;e;){if(e.getAttribute&&e.getAttribute("data-is-popover"))return e;e=e.parentNode}}function E(e,t){let n=f(e),r=f(t);return n&&r&&n===r}n.d(t,{DY:()=>i,EI:()=>a,Jf:()=>d,Ob:()=>E,QO:()=>u,UW:()=>s,aC:()=>r,nm:()=>c,qf:()=>l,um:()=>o})},707924:function(e,t,n){n.d(t,{m:()=>i});var r=n(76351),o=n(582049);function i(e,t){switch(e){case o.M.ACCOUNT:return t({id:"Account"});case o.M.ACCOUNT_EMAIL:return t({id:"Account Email"});case o.M.ALERT:return t({id:"Alert"});case o.M.API_INTEGRATION:return t({id:"API Integration"});case o.M.APPLICATION:return t({id:"Application"});case o.M.APPLICATION_PACKAGE:return t({id:"Application Package"});case o.M.APPLICATION_ROLE:return t({id:"Application Role"});case o.M.DATABASE:return t({id:"Database"});case r.DatabaseObjectTypeFE.IMPORTED_DATABASE:return t({id:"Shared Database"});case o.M.DATABASE_OBJECTS:return t({id:"Database Objects"});case o.M.DATABASE_ROLE:return t({id:"Database Roles"});case o.M.DYNAMIC_TABLE:return t({id:"Dynamic Table"});case o.M.EVENT_TABLE:return t({id:"Event Table"});case o.M.EXTERNAL_ACCESS_INTEGRATION:return t({id:"External Access Integration"});case o.M.EXTERNAL_TABLE:return t({id:"External Table"});case o.M.FILE_FORMAT:return t({id:"File Format"});case o.M.FUNCTION:return t({id:"Function"});case o.M.ICEBERG_TABLE:return t({id:"Iceberg Table"});case o.M.LISTING:case o.M.PROVIDER_LISTING:return t({id:"Listing"});case o.M.MANAGED_ACCOUNT:return t({id:"Reader Account"});case o.M.MATERIALIZED_VIEW:return t({id:"Materialized View"});case o.M.ML_MODULE:return t({id:"Module"});case o.M.ML_MODEL:return t({id:"Model"});case o.M.ML_MODEL_VERSION:return t({id:"Model Version"});case o.M.NETWORK_POLICY:return t({id:"Network Policy"});case o.M.OBJECT:return t({id:"Object"});case o.M.ORG_EMAIL:return t({id:"Organization Email"});case o.M.PIPE:return t({id:"Pipe"});case o.M.PROCEDURE:return t({id:"Procedure"});case o.M.QUERY:return t({id:"Query"});case o.M.RESOURCE_MONITOR:return t({id:"Resource Monitor"});case o.M.ROLE:return t({id:"Role"});case o.M.SCHEMA:return t({id:"Schema"});case o.M.SEQUENCE:return t({id:"Sequence"});case o.M.SESSION:return t({id:"Session"});case o.M.SHARE:return t({id:"Share"});case o.M.STAGE:return t({id:"Stage"});case o.M.GIT_REPOSITORY:return t({id:"Git Repository"});case o.M.SEMANTIC_VIEW:return t({id:"Semantic View"});case o.M.STREAM:return t({id:"Stream"});case o.M.TABLE:return t({id:"Table"});case o.M.TASK:return t({id:"Task"});case o.M.USER:return t({id:"User"});case o.M.VIEW:return t({id:"View"});case o.M.WAREHOUSE:return t({id:"Warehouse"});case o.M.TAG:return t({id:"Tag"});case o.M.BUDGET_BUNDLE:return t({id:"Budget"});case o.M.ROW_ACCESS_POLICY:return t({id:"Row Access Policy"});case o.M.MASKING_POLICY:return t({id:"Masking Policy"});case o.M.AGGREGATION_POLICY:return t({id:"Aggregation Policy"});case o.M.PROJECTION_POLICY:return t({id:"Projection Policy"});case o.M.PRIVACY_POLICY:return t({id:"Privacy Policy"});case o.M.INTEGRATION:return t({id:"Integration"});case"COLUMN":return t({id:"Column"});case o.M.REPLICATION_GROUP:return t({id:"Replication Group"});case o.M.CONNECTION:return t({id:"Connection"});case o.M.STREAMLIT:return t({id:"Streamlit"});case o.M.NOTEBOOK:return t({id:"Notebook"});case o.M.SECRET:return t({id:"Secret"});case o.M.CORTEX_SEARCH_SERVICE:return t({id:"Cortex Search Service"});default:return}}},238519:function(e,t,n){n.d(t,{g:()=>s});var r=n(982055),o=n(499924),i=n(654658),a=n(278257);let l=new Set([r.SFDBErrorCode.VSTAGE_LIVE_VERSION_NOT_FOUND]);function s(){let e=(0,o.useContext)(a.V1);return(0,o.useCallback)(async({id:t,role:n,secondaryRoles:r,comment:o})=>{try{await e.alter(n,t,{commit:!0,comment:o},{secondaryRoles:r})}catch(e){var a,s;if(!(0,i.k)(e)||(null===(a=e.externalErrorCause)||void 0===a?void 0:a.code)&&!l.has(null===(s=e.externalErrorCause)||void 0===s?void 0:s.code))throw e}},[e])}},772334:function(e,t,n){n.d(t,{z:()=>v});var r=n(485387),o=n.n(r),i=n(499924),a=n(337607),l=n(315234),s=n(313964),c=n(278257),u=n(100467),d=n(582049),f=n(491742),E=n(26194),p=n(895819),y=n(325463),b=n(896315),O=n(107370);function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}let v=e=>{let{dataDiscoverRole:t,secondaryRoles:n,userStore:r}=(0,a.j)(),v=(0,c.fo)(t,{secondaryRoles:n}),S=(0,i.useContext)(c.V1),m=(0,b.m)(["query"]).query,h=(0,i.useMemo)(()=>{var t;let n=v.get(e,u.Y.describe).result;return(null==n?void 0:null===(t=n.columns)||void 0===t?void 0:t.length)?n.columns[0]:null},[e,v]),_=(0,s.A)(),I=(0,O.iA)(),T=null!==h,R=(0,i.useCallback)(()=>h?`Copy of ${h.name} ${o()().format("YYYY-MM-DD h:mm:ssa")}`:"",[h]),C=(0,i.useCallback)(async(e,o)=>{let i=new f.L(o?"ALTER SESSION SET ENABLE_COPY_FILES = TRUE, ENABLE_COPY_FILES_API_IN_STORAGE = TRUE":"ALTER SESSION UNSET ENABLE_COPY_FILES, ENABLE_COPY_FILES_API_IN_STORAGE");await r.api.query(i.toQuery(),{isInternal:!0,role:t,secondaryRoles:n,desc:o?"enable-copy-files-sql":"unset-copy-files-sql",pid:e})},[t,n,r.api]),A=(0,i.useCallback)(async(e,o)=>{var i;let a=new f.L("COPY FILES");a.add("INTO {}",(0,p.Q)(o)),a.add("FROM {}",(0,y.i)(null!==(i=null==h?void 0:h.rootLocation)&&void 0!==i?i:"")),await r.api.query(a.toQuery(),{isInternal:!0,role:t,secondaryRoles:n,desc:"copy-files-for-entity-clone",pid:e})},[t,n,null==h?void 0:h.rootLocation,r.api]),N=(0,i.useCallback)(async({newEntityName:r,newEntityTitle:o,useEmbeddedStage:i,shouldUseVersionedStage:a=!0,postCreationAction:s})=>{if(!T)throw Error("Duplication not ready yet.");let{mainFile:c,queryWarehouse:u,codeWarehouse:f}=h,{type:p,database:y,schema:b,name:O}=e,v=null!=r?r:R(),N=`Duplicated from ${O}`,w={type:p,name:v,database:y,schema:b},{rootLocation:L}=(0,l.R)(h),k=L.endsWith("/")?L:`${L}/`,P=null,D=h&&e.type===d.M.NOTEBOOK?{computePool:h.computePool,runtimeName:h.runtimeName}:{};if(i||a)return P=await S.create(t,w,g({from:k,warehouse:f,queryWarehouse:u,title:null!=o?o:void 0,mainFile:c,comment:N},D),{secondaryRoles:n}),a?await I({id:P,role:t,secondaryRoles:n}):await _({id:P,role:t,secondaryRoles:n}),s&&await s({newEntityFullIdentifier:P}),P;let M={type:d.M.STAGE,name:`${r} (Stage)`,database:y,schema:b},j=await S.create(t,M,{},{secondaryRoles:n});try{P=await S.create(t,w,g({rootLocation:`@${(0,E.m)(j)}`,mainFile:c,warehouse:f,queryWarehouse:u,title:null!=o?o:"",comment:N},D),{secondaryRoles:n})}catch(e){throw await S.drop(t,j,{secondaryRoles:n}),e}let U="";try{U=await m.createQuery(),await C(U,!0),await A(U,j)}catch(e){throw await S.drop(t,P,{secondaryRoles:n}),await S.drop(t,j,{secondaryRoles:n}),e}finally{U.length>0&&await m.deleteQuery(U)}return s&&await s({newEntityFullIdentifier:P,newEntityStageIdentifier:j}),P},[C,A,_,t,I,R,m,T,n,S,h,e]);return{sourceEntityDetails:h,duplicate:N,readyForDuplication:T}}},107370:function(e,t,n){n.d(t,{CB:()=>y,LH:()=>p,iA:()=>b});var r=n(982055),o=n(499924),i=n(758566),a=n(654658),l=n(337607),s=n(925819),c=n(278257),u=n(264644),d=n(100467),f=n(432541),E=n(648887);async function p(e,t,n,o){try{await e.alter(n,t,{add:!0,version:"live"},{secondaryRoles:o})}catch(e){var i,l;if((0,a.k)(e)&&(i=e.code,l=r.SFDBErrorCode.VSTAGE_LIVE_VERSION_EXISTS,void 0!==i&&void 0!==l&&O(i)===O(l)))return;throw e}}function y(){let{dataDiscoverRole:e,secondaryRoles:t}=(0,l.j)(),{entityId:n}=(0,E.LM)(),r=b();return(0,o.useCallback)(()=>r({id:(0,s.h)(n,"entityId was not set"),role:e,secondaryRoles:t}),[r,n,e,t])}let b=()=>{let e=(0,o.useContext)(c.V1),{formatMessage:t}=(0,i.Z)();return(0,o.useCallback)(async({id:n,role:r,secondaryRoles:o})=>{await p(e,n,r,o);let i=await (0,u.W)(e.get(r,n,d.Y.describe,{secondaryRoles:o}));if((0,f.D)(i)){var a;throw Error(t({id:"Could not get details for the object. Error: {message}"},{message:null===(a=i.error)||void 0===a?void 0:a.message}))}if(!i.result)throw Error(t({id:"Could not get details for the object. No result data."}));return i.result.columns[0]},[t,e])};function O(e){return"number"==typeof e?e:parseInt(e,10)}},231312:function(e,t,n){n.d(t,{z:()=>d});var r=n(499924),o=n(807629),i=n(703559),a=n(582049),l=n(620149),s=n(736625);function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let d=e=>{let t=(0,s.h)(),{logEventToSnowflakeAndDatadog:n}=(0,l.z)(),d=sessionStorage.getItem(o.VE);return(0,r.useCallback)(r=>{let{fullIdentifier:o,forceLog:l}=r,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(r,["fullIdentifier","forceLog"]);switch(e){case a.M.STREAMLIT:t(u(c({fullStreamlitIdentifier:o},s),{eventType:s.eventType}));break;case a.M.NOTEBOOK:n({component:r.componentName,event:r.eventName,type:r.eventType,data:u(c({},r.additionalTelemetryParams),{windowId:d,fullNotebookIdentifier:o})});break;default:throw(0,i.U)(e),Error(`Received call to logFileBasedEntityEvent with unsupported type: ${e}`)}},[n,t,e,d])}},640961:function(e,t,n){n.d(t,{_:()=>l});var r=n(499924),o=n(758566),i=n(278257),a=n(896315);function l(){let e=(0,r.useContext)(i.V1),t=(0,a.m)(["user"]),{formatMessage:n}=(0,o.Z)();return(0,r.useCallback)(async(r,o,i)=>{let a={lastUpdatedUser:t.user.currentUserId,lastUpdatedTime:Date.now()};try{await e.alter(o,r,{comment:JSON.stringify(a)},{secondaryRoles:i})}catch(e){throw Error(n({id:"Could not refresh last updated information. Error: {message}"},{message:e instanceof Error?e.message:"unknown error"}))}},[n,e,t.user.currentUserId])}},470063:function(e,t,n){n.d(t,{j:()=>R});var r=n(184168),o=n(786176),i=n(676898),a=n(831259),l=n(836954),s=n(808242),c=n(333677),u=n(81728),d=n(428522),f=n(797583),E=n(749490),p=n(334394),y=n(777159),b=n(982055),O=n(499924),g=n(758566),v=n(535250),S=n(209469),m=n(26194),h=n(392800),_=n(328349),I=n(559673),T=n(231312);let R=O.memo(({hideLayer:e,sourceEntityIdentifier:t,sourceEntityTitle:n,dialogTitle:R,navigateToNewEntity:C,embeddedStageEnabled:A=!1,versionedStageEnabled:N=!0,openNewEntityButtonText:w,duplicate:L,readyForDuplication:k,entityShared:P,validateName:D})=>{var M,j;let{formatMessage:U}=(0,g.Z)(),[x,F]=(0,O.useState)(""),G=(0,O.useRef)(!1),[B,V]=(0,O.useState)(o.Yg.NONE),[H,$]=(0,O.useState)(!1),[K,Q]=(0,O.useState)(null),W=(0,T.z)(t.type),Y=(0,O.useRef)(!1),Z=(0,O.useRef)(null),z=(0,v.Z)(t);(0,O.useEffect)(()=>{G.current||F(n?`Copy of ${n}`:"")},[n]);let q=(0,O.useCallback)(e=>{G.current=!0,F(e.target.value)},[]),J=B!==o.Yg.INVALID&&x&&!H&&k,X=(0,O.useCallback)(async()=>{if(!J)return;$(!0);let e=null,n=null,r=!1,o=null,a=(0,m.m)(t);try{(0,I.H$)(_.g3,a),o=await L({newEntityName:x,newEntityTitle:x}),Q(o),r=!0}catch(n){var l;let t;t=(null==n?void 0:null===(l=n.externalErrorCause)||void 0===l?void 0:l.code)===b.SFDBErrorCode.ALREADY_EXISTS_002002?U({id:"This name is used by another notebook. Try a different name."}):U({id:"Error when duplicating the object. Try again later."}),(0,i.w)({type:"alert",content:t,autoDismiss:!1}),r=!1,e=null==n?void 0:n.message}finally{$(!1);let n=(0,I.Oi)({event:_.g3,markers:[a],isUserE2E:!1}),{duration:i}=(0,I.bR)(_.g3,n);W({fullIdentifier:t,componentName:h.jNi,eventName:h.LGO,eventType:r?"ui_response_success":"ui_response_error",forceLog:!1,additionalTelemetryParams:{success:r,embeddedStageEnabled:A,versionedStageEnabled:N,error:null!=e?e:void 0,hasUserChangedTitle:G.current,runtime:z?"spcs":"wh",durationMs:i,newEntityIdentifier:r?(0,m.m)(o):void 0}})}},[J,L,A,U,z,W,x,t,N]),ee=(0,O.useCallback)(()=>{K&&(e(),C(K))},[e,C,K]),et=(0,O.useMemo)(()=>(0,r.jsx)(a.q,{minHeight:30,paddingTop:4,paddingBottom:4,borderRadius:8,width:"100%"}),[]),en=(0,O.useMemo)(()=>(0,r.jsxs)(l.g,{children:[(0,r.jsx)(s.lt,{layout:"compact",children:(0,r.jsx)(s.MR,{label:U({id:"Name"}),input:{value:x,disabled:H,validation:e=>D?D(e):(0,S.hs)(e,U),onValidationChange:V,onChange:q,spellCheck:!1,autoFocus:!0}})}),P&&(0,r.jsxs)(c.X,{marginTop:16,verticalAlign:"middle",children:[(0,r.jsx)(u.JO,{icon:"warning-triangle",color:d.Q2.iconColor,flexShrink:0,marginRight:8,size:16}),(0,r.jsx)(f.x,{size:"small",display:"inline-flex",verticalAlign:"middle",weight:400,color:d.Il.Gray70,children:U({id:"The duplicated app will not be shared with the same roles."})})]})]}),[P,U,q,H,x,D]),er=(0,O.useMemo)(()=>(0,r.jsxs)(E.s,{align:"center",children:[(0,r.jsx)(u.JO,{flexShrink:0,color:d.Q2.statusSuccessColor,icon:"status-success",height:64,width:64}),(0,r.jsx)(f.x,{size:"default",display:"inline-flex",verticalAlign:"middle",weight:400,marginTop:24,color:d.Q2.primaryTextColor,children:U({id:"Copy of {sourceEntityTitle} created!"},{sourceEntityTitle:n})})]}),[U,n]);(0,O.useEffect)(()=>{!Y.current&&(W({fullIdentifier:t,componentName:h.jNi,eventName:h.mL4,eventType:"ui_impression",forceLog:!1,additionalTelemetryParams:{embeddedStageEnabled:A,versionedStageEnabled:N}}),Y.current=!0)},[A,W,t,N]);let eo=(0,O.useRef)(null),[ei,ea]=(0,O.useState)("auto");(0,O.useEffect)(()=>{eo.current&&ea(eo.current.scrollHeight)},[K,k]);let el=(0,O.useMemo)(()=>K?{transitionProperty:"height",transitionDuration:"1000ms",transitionTimingFunction:"ease"}:{},[K]);return(0,r.jsxs)(p.Vq,{manuallyShown:!0,onHide:e,causalElement:Z,children:[(0,r.jsx)(p.fK,{children:R}),(0,r.jsx)(p.a7,{children:(0,r.jsx)(l.g,(M=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({height:ei},el),j=j={ref:eo,children:K?er:k?en:et},Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(j)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(j)).forEach(function(e){Object.defineProperty(M,e,Object.getOwnPropertyDescriptor(j,e))}),M))}),(0,r.jsxs)(p.cN,{children:[(0,r.jsx)(y.zx,{use:"default",onClick:e,disabled:H,marginRight:8,telemetryComponent:h.jNi,telemetryName:h.c6E,telemetryData:{sourceEntityIdentifier:t,embeddedStageEnabled:A,versionedStageEnabled:N,hasUserChangedTitle:G.current},children:K?U({id:"Close"}):U({id:"Cancel"})}),(0,r.jsx)(y.zx,{use:"primary",onClick:K?ee:X,disabled:!J,inProgress:H,telemetryComponent:h.jNi,telemetryName:K?h.RVD:h.J9z,telemetryData:{sourceEntityIdentifier:t,newEntityIdentifier:null!=K?K:void 0,embeddedStageEnabled:A,versionedStageEnabled:N,hasUserChangedTitle:G.current},children:K?null!=w?w:U({id:"Open app"}):U({id:"Duplicate"})})]})]})});R.displayName="DuplicateFileBasedEntityDialog"},112982:function(e,t,n){n.d(t,{Jf:()=>p,Fx:()=>S,Gk:()=>y,Oz:()=>g,xe:()=>v,qL:()=>m});var r,o=n(184168),i=n(561843),a=n(485387),l=n.n(a),s=n(499924),c=n(29174),u=n(268165);let d={},f=({epochName:e,callbackFreqMs:t,shouldCleanUpDangledTicker:n=!0})=>{let r=`${e}//${t}`,[o,i]=s.useState(0),a=s.useRef(n);a.current=n;let l=(0,u.t)(),c=s.useCallback(()=>{d[r]&&(d[r].startTimeMs=Date.now()),l.current&&i(0)},[r,l]),f=s.useCallback(()=>{delete d[r],l.current&&i(0)},[r,l]);return s.useEffect(()=>{if(null===t)return;d[r]||(d[r]={startTimeMs:Date.now(),callbacks:new Set,intervalId:void 0});let e=()=>i(Date.now()-d[r].startTimeMs);return e(),d[r].callbacks.add(e),d[r].intervalId||(d[r].intervalId=setInterval(()=>{d[r].callbacks.forEach(e=>e())},t)),()=>{d[r].callbacks.delete(e),0===d[r].callbacks.size&&(clearInterval(d[r].intervalId),a.current?f():d[r].intervalId=void 0)}},[t,f,r,l]),{elapsedTimeMs:o,reset:c}};var E=n(582049),p=((r={}).initializingMessage="initializingMessage",r.startingComputePoolMessage="startingComputePoolMessage",r.startingContainerServiceMessage="startingContainerServiceMessage",r.connectingServiceMessage="connectingServiceMessage",r.waitingEndpointMessage="waitingEndpointMessage",r.waitingEndpointMessageStreamlit="waitingEndpointMessageStreamlit",r.runningAppMessage="runningAppMessage",r.runningAppMessageStreamlit="runningAppMessageStreamlit",r.fullComputePoolMessage="fullComputePoolMessage",r.insufficientCapacityErrorMessage="insufficientCapacityErrorMessage",r.generalContainerClientErrorMessage="generalContainerClientErrorMessage",r.unreachableContainerErrorMessage="unreachableContainerErrorMessage",r.generalContainerRunErrorMessage="generalContainerRunErrorMessage",r.reusingExistingServiceMessage="reusingExistingServiceMessage",r.oomWarehouseErrorMessage="oomWarehouseErrorMessage",r.generalWarehouseErrorMessage="generalWarehouseErrorMessage",r);let y=e=>{if(!e)return;let t=e.name;if(!(t in p))throw Error(`Unknown FormattedMessageSupplier key: ${t}`);return t},b=(e,t)=>({initializingMessage:()=>(0,o.jsx)(c.Z,{id:"Initializing connection and scanning existing service"}),startingComputePoolMessage:e=>(null==e?void 0:e.duration)?(0,o.jsx)(c.Z,{id:"{duration} \xb7 Starting compute pool. This can take 35 minutes",values:e}):(0,o.jsx)(c.Z,{id:"Starting compute pool. This can take 35 minutes"}),startingContainerServiceMessage:e=>(null==e?void 0:e.duration)?(0,o.jsx)(c.Z,{id:"{duration} \xb7 Starting container service. This can take 35 minutes",values:e}):(0,o.jsx)(c.Z,{id:"Starting container service. This can take 35 minutes"}),connectingServiceMessage:()=>(0,o.jsx)(c.Z,{id:"Connecting to container service"}),waitingEndpointMessage:()=>(0,o.jsx)(c.Z,{id:"Waiting for notebook endpoint to be ready"}),waitingEndpointMessageStreamlit:()=>(0,o.jsx)(c.Z,{id:"Waiting for Streamlit endpoint to be ready"}),runningAppMessage:()=>(0,o.jsx)(c.Z,{id:"Running notebook application"}),runningAppMessageStreamlit:()=>(0,o.jsx)(c.Z,{id:"Running Streamlit"}),fullComputePoolMessage:()=>(0,o.jsx)(c.Z,{id:"Couldnt start session because compute pool is full. Try a different compute pool or contact your admin."}),insufficientCapacityErrorMessage:()=>(0,o.jsx)(c.Z,{id:"Couldn't start session due to insufficient capacity from cloud provider. Try a different compute pool or try again later."}),generalContainerRunErrorMessage:()=>(0,o.jsx)(c.Z,{id:"Couldn't start session due to an issue with Snowpark Container Services: {errorDetail}",values:t}),unreachableContainerErrorMessage:()=>(0,o.jsx)(c.Z,{id:"Session ended due to unreachable container."}),generalContainerClientErrorMessage:()=>(0,o.jsx)(c.Z,{id:"Encountered error with service connection: {errorDetail}",values:t}),reusingExistingServiceMessage:e=>(null==e?void 0:e.duration)?(0,o.jsx)(c.Z,{id:"{duration} \xb7 Trying to reuse existing service. This can take 15 minutes",values:e}):(0,o.jsx)(c.Z,{id:"Trying to reuse existing service. This can take 15 minutes"}),oomWarehouseErrorMessage:()=>(0,o.jsx)(c.Z,{id:"Notebook session ended due to out of memory issue. Try limiting your dataset or use a Snowpark-optimized warehouse."}),generalWarehouseErrorMessage:()=>(0,o.jsx)(c.Z,{id:"Notebook session ended due to error: {errorDetail}",values:t})})[e],O={STARTING_COMPUTE_POOL_INFO_STRING:"Compute pool node(s) are being provisioned",STARTING_SERVICE_INFO_STRING:"Waiting to start",FULL_COMPUTE_POOL_ERROR_SUBSTRING:"Notebook service is unschedulable in full compute pool",INSUFFICIENT_RESOURCES_ERROR_SUBSTRING:"Unschedulable due to insufficient",INSUFFICIENT_CAPACITY_ERROR_SUBSTRING:"Compute pool insufficient capacity error",UNREACHABLE_CONTAINER_ERROR_PREFIX:"UNAVAILABLE:",RUNNING_STRING:"Running",OOM_WAREHOUSE_ERROR_SUBSTRING:"Function available memory exhausted"},g=()=>(0,o.jsx)(c.Z,{id:"Packages updated successfully."}),v=(e,t)=>{var n,r,o;switch(e.topic){case 1:return b("initializingMessage");case 2:{let t=e.payload?JSON.parse(e.payload):void 0,r=Object.values(null!==(n=null==t?void 0:t.containers)&&void 0!==n?n:{}).flat().map(e=>e.message);if(r.includes(O.STARTING_COMPUTE_POOL_INFO_STRING))return b("startingComputePoolMessage");return r.includes(O.STARTING_SERVICE_INFO_STRING)||r.includes(O.RUNNING_STRING)||i.cM.warn(`Unrecognized service status message: ${e.payload}`),b("startingContainerServiceMessage")}case 3:return b("connectingServiceMessage");case 4:if(t===E.M.STREAMLIT)return b("waitingEndpointMessageStreamlit");return b("waitingEndpointMessage");case 5:if(t===E.M.STREAMLIT)return b("runningAppMessageStreamlit");return b("runningAppMessage");case 6:{let t=e.payload;if(null==t?void 0:t.includes(O.FULL_COMPUTE_POOL_ERROR_SUBSTRING))return b("fullComputePoolMessage");if((null==t?void 0:t.includes(O.INSUFFICIENT_CAPACITY_ERROR_SUBSTRING))||(null==t?void 0:t.includes(O.INSUFFICIENT_RESOURCES_ERROR_SUBSTRING)))return b("insufficientCapacityErrorMessage");return b("generalContainerRunErrorMessage",{errorDetail:t})}case 7:if(null===(r=e.payload)||void 0===r?void 0:r.startsWith(O.UNREACHABLE_CONTAINER_ERROR_PREFIX))return b("unreachableContainerErrorMessage");return b("generalContainerClientErrorMessage",{errorDetail:e.payload});case 8:return b("reusingExistingServiceMessage");case 101:if(null===(o=e.payload)||void 0===o?void 0:o.includes(O.OOM_WAREHOUSE_ERROR_SUBSTRING))return b("oomWarehouseErrorMessage");return b("generalWarehouseErrorMessage",{errorDetail:e.payload});default:i.cM.warn(`Unrecognized lifecycle message topic: ${e.topic}`);return}},S=(e,t)=>{let n=(null==t?void 0:t.type)==="ReceivedStreamlitLifecycleMsg"?v(t.data,e):void 0,r=y(n),o="startingComputePoolMessage"===r||"startingContainerServiceMessage"===r||"reusingExistingServiceMessage"===r,{elapsedTimeMs:i}=f({epochName:"startingService",callbackFreqMs:o?1e3:null}),a=o?l().duration(i,"milliseconds").format("h[h] m[m] s[s]",0,{trim:"all"}):void 0;return{displayTextSupplier:n,values:o?{duration:a}:void 0}},m=(e,t)=>{let{displayTextSupplier:n,values:r}=S(e,t);return null==n?void 0:n(r)}},154909:function(e,t,n){n.d(t,{p:()=>r});let r="check-for-nested-secret"},418182:function(e,t,n){n.d(t,{L:()=>o});var r=n(333811);let o=()=>{let e=(0,r._T)("FEATURE_SNOWGIT_OAUTH_SUPPORT").IS_FEATURE_SNOWGIT_OAUTH_SUPPORT_VISIBLE,t=(0,r._T)("FEATURE_UI_ENABLE_GIT_INTEGRATION_OAUTH").IS_FEATURE_UI_ENABLE_GIT_INTEGRATION_OAUTH_VISIBLE;return e&&t}},35945:function(e,t,n){n.d(t,{j:()=>c});var r=n(499924),o=n(323441),i=n(491742),a=n(380890),l=n(418182);let s=({tableData:e})=>JSON.parse(e.rows[0][0]).result,c=()=>{let e=(0,l.L)(),t=(0,r.useMemo)(()=>new i.L().add("CALL SYSTEM$UI_SHOW_GIT_INTEGRATIONS();").toQuery(),[]),n=(0,a.y)({hideFromQueryHistory:!0,description:"system-show-git-integrations",sqlQuery:t,skip:!e});return(0,o.Z)(s,n)}},358101:function(e,t,n){n.d(t,{O:()=>p});var r=n(51723),o=n(499924),i=n(149383),a=n(337607),l=n(925819),s=n(896315),c=n(392800),u=n(620149),d=n(491742),f=n(708048);async function E({api:e,state:t,id:n}){let r=function(e){let t=new d.L;return t.add("ALTER GIT REPOSITORY {} FETCH",(0,f.M)(e)),t.toQuery()}(n),{dataDiscoverRole:o,currentWarehouse:i}=t;return await e.query(r,{role:o,warehouse:i,isInternal:!0,desc:"git-repository-fetch"})}function p(){var e,t;let[n,d]=(0,o.useState)(!1),[f,p]=(0,o.useState)(null),y=(0,o.useCallback)(()=>{p(null)},[]),b=o.useContext(s.L),O=(0,a.j)(),{logEventToSnowflakeAndDatadog:g}=(0,u.z)(),v=(0,o.useCallback)(async(e,t)=>{try{var n;p(null);let r=(0,l.h)(null==b?void 0:null===(n=b.user)||void 0===n?void 0:n.api,"UserStore is not loaded");d(!0),await E({api:r,state:O,id:e}),g({event:c.Mtj,type:"ui_response_success",data:t})}catch(r){p(r);let e=(0,i.Fg)(r),n=(0,i.CH)(r);g({event:c.mPe,type:"ui_response_error",data:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({errorCode:e,errorMessage:n},t)})}finally{d(!1)}},[g,O,null==b?void 0:null===(e=b.user)||void 0===e?void 0:e.api]);return t=n,(0,r.useTelemetryPerformanceLogging)(c.je9,!t),{isFetching:n,fetch:v,error:f,dismissError:y}}},144749:function(e,t,n){n.d(t,{K:()=>i});var r=n(400558);class o extends r.e{stagePath(){this.token("@");let e=this.fullyQualifiedName();this.token("/");let t=this.pathSegment();this.token("/");let n=this.optionallyQuotedPathSegment();return this.token("/"),{stage:e,scopeType:t,scopeName:n,path:this.lexer.getYetToRead()}}pathSegment(){let e="";for(;this.lexer.hasNext()&&"/"!==this.lexer.peek();)e+=this.lexer.next();return e}optionallyQuotedPathSegment(){return'"'===this.lexer.peek()?this.quotedName():this.pathSegment()}}let i=e=>new o(e.trim()).stagePath()},579126:function(e,t,n){n.d(t,{G:()=>f});var r=n(499924),o=n(814539),i=n(154909),a=n(337607),l=n(925819),s=n(491742),c=n(708048),u=n(896315),d=n(652088);function f(e){let[t,n]=(0,r.useState)(),[f,E]=(0,r.useState)(!1),p=function(){let{user:{api:e}}=(0,u.m)(["user"]),{dataDiscoverRole:t,secondaryRoles:n}=(0,a.j)();return(0,r.useCallback)(async({id:r,queryCounter:o=""})=>{let i=new s.L("SHOW GIT SECRETS IN GIT REPOSITORY IDENTIFIER(?)",(0,c.M)(r)),a=await e.query(i.toQuery(),{isInternal:!0,role:t,secondaryRoles:n,desc:"show-git-secrets-in-git_repository",context:{queryCounter:o}});if(!a.rows[0])return;let u=(0,d.Ww)(a);return{authorName:a.rows[0][(0,l.h)(u.AUTHOR_NAME,"AUTHOR_NAME not found").index],authorEmail:a.rows[0][(0,l.h)(u.AUTHOR_EMAIL,"AUTHOR_EMAIL not found").index],username:a.rows[0][(0,l.h)(u.USERNAME,"USERNAME not found").index]}},[e,t,n])}(),{fetchId:y}=(0,o.m)(i.p);return(0,r.useEffect)(()=>{if(!e)return;let t=!0;return(async()=>{try{let r=await p({id:e,queryCounter:y});if(!t)return;n(r),E(!0)}catch(e){if(!t)return;n(void 0),E(!0)}})(),()=>{t=!1}},[e,p,y]),{nestedSecret:t,isFetched:f}}},595319:function(e,t,n){n.d(t,{g:()=>r});let r=(e,t)=>{var n,r;return null!==(r=null==e?void 0:null===(n=e.find(({name:e})=>e===t))||void 0===n?void 0:n.isUserOauthSupported)&&void 0!==r&&r}},172547:function(e,t,n){n.d(t,{y:()=>y});var r=n(499924),o=n(418182),i=n(323441),a=n(245294),l=n(491742),s=n(380890),c=n(652088),u=n(594985);let d={name:"NAME",integrationName:"INTEGRATION_NAME",isOAuthAuthorized:{column:"IS_OAUTH_AUTHORIZED",convert:a.h}},f=(0,c.YJ)(d),E=e=>e.rows,p=()=>{let{showGitProfilesFetchId:e}=(0,u.n)(),t=(0,o.L)(),n=(0,r.useMemo)(()=>new l.L().add("SHOW GIT PROFILES FOR USER;").toQuery(),[]),a=(0,s.y)({hideFromQueryHistory:!0,description:"show-git-profiles-for-user",sqlQuery:n,fetchId:e,skip:!t}),c=(0,i.Z)(f,a);return(0,i.Z)(E,c)},y=({apiIntegration:e})=>{let{data:t,loading:n}=p(),i=(0,o.L)();return(0,r.useMemo)(()=>{var r;if(!i||!e)return{isLoading:!1,isOAuthConnected:!1};if(n)return{isLoading:!0,isOAuthConnected:!1};let o=null==t?void 0:t.find(({integrationName:t})=>t===e);return{isLoading:!1,isOAuthConnected:null!==(r=null==o?void 0:o.isOAuthAuthorized)&&void 0!==r&&r}},[i,e,n,t])}},594985:function(e,t,n){n.d(t,{n:()=>o});var r=n(814539);let o=()=>{let{updateFetchId:e,fetchId:t}=(0,r.m)("show-git-profiles-fetch-id-key");return{showGitProfilesFetchId:t,refreshShowGitProfiles:e}}},22878:function(e,t,n){n.d(t,{EO:()=>a,FD:()=>c,HU:()=>i,V2:()=>s,iJ:()=>r,iv:()=>u,jA:()=>o,rM:()=>l});let r="git-sync-fbe-pull-success",o="git-sync-fbe-pull-error",i="git-sync-fbe-reset-pull-success",a="git-sync-fbe-reset-pull-error",l="git-commit-fbe-success",s="git-commit-fbe-error",c="git-discard-fbe-success",u="git-discard-fbe-error"},570829:function(e,t,n){n.d(t,{C:()=>i});var r=n(582049),o=n(144749);function i(e){let t=e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e,n=(0,o.K)(t);return{gitRepositoryId:{type:r.M.GIT_REPOSITORY,database:n.stage.database,schema:n.stage.schema,name:n.stage.name},gitBranch:n.scopeName,gitPath:n.path}}},648887:function(e,t,n){n.d(t,{aB:()=>M,LM:()=>x,E0:()=>U});var r=n(332653),o=n(676898),i=n(382510),a=n(499924),l=n(758566),s=n(149383),c=n(337607),u=n(925819),d=n(421639),f=n(278257),E=n(264644),p=n(100467),y=n(707924),b=n(982055),O=n(654658),g=n(358101),v=n(640273),S=n(100067),m=n(238519),h=n(524603),_=n(549979),I=n(121085),T=n(570829),R=n(940830),C=n(853509),A=n(620149),N=n(418182),w=n(35945),L=n(579126),k=n(595319),P=n(172547),D=n(22878);let M=({refreshEntity:e})=>{let{formatMessage:t}=(0,l.Z)(),{dataDiscoverRole:n,secondaryRoles:i}=(0,c.j)(),M=(0,a.useContext)(f.V1),j=function(){let{dataDiscoverRole:e,secondaryRoles:t}=(0,c.j)(),n=(0,a.useContext)(f.V1),r=(0,_.U)(),{fetch:o}=(0,g.O)(),{isOAuthConnected:i,hasGitCredentials:l}=x(),s=(0,m.g)();return(0,a.useCallback)(async({entityId:a,gitRepositoryId:c,gitFetch:d})=>{d&&await o(c,{isOAuthConnected:i,hasGitCredentials:l}),await s({id:a,role:e,secondaryRoles:t});let{lastVersionSourceLocationUri:f}=await r(a,e,t),{gitBranch:E,gitPath:p}=(0,T.C)((0,u.h)(f,"Invalid source location"));await n.alter(e,a,{add:!0,from:{gitRepository:c,path:h.join(`branches/${(0,I.P)(E)}`,p,"/")}},{secondaryRoles:t}),await n.alter(e,a,{add:!0,live:!0},{secondaryRoles:t})},[s,r,o,l,i,e,t,n])}(),U=function(){let{dataDiscoverRole:e,secondaryRoles:t}=(0,c.j)(),n=(0,a.useContext)(f.V1),{fetch:r}=(0,g.O)(),{isOAuthConnected:i,hasGitCredentials:s}=x(),u=(0,v.v)(),d=(0,m.g)(),{formatMessage:E}=(0,l.Z)();return(0,a.useCallback)(async({entityId:a,gitRepositoryId:l,gitFetch:c})=>{let f=[];c&&f.push(r(l,{isOAuthConnected:i,hasGitCredentials:s})),f.push(d({id:a,role:e,secondaryRoles:t})),await Promise.all(f);let p={cols:[],rows:[]};try{var y;if(await n.alter(e,a,{pull:!0,enableConflictResolution:u},{secondaryRoles:t},e=>{p=e}),(null===(y=p.rows[0])||void 0===y?void 0:y[0])&&/\n/iu.test(p.rows[0][0]))throw Error("Unable to pull");if(u&&function(e){let t=new Set(e.cols.map(e=>e.name));return e.rows.length>0&&["merged_file","conflict_type","action"].every(e=>t.has(e))}(p)){let e=function(e){let t=(0,S.O)(e);return e.rows.map(e=>{var n,r,o;return{unresolvedFile:null!==(n=e[t.MERGED_FILE])&&void 0!==n?n:"",conflictType:null!==(r=e[t.CONFLICT_TYPE])&&void 0!==r?r:"",action:null!==(o=e[t.ACTION])&&void 0!==o?o:""}})}(p);return{result:"conflicts",conflicts:e}}return(0,o.w)({type:"success",content:E({id:"Sync successful."})}),{result:"success"}}catch(t){let e=(0,O.b)(t);if(!(null==e?void 0:e.code))throw t;switch(e.code){case b.SFDBErrorCode.VSTAGE_GIT_PULL_ALREADY_LATEST:return(0,o.w)({type:"success",content:E({id:"Nothing to sync, already up to date."})}),{result:"noop"};case b.SFDBErrorCode.VSTAGE_GIT_PULL_SUCCESS:return(0,o.w)({type:"success",content:E({id:"Sync successful."})}),{result:"success"};default:throw t}}},[d,r,E,s,u,i,e,t,n])}(),[F,G]=(0,a.useState)(),[B,V]=(0,a.useState)(),[H,$]=(0,a.useState)(),[K,Q]=(0,a.useState)(),[W,Y]=(0,a.useState)(!1),[Z,z]=(0,a.useState)(),[q,J]=(0,a.useState)(!1),[X,ee]=(0,a.useState)(!1),{nestedSecret:et,isFetched:en}=(0,L.G)(F),{refreshFileBrowser:er}=(0,R.Q)(),{logEventToSnowflakeAndDatadog:eo}=(0,A.z)(),ei=(0,N.L)(),{isOAuthConnected:ea,isLoading:el}=(0,P.y)({apiIntegration:null!=K?K:""}),{data:es,loading:ec}=(0,w.j)(),[eu,ed]=(0,a.useState)(!1),ef=(0,r.z)(async({gitFetch:n,quiet:r}={})=>{let i=(0,u.h)(Z,t({id:"Invalid or missing entity ID"})),a=(0,u.h)(F,t({id:"No git repository is associated."}));J(!0);try{if(await j({entityId:i,gitRepositoryId:a,gitFetch:n}),e(),er(),eo({event:D.HU,type:"ui_response_success",data:{domain:Z?Z.type:void 0,entityIdentifier:Z?(0,d.W)((0,C.R)(Z)):void 0}}),r)return;(0,o.w)({type:"success",content:t({id:"{entity} synced successfully"},{entity:(0,y.m)(i.type,t)})})}catch(e){if(eo({event:D.EO,type:"ui_error",data:{error:e,domain:Z?Z.type:void 0,entityIdentifier:Z?(0,d.W)((0,C.R)(Z)):void 0,errorCode:(0,s.Fg)(e),errorMessage:(0,s.CH)(e)}}),r)throw e;(0,o.w)({type:"alert",content:t({id:"Failed to connect to Git: {message}"},{message:e.message||"Unknown error"})})}finally{J(!1)}}),eE=(0,r.z)(async()=>{let n=(0,u.h)(Z,t({id:"Invalid or missing entity ID"})),r=(0,u.h)(F,t({id:"No git repository is associated."}));J(!0);try{let t=await U({entityId:n,gitRepositoryId:r});return e(),t}finally{J(!1)}});(0,a.useEffect)(()=>{Z&&ee(!0)},[Z]),(0,a.useEffect)(()=>{F&&ei&&!ec&&(async()=>{var e;let t=await (0,E.W)(M.get(n,F,p.Y.describe,{secondaryRoles:i})),r=null==t?void 0:null===(e=t.result)||void 0===e?void 0:e.columns[0];if(null!==r){let{apiIntegration:e}=r;Q(e),ed((0,k.g)(es,e))}})()},[F,ei,n,i,M,es,ec]),(0,a.useEffect)(()=>{if(!Z)return;let e=!1;return(async()=>{var t;let r=await (0,E.W)(M.get(n,Z,p.Y.describe,{secondaryRoles:i}));if(!e&&(null===(t=r.result)||void 0===t?void 0:t.columns[0])!=null){if(r.result.columns[0].lastVersionGitCommitHash){let e=r.result.columns[0].lastVersionSourceLocationUri;if(!e)return;let{gitRepositoryId:t,gitBranch:n}=(0,T.C)(e);G(t),V(n),Y(!0)}else G(void 0),V(void 0),Y(!1);ee(!1)}})(),()=>{e=!0}},[Z,n,i,M]);let ep=!!(null==et?void 0:et.username);return(0,a.useMemo)(()=>({entityId:Z,setEntityId:z,gitRepositoryId:F,setGitRepositoryId:G,gitBranch:B,setGitBranch:V,isGitSynced:W,setIsGitSynced:Y,gitPath:H,setGitPath:$,isEntityDetailsLoading:X,isSyncing:q,resetAndPullFromGit:ef,pullFromGit:eE,hasGitCredentials:ep,nestedSecret:et,isNestedSecretFetched:en,apiIntegration:K,isOAuthConnected:ea,isOauthConnectionStatusLoading:el,isOAuthSupportedForApiIntegration:eu}),[Z,F,B,W,H,X,q,ef,eE,ep,et,en,K,ea,el,eu])},j=(0,a.createContext)({entityId:void 0,setEntityId:i.EI,gitRepositoryId:void 0,setGitRepositoryId:i.EI,gitBranch:void 0,setGitBranch:i.EI,setIsGitSynced:i.EI,isGitSynced:!1,gitPath:void 0,apiIntegration:void 0,setGitPath:i.EI,isEntityDetailsLoading:!1,isSyncing:!1,resetAndPullFromGit:async()=>await (0,i.EI)(),pullFromGit:()=>Promise.resolve({result:"noop"}),hasGitCredentials:!1,nestedSecret:void 0,isNestedSecretFetched:!1,isOAuthConnected:!1,isOauthConnectionStatusLoading:!1,isOAuthSupportedForApiIntegration:!1}),U=j.Provider,x=()=>(0,a.useContext)(j)},873807:function(e,t,n){n.d(t,{a$:()=>i,fs:()=>l,gE:()=>a,gK:()=>s,tZ:()=>r,yN:()=>o});let r="ui_click",o="ui_visit",i="ui_impression",a="ui_keyboard",l="ui_response_success",s="ui_response_error"},736889:function(e,t,n){n.d(t,{J:()=>i});var r=n(641419),o=n(98050);function i(){let e=(0,o.N)("UI_ENABLE_NOTEBOOK_FEATURE_33");return r.v.addFeatureFlagEvaluation("EnableRunWhileCacheLoading",e),e}},188996:function(e,t,n){n.d(t,{S:()=>l});var r=n(499924),o=n(227939),i=n(149268);let a=o.H.cacheFiller;function l(e,t){let n=(0,i.q)(e,(e,t,n)=>{a.debug("New Start Document Cache Load Effect"),e.registerHandler(t.docCacheHandler)}),o=(0,i.q)(e,(e,t,n)=>{a.debug("New End Document Cache Load Effect"),e.unregisterHandler(t.docCacheHandler)}),l=(0,i.q)(e,(e,n,r)=>{a.debug("New Fetch Cache Results called");let o=n.cellIds.map(e=>({cellId:e})),i=0;e.connection.isConnected()&&o&&o.length>0&&(i=1e3*t,e.registerHandler(n.messageHandler),e.sendMessage({previousResults:{warmStart:!1,cellIds:o,allowResultsAfterStart:!0}})),setTimeout(()=>{a.debug("Cells Timedout",{cellIds:n.cellIds}),n.messageHandler.onCancel(n.cellIds,"Timeout")},i)}),s=(0,i.q)(e,(e,t,n)=>{a.debug("New Fetch Cache Results DONE called"),e.unregisterHandler(t.messageHandler)});return(0,r.useMemo)(()=>({newStartDocumentCachedLoad:n,newEndDocumentCachedLoad:o,newFetchCachedResults:l,newFetchCachedResultsDone:s}),[o,l,s,n])}},229708:function(e,t,n){n.d(t,{j:()=>a});var r=n(227939),o=n(351388);let i=r.H.cacheFiller,a={NEW_START_DOCUMENT_CACHE_LOAD:function(e,t,n){if(i.debug("NEW_START_DOCUMENT_CACHE_LOAD",{cacheLoadId:t.cacheLoadId}),"pending"===e.cacheStatus){i.reportError("unexpected_nested_document_cache_start","Should not get a start documnet cache load in pending",{action:t});return}e.cacheLoadId=t.cacheLoadId,e.cacheStatus="pending";let{id:r,role:o,secondaryRoles:a}=t;n({type:"newStartDocumentCachedLoad",id:r,role:o,secondaryRoles:a,docCacheHandler:t.docCacheHandler}),e.cacheLoadId=t.cacheLoadId,e.cacheStatus="pending"},NEW_END_DOCUMENT_CACHE_LOAD:function(e,t,n){if(i.debug("NEW_END_DOCUMENT_CACHE_LOAD"),null==t.cacheLoadId||e.cacheLoadId===t.cacheLoadId){e.cacheLoadId=void 0;let r=e.cacheStatus;i.assertOrReport("pending"===e.cacheStatus||"loaded"===e.cacheStatus,"end_document_cache_load_without_pending_cache_status","Running a cache load batch with the cacheStatus in a non-pending state",{cacheStatus:r,cacheLoadId:t.cacheLoadId}),"error"!==r&&(e.cacheStatus="loaded");let{id:o,role:a,secondaryRoles:l}=t;n({type:"newEndDocumentCachedLoad",id:o,role:a,secondaryRoles:l,docCacheHandler:t.docCacheHandler})}},NEW_START_FETCHING_CACHED_RESULT:function(e,t,n){let{id:r,role:o,secondaryRoles:a,cellIds:l}=t;i.debug("NEW_START_FETCHING_CACHED_RESULT",{cellIds:l}),(null==t.cacheLoadId||e.cacheLoadId===t.cacheLoadId)&&l&&l.length>0&&(i.assertOrReport("pending"===e.cacheStatus||"loaded"===e.cacheStatus,"active_batch_without_pending_cache_status","Running a cache load batch with the cacheStatus in a non-pending state",{cacheStatus:e.cacheStatus,cellIds:l,cacheLoadId:t.cacheLoadId}),"pending"!==e.cacheStatus&&"loaded"!==e.cacheStatus?t.messageHandler.onCancel(l,"RunAlreadyHappened"):n({type:"newFetchCachedResults",id:r,role:o,secondaryRoles:a,cellIds:t.cellIds,messageHandler:t.messageHandler,cacheLoadId:t.cacheLoadId}))},NEW_END_FETCHING_CACHED_RESULT:function(e,t,n){let{id:r,role:o,secondaryRoles:a}=t;i.debug("NEW_END_FETCHING_CACHED_RESULT"),n({type:"newFetchCachedResultsDone",id:r,role:o,secondaryRoles:a,messageHandler:t.messageHandler})},NEW_SET_CACHE_RESULTS:function(e,t,n){i.debug("NEW_SET_CACHE_RESULTS",{cellId:t.cellId});let r=e.notebookState;if(!r){i.error("No Notebook state when setting cache results");return}if(null==t.cacheLoadId||e.cacheLoadId===t.cacheLoadId){var a;let{cellId:n,messages:l}=t;i.debug("Updating cache state for cell",{cellId:n});let s=null===(a=e.notebookState)||void 0===a?void 0:a.getCellById(n);if(null==s||"neverRun"!==s.result.status.cellRunStatus){i.error("Cell is already updated before the cache result, so ignoring the cache result");return}if("pending"===e.cacheStatus||"loaded"===e.cacheStatus){let a=r.updateCellResult(n,{message:l});if(null!=t.cellCacheMetadata&&(i.debug("Cell has cellCacheMetadata",{cellId:n,cellCacheMetadata:t.cellCacheMetadata}),a=a.updateCellResult(n,{selfContentHash:t.cellCacheMetadata.selfContentHash,fullContentHash:t.cellCacheMetadata.fullContentHash,runId:t.cellCacheMetadata.runId,parentExecutionId:t.cellCacheMetadata.parentExecutionId,executionId:t.cellCacheMetadata.executionId,tempSelfContentHash:void 0,tempFullContentHash:void 0,tempRunId:void 0,tempParentExecutionId:void 0,tempExecutionId:void 0})),t.queryId){let r=t.messages.some(e=>(0,o.G)(e));e.notebookState=a.updateCellStatus(n,{cellRunStatus:r?"error":"success"})}else e.notebookState=a.updateCellStatus(n,{cellRunStatus:"idle"});i.debug("Updated cache state for cell",{cellId:n})}else i.reportError("active_batch_without_pending_cache_status","Running a cache load batch with the cacheStatus in a non-pending state",{cacheStatus:e.cacheStatus,cellId:n,cacheLoadId:t.cacheLoadId})}}}},14045:function(e,t,n){n.d(t,{W:()=>y});var r=n(184168),o=n(499924),i=n(758566),a=n(222219),l=n(854544),s=n(26194),c=n(470063),u=n(724625),d=n(772334);let f=e=>{let{sourceEntityDetails:t,duplicate:n,readyForDuplication:r}=(0,d.z)(e),i=(0,o.useCallback)(async e=>{var r,o;let i=null!==(o=null==e?void 0:e.newEntityName)&&void 0!==o?o:`Copy of ${null!==(r=null==t?void 0:t.name)&&void 0!==r?r:""}`,a=(0,u._t)(i);return await n({newEntityName:a})},[n,null==t?void 0:t.name]);return{sourceNotebookDetails:t,duplicate:i,readyForDuplication:r}};var E=n(843504),p=n(95238);let y=o.memo(({hideLayer:e,sourceFullNotebookIdentifier:t,urlData:n})=>{var u;let{formatMessage:d}=(0,i.Z)(),{sourceNotebookDetails:y,duplicate:b,readyForDuplication:O}=f(t),g=(0,o.useCallback)(e=>{a.k.navigate({region:n.region,org:n.org,entityIdStr:(0,s.m)(e)})},[n.org,n.region]),v=(0,l.gV)().getBooleanValue("_DP_UI_NOTEBOOK_VALIDATE_NOTEBOOK_NAME"),S=(0,o.useCallback)(e=>{let t=(0,p.V)(e);return(0,E.t)(t,d)},[d]);return(0,r.jsx)(c.j,{hideLayer:e,sourceEntityIdentifier:t,sourceEntityTitle:null!==(u=null==y?void 0:y.name)&&void 0!==u?u:"",dialogTitle:d({id:"Duplicate Notebook"}),openNewEntityButtonText:d({id:"Open notebook"}),readyForDuplication:O,duplicate:b,navigateToNewEntity:g,validateName:v?S:void 0})});y.displayName="DuplicateNotebookDialog"},88640:function(e,t,n){n.d(t,{e:()=>i});var r=n(885949),o=n(155205);function i(e){let t=(0,o.h)(e),n=e===r.GF,i=e===r.rJ;return t||n||i}},969059:function(e,t,n){n.d(t,{E:()=>u,U:()=>c});var r=n(184168),o=n(237257),i=n(499924);let[a,l]=(0,o.Z)(function(){let[e,t]=(0,i.useState)(null),n=(0,i.useCallback)(e=>{t(e)},[]),r=(0,i.useCallback)(()=>{t(null)},[]);return(0,i.useMemo)(()=>({openDialog:n,dialog:e,hideDialog:r}),[n,e,r])});function s(){let{dialog:e}=l();return(0,r.jsx)(r.Fragment,{children:e})}function c({children:e}){return(0,r.jsxs)(a,{children:[(0,r.jsx)(s,{}),e]})}function u(){let{openDialog:e,hideDialog:t}=l();return{openDialog:e,hideDialog:t}}s.displayName="Dialog",c.displayName="NotebookDialogProvider"},544005:function(e,t,n){n.d(t,{$:()=>r});let r=4},162102:function(e,t,n){n.d(t,{K7:()=>i,Q8:()=>o,hj:()=>r});let r=604800,o=15,i=3600},167813:function(e,t,n){n.d(t,{a:()=>r});let r="notebooks-files-browser"},437040:function(e,t,n){n.d(t,{$:()=>r});let r="notebooks-files-version-changes"},640273:function(e,t,n){n.d(t,{v:()=>o});var r=n(333811);function o(){let{IS_FEATURE_UI_ENABLE_NOTEBOOKS_CONFLICTS_RESOLUTION_VISIBLE:e}=(0,r._T)("FEATURE_UI_ENABLE_NOTEBOOKS_CONFLICTS_RESOLUTION");return e}},940830:function(e,t,n){n.d(t,{Q:()=>a});var r=n(814539),o=n(167813),i=n(437040);function a(){let{updateFetchId:e}=(0,r.m)(o.a),{updateFetchId:t}=(0,r.m)(i.$);return{refreshFileBrowser:e,refreshVersionChanges:t}}},396219:function(e,t,n){n.d(t,{L:()=>y});var r=n(332653),o=n(758566),i=n(315234),a=n(549979),l=n(98416),s=n(925819),c=n(26194),u=n(107370),d=n(98050),f=n(483883),E=n(984213);let p=()=>{let e=(0,f.KP)(),t=(0,E.N)();return(0,r.z)(async n=>{try{return await e(n)}catch(e){if(e.message.match(/failed paddingTrim/iu))return console.error(e),t.logError({notebookIdentifier:(0,c.m)(n.id),error:"failed paddingTrim"}),Promise.resolve("");throw e}})},y=()=>{let e=(0,a.U)(),t=(0,l.h)(),n=(0,u.iA)(),c=p(),{formatMessage:f}=(0,o.Z)(),E=(0,d.N)("UI_ENABLE_NOTEBOOK_FEATURE_0");return(0,r.z)(async(r,o,a)=>{let l=await e(r,o,a),{mainFile:u}=l,{rootLocation:d,kind:p,isLive:y}=(0,i.R)(l);if("checkouts"===p)return await t({id:r,role:o,secondaryRoles:a}),c({id:r,rootLocation:d,mainFile:u,throwRawError:E});if("versioned"===p){if(y)return c({id:r,rootLocation:d,mainFile:u,throwRawError:E});let e=await n({id:r,role:o,secondaryRoles:a});return c({id:r,rootLocation:(0,s.h)(e.liveVersionLocationUri,f({id:"Live version could not be created."})),mainFile:u,throwRawError:E})}throw Error(f({id:"Could not fetch notebook. Invalid or unsupported notebook location."}))})}},736332:function(e,t,n){n.d(t,{l:()=>u});var r=n(499924),o=n(337607),i=n(796723),a=n(896315),l=n(88640),s=n(775358),c=n(105242);let u=()=>{let{dataDiscoverRole:e,secondaryRoles:t}=(0,o.j)(),n=(0,a.m)([]).untracked.user,u=n.isUiSpecifiedSnowflakeFeatureEnabled("UI_ENABLE_NOTEBOOK_DISABLED_SPCS_EXPERIENCE_FOR_ADMINS"),d=(0,s.U)();return(0,r.useCallback)(async r=>{let o=await d(r,e,t),a=!o.runtimeName||o.runtimeName===i.U,s=(0,l.e)(e);if(u&&!a&&s)return{additionalProtoParams:[],activeInstanceJobId:null,activeNotebookInstancesNum:0,additionalMetadata:{}};let f=(await (0,c.jX)({userStore:n,fullNotebookIdentifier:r,role:e,secondaryRoles:t})).filter(e=>e.isInteractive&&(!e.serviceType||a&&"WAREHOUSE_INSTANCE_TYPE"===e.serviceType||!a&&"SERVICE_INSTANCE_TYPE"===e.serviceType)),E=f.length,p={additionalProtoParams:[],activeInstanceJobId:E>0?f[0].serviceId:null,activeNotebookInstancesNum:E,additionalMetadata:{}};return E>0&&(!a||n.isUiSpecifiedSnowflakeFeatureEnabled("_DP_UI_NOTEBOOK_GET_STREAMLIT_VERSION_FOR_WH_ACTIVE_INSTANCE"))&&(p.additionalMetadata.streamlitVersionOfAlreadyRunningInstance=f[0].streamlitVersion),a&&(p.additionalProtoParams.push("reconnectEnabled"),E>0&&p.additionalProtoParams.push(`reconnect-job-${f[0].serviceId}`)),p},[e,t,n,d,u])}},391926:function(e,t,n){n.d(t,{P:()=>a});var r=n(499924),o=n(896315),i=n(297251);let a=()=>{let{user:e}=(0,o.m)(["user"]);return(0,r.useCallback)(async({id:t,queryId:n,role:r,secondaryRoles:o,isHistoryQueryResultEnabled:a})=>(await e.api.query((0,i.Zl)({fullNotebookIdentifier:t,queryId:a?n:void 0}),{isInternal:!0,role:r,secondaryRoles:o,desc:"generate-notebook-token"})).rows[0][0],[e.api])}},481888:function(e,t,n){n.d(t,{W:()=>a});var r=n(499924),o=n(896315),i=n(297251);let a=()=>{let{user:e}=(0,o.m)(["user"]);return(0,r.useCallback)(async({id:t,role:n,secondaryRoles:r,isPrivatelink:o,isNotebookPrivateLinkEnabled:a})=>{let l=await e.api.query((0,i.eO)({fullNotebookIdentifier:t,isAccountUsingPrivateLink:o,isPrivatelinkEnabled:a}),(0,i.wZ)(n,r));return(0,i.Te)(l.rows[0][0])},[e.api])}},826800:function(e,t,n){n.d(t,{X:()=>l,n:()=>s});var r=n(499924),o=n(582049),i=n(146356);let a=r.createContext(""),l=a.Provider,s=e=>{let t=(0,r.useContext)(a);return(0,r.useMemo)(()=>(0,i.J)(e||t,o.M.NOTEBOOK),[e,t])}},851858:function(e,t,n){n.d(t,{w:()=>o});var r=n(98050);function o(){return(0,r.N)("UI_ENABLE_NOTEBOOK_SINGLE_IFRAME")}},707537:function(e,t,n){n.d(t,{P:()=>d});var r=n(499924),o=n(337607),i=n(434025),a=n(854544),l=n(705294),s=n(895458),c=n(826800),u=n(851858);function d(){let{dataDiscoverRole:e,secondaryRoles:t}=(0,o.j)(),n=(0,c.n)(),d=(0,i.P)(),{featureFlags:f}=(0,a.KP)().services,E=f.isEnabled("UI_ENABLE_NOTEBOOK_DISABLED_SPCS_EXPERIENCE_FOR_ADMINS"),p=(0,a.gV)().getBooleanValue("_DP_UI_NOTEBOOK_VALIDATE_NOTEBOOK_NAME"),{getNotebookEditorState:y,dispatchNotebookEditorStatesMap:b,connectToWebSocket:O,disconnectWebsocket:g,subscribe:v,setHeartbeatPollEndTimeUpdateCallback:S,getWebsocketConnection:m}=(0,s.PW)(),h=(0,u.w)(),{childFrame:_}=(0,l.KE)()||{},I=(0,r.useCallback)(r=>{h&&_?_.snowbooks.dispatchNotebookEditorState(r):b(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({id:n,role:e,secondaryRoles:t,queryId:null==d?void 0:d.queryId,isUiEnabledNotebookDisabledSpcsExperienceForAdmins:E,isNotebookNameValidationsEnabled:p},r))},[b,null==d?void 0:d.queryId,n,e,t,E,p,h,_]);return{editorState:y(n,e,t),dispatchNotebookEditorState:I,disconnectWebsocket:(0,r.useCallback)(r=>g(n,e,t,r),[g,n,e,t]),connectToWebSocket:(0,r.useCallback)(r=>O({id:n,role:e,secondaryRoles:t,urlInfo:r,queryId:null==d?void 0:d.queryId}),[O,null==d?void 0:d.queryId,n,e,t]),subscribe:v,setHeartbeatPollEndTimeUpdateCallback:S,getWebsocketConnection:(0,r.useCallback)(()=>m(n,e,t),[m,n,e,t])}}},267853:function(e,t,n){n.d(t,{U:()=>s});var r=n(499924),o=n(337607),i=n(814539),a=n(116868),l=n(297251);function s(){let e="get-notebook-history-file-url",{dataDiscoverRole:t,secondaryRoles:n}=(0,o.j)(),{executeQuery:s}=(0,a.U)(t,n,""),{fetchId:c}=(0,i.m)(e);return(0,r.useCallback)(async({notebookId:t,historyQueryId:n})=>{var r,o;let i=(0,l.zd)({fullNotebookIdentifier:t,queryId:n}),{tableData:a}=await s(i,e,c,!0);if(null===(o=a.rows)||void 0===o?void 0:null===(r=o[0])||void 0===r?void 0:r[0]){let e=JSON.parse(a.rows[0][0]);if(e.content)return e.content}return""},[e,s,c])}},984213:function(e,t,n){n.d(t,{N:()=>S});var r=n(51723),o=n(499924),i=n(26194),a=n(931878),l=n(641419),s=n(866777),c=n(392800),u=n(620149),d=n(328349),f=n(352567);function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function p(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let y="ui_response_success",b="ui_response_error",O="ui_click",g="ui_visit",v=new Set([c.AzE,c.tG2,c.Uzq,c.RSw,c.y10,c.ua8,c.MSS,c.ImF,c.lWk,c.zrf,c.d0B,c.Mhg,c.zGh,c.iJ8,c.UcJ,c.xAk,c.Ht5,c.vwS,c.wi4,c.dJY,c.MKg,c._KU,c.Hn4,c.YeT,c.cT3,c.aDE,c.QuQ,c.z_f,c.yzn,c.F1$,c.AK5,c.Ari,c.ZOT,c.$aC,c.DsD,c.mBO]);function S(){let{logEventToSnowflakeAndDatadog:e,markEventStart:t,measureEventDuration:n,markE2EEventStart:S,isMarkerSet:m,_getDurationsFromMarker:h}=(0,u.z)(),{logEvent:_}=(0,r.useTelemetry)(),I=(0,s.d)(),T=(0,o.useCallback)(t=>{t.data=p(E({},t.data),{isPrivateLink:I()}),v.has(t.event)&&a.A.isDisallowedDatadogEvent(t)?e(t):_(t)},[I,e,_]),R=(0,o.useCallback)(e=>{var t;T({event:c.ImF,type:"ui_performance",data:p(E({},e),{notebookRuntime:null!==(t=e.notebookRuntime)&&void 0!==t?t:"unknown"})})},[T]),C=(0,o.useCallback)((e,t)=>{var n,r;let o=t?h(t):{};T({event:c.lWk,type:y,data:p(E({},e,o),{notebookRuntime:null!==(n=e.notebookRuntime)&&void 0!==n?n:"unknown",sourceType:null!==(r=e.sourceType)&&void 0!==r?r:"unknown"})})},[T,h]),A=(0,o.useCallback)((e,t)=>{var n,r;let o=t?h(t):{};T({event:c.zrf,type:b,data:p(E({},e,o),{notebookRuntime:null!==(n=e.notebookRuntime)&&void 0!==n?n:"unknown",sourceType:null!==(r=e.sourceType)&&void 0!==r?r:"unknown"})})},[T,h]),N=(0,o.useCallback)((e,t)=>{var n;let r=t?h(t):{};T({event:c.ua8,type:y,data:p(E({},e,r),{notebookRuntime:null!==(n=e.notebookRuntime)&&void 0!==n?n:"unknown"})})},[T,h]),w=(0,o.useCallback)((e,t)=>{var n;let r=t?h(t):{};T({event:c.MSS,type:b,data:p(E({},e,r),{notebookRuntime:null!==(n=e.notebookRuntime)&&void 0!==n?n:"unknown"})})},[T,h]),L=(0,o.useCallback)((e,t)=>{var n;let r=t?h(t):{};T({event:c.AzE,type:g,data:p(E({},e,r),{notebookRuntime:null!==(n=e.notebookRuntime)&&void 0!==n?n:"unknown"})})},[T,h]),k=(0,o.useCallback)(e=>{T({event:c.G$y,type:b,data:e})},[T]),P=(0,o.useCallback)((e,t,n,r)=>{T({event:t,type:O,data:p(E({},n,r?h(r):{}),{notebookIdentifier:(0,i.m)(e)})})},[T,h]),D=(0,o.useCallback)((e,t,n,r,o)=>{let a=o?h(o):{};if(t===c.Hn4){let e=o?h(p(E({},o),{event:d.QX,isUserE2E:!0})):{};a.e2eDurationMs=e.e2eDurationMs}T({event:t,type:r?"ui_response_success":"ui_response_error",data:p(E({},n,a),{notebookIdentifier:(0,i.m)(e)})})},[T,h]),M=(0,o.useCallback)((e,t,n)=>{let r=n?h(n):{};T({event:c.Mhg,type:y,data:p(E({},t,r),{notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,i.m)(e)})})},[T,h]),j=(0,o.useCallback)((e,t)=>{T({event:c.zGh,type:y,data:p(E({},t),{notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,i.m)(e)})})},[T]),U=(0,o.useCallback)((e,t)=>{T({event:c.QtC,type:y,data:p(E({},t),{notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,i.m)(e)})})},[T]),x=(0,o.useCallback)((e,t,n)=>{let r=n?h(n):{},o=(0,f.ne)(t.reason);T({event:o?c.YeT:c.iJ8,type:o?b:y,data:p(E({},t,r),{error:t.error?t.error:o?t.reason:void 0,notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,i.m)(e)})})},[T,h]),F=(0,o.useCallback)((e,t,n)=>{let r=p(E({},t,n?h(n):{}),{notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,i.m)(e)});T({event:c.d0B,type:g,data:r}),t.isReconnect&&T({event:c.cT3,type:g,data:r})},[T,h]),G=(0,o.useCallback)((e,t,n)=>{let r=n?h(n):{};T({event:c.xAk,type:g,data:p(E({},t,r),{notebookIdentifier:(0,i.m)(e)})})},[h,T]),B=(0,o.useCallback)((e,t,n)=>{let r=n?h(n):{};T({event:c.Ht5,type:g,data:p(E({},t,r),{notebookIdentifier:(0,i.m)(e)})})},[h,T]),V=(0,o.useCallback)((e,t,n)=>{let r=n?h(n):{};T({event:c.vwS,type:g,data:p(E({},t,r),{notebookIdentifier:(0,i.m)(e)})})},[h,T]),H=(0,o.useCallback)((e,t,n)=>{let r=n?h(n):{};T({event:t.isReconnect?c.YeT:c.UcJ,type:b,data:p(E({},t,r),{notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,i.m)(e)})})},[T,h]),$=(0,o.useCallback)((e,t)=>{var n;let r=h({event:d.Sc,markers:[(0,i.m)(e),null!==(n=t.connectionId)&&void 0!==n?n:""]})||{};T({event:c.tG2,type:O,data:p(E({},t,r),{notebookRuntime:t.notebookRuntime,notebookIdentifier:(0,i.m)(e)})})},[h,T]),K=(0,o.useCallback)((e,n)=>{t(d.Ti,(0,i.m)(e),n.connectionId||""),T({event:c.Uzq,type:O,data:p(E({},n),{notebookRuntime:n.notebookRuntime||"unknown",notebookIdentifier:(0,i.m)(e)})})},[T,t]),Q=(0,o.useCallback)((e,t)=>{var n;let r=h({event:d.Ti,markers:[(0,i.m)(e),null!==(n=t.connectionId)&&void 0!==n?n:""]})||{};T({event:c.y10,type:y,data:p(E({},t,r),{notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,i.m)(e)})})},[h,T]),W=(0,o.useCallback)((e,t)=>{var n;let r=h({event:d.Ti,markers:[(0,i.m)(e),null!==(n=t.connectionId)&&void 0!==n?n:""]})||{};T({event:c.RSw,type:b,data:p(E({},t,r),{notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,i.m)(e)})})},[h,T]),Y=(0,o.useCallback)((e,t)=>{var n;let r=h({event:d.Ff,markers:[(0,i.m)(e),null!==(n=t.connectionId)&&void 0!==n?n:""]})||{};T({event:t.error?c.YeT:c.aDE,type:t.error?b:y,data:p(E({},t,r),{reconnectDurationMs:r.durationMs,notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,i.m)(e)})}),(null==r?void 0:r.durationMs)&&l.v.addDurationVital(c.qyZ,{startTime:Date.now()-r.durationMs,duration:r.durationMs})},[T,h]),Z=(0,o.useCallback)((e,t,n,r)=>{let o=r?h(r):{};T({event:c.wi4,type:null!=n?n:y,data:p(E({},t,o),{notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,i.m)(e)})})},[T,h]),z=(0,o.useCallback)((e,t,n,r)=>{let o=r?h(r):{};T({event:c.wi4,type:null!=n?n:b,data:p(E({},t,o),{notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,i.m)(e)})})},[T,h]),q=(0,o.useCallback)((e,t,n,r,o)=>{T({event:t,type:r?y:b,data:p(E({},n,o?h(o):{}),{notebookRuntime:n.notebookRuntime||"unknown",notebookIdentifier:(0,i.m)(e)})})},[T,h]),J=(0,o.useCallback)((e,t,n,r,o)=>{T({event:t,type:null!=r?r:y,data:p(E({},n,o?h(o):{}),{notebookRuntime:n.notebookRuntime||"unknown",notebookIdentifier:(0,i.m)(e)})})},[T,h]),X=(0,o.useCallback)(({notebookId:e,event:t,eventData:n,eventType:r,markerInfo:o})=>{T({event:t,type:r,data:p(E({},n,o?h(o):{}),{notebookRuntime:n.notebookRuntime||"unknown",notebookIdentifier:(0,i.m)(e)})})},[T,h]),ee=(0,o.useCallback)((e,t,n,r,o)=>{T({event:t,type:null!=r?r:y,data:p(E({},n,o?h(o):{}),{notebookRuntime:n.notebookRuntime||"unknown",notebookIdentifier:(0,i.m)(e)})})},[T,h]),et=(0,o.useCallback)((e,n,r)=>{t(d.nL,(0,i.m)(e),n.connectionId||"");let o=p(E({},n),{notebookRuntime:n.notebookRuntime||"unknown",notebookIdentifier:(0,i.m)(e)});T({event:c.QuQ,type:O,data:o})},[T,t]),en=(0,o.useCallback)((e,t)=>{var n;let r=h({event:d.nL,markers:[(0,i.m)(e),null!==(n=t.connectionId)&&void 0!==n?n:""]})||{};T({event:t.error?c.yzn:c.z_f,type:t.error?b:y,data:p(E({},t,r),{notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,i.m)(e)})})},[h,T]);return(0,o.useMemo)(()=>({logCreateStarted:R,logCreateSuccess:C,logCreateFailed:A,logRenameSuccess:N,logRenameFailed:w,logNotebookEditEvent:ee,logOpenDetailPage:L,logError:k,logCellUITelemetry:P,logCellRunTelemetry:D,logWebsocketConnected:M,logWebsocketDisconnected:x,logWebsocketControlMessage:j,logWebsocketStartConnecting:F,logWebsocketHeartbeat:G,logWebsocketHeartbeatStart:B,logWebsocketHeartbeatEnd:V,logWebsocketConnectError:H,logWebsocketConnectionStateChange:U,logSessionReconnectCompleted:Y,logSessionEnd:$,logSessionStarting:K,logSessionStartSuccess:Q,logSessionStartFailed:W,logKernelRestartBegin:et,logKernelRestartEnd:en,logRunRequested:Z,logRunRequestedError:z,logRunEvent:q,logIPYNBEvent:J,markEventStart:t,markE2EEventStart:S,measureEvent:n,isMarkerSet:m,logNotebookEvent:X}),[D,P,R,A,ee,C,k,J,L,w,N,q,Z,z,H,M,j,F,x,U,G,B,V,Y,$,K,Q,W,et,en,t,S,n,m,X])}},533953:function(e,t,n){n.d(t,{J0:()=>b,ZN:()=>p});var r=n(184168),o=n(984732),i=n(334394),a=n(797583),l=n(428522),s=n(777159),c=n(499924),u=n(758566),d=n(173584),f=n(707537);let E=[],p=e=>{E.push(e)},y=({reconnect:e})=>{var t;let{formatMessage:n}=(0,u.Z)(),p=n({id:"Cancel"}),y=n({id:"Restart session"}),b=n({id:"OK"}),O=null===(t=c.useContext(o.iL).current)||void 0===t?void 0:t.hideLayer,{editorState:g}=(0,f.P)(),v=(null==g?void 0:g.udfConnectionStatus)===d.Q.NotConnected,S=c.useCallback(()=>{null==O||O()},[O]),m=c.useCallback(()=>{null==O||O(),E.forEach(e=>{e.hide()}),E.length=0},[O]),h=c.useCallback(()=>{e(),E.forEach(e=>{e.hide()}),E.length=0,null==O||O()},[O,e]);return(0,r.jsxs)(i.Pb,{width:500,children:[(0,r.jsx)(i.fK,{children:n({id:"Session ended"})}),(0,r.jsx)(i.a7,{children:(0,r.jsx)(a.x,{color:l.Q2.secondaryTextColor,paddingLeft:8,paddingRight:8,children:n(v?{id:"There was an unexpected problem with the container, and your session ended. Do you want to restart your session?"}:{id:"There was an unexpected problem with the container, and your session ended. A new container will be in use after the session restarts."})})}),(0,r.jsx)(i.cN,{children:v?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.zx,{onClick:S,label:p,marginRight:8,children:p}),(0,r.jsx)(s.zx,{onClick:h,label:y,use:"primary",children:y})]}):(0,r.jsx)(s.zx,{onClick:m,label:b,use:"primary",children:b})})]})};y.displayName="RestartContainerDialog";let b=e=>{let[t,{showLayer:n}]=(0,i.Rh)((0,r.jsx)(y,{reconnect:e}));return c.useLayoutEffect(()=>()=>{},[n]),t}},227939:function(e,t,n){n.d(t,{H:()=>i});var r=n(130092);let o={debug:10,info:20,error:30,reportError:40},i={cacheFiller:new class{constructor(e,t){this.debug=(e,t)=>{if(this.logLevel<=o.debug){let n=null!=t?JSON.stringify(t):"";console.debug(this.category+e,n)}},this.error=(e,t)=>{if(this.logLevel<=o.error){let n=null!=t?JSON.stringify(t):"";console.error(this.category+e,n)}},this.info=(e,t)=>{if(this.logLevel<=o.info){let n=null!=t?JSON.stringify(t):"";console.info(this.category+e,n)}},this.reportError=(e,t,n)=>{this.logLevel<=o.reportError&&(0,r.k)(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({domain:"notebooks",loggingCategory:this.rawCategory,type:e},n))},this.assertOrReport=(e,t,n,r)=>{e||this.reportError(t,n,r)},this.logLevel=null!=t?t:o.reportError,this.rawCategory=null!=e?e:"NOTEBOOK",this.category="["+this.rawCategory+"] "}}("CACHE_FILLER",o.error)}},705294:function(e,t,n){n.d(t,{KE:()=>l,QI:()=>a});var r=n(184168),o=n(499924);let i=(0,o.createContext)(null),a=e=>{var{children:t}=e,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["children"]);let[a,l]=(0,o.useState)(null),[s,c]=(0,o.useState)(n.methods||null),[u,d]=(0,o.useState)(n.iframeSrcProps||null),f=(0,o.useMemo)(()=>({methods:s,childFrame:a,setChildFrame:l,iframeSrcProps:u,setIframeSrcProps:d,setMethods:c}),[s,a,l,u,d,c]);return(0,r.jsx)(i.Provider,{value:f,children:t})};a.displayName="NotebookIframeProvider";let l=()=>{let e=(0,o.useContext)(i);return e||null}},877814:function(e,t,n){n.d(t,{JM:()=>s,VN:()=>l,ZF:()=>c,k$:()=>u});var r=n(750129),o=n(237257),i=n(526014),a=n(499924);let[l,s,c,u]=(0,o.Z)(function({parentOrigin:e}){let t=(0,a.useRef)(null),n=(0,a.useRef)(null),[o,l]=(0,a.useState)(null),[s,c]=(0,a.useState)(void 0),[u,d]=(0,a.useState)(null);return(0,a.useEffect)(()=>{n.current=u},[u]),(0,a.useEffect)(()=>{null===t.current&&(t.current=(0,i.y1)({parentOrigin:e,methods:{snowbooks:{syncState:e=>{c(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},e))},dispatchNotebookEditorState:e=>{var t;null===(t=n.current)||void 0===t||t.call(n,e)}}},debug:!1}),t.current.promise.then(e=>{l(e)}).catch(e=>{r.log.error("[Snowbooks] Error connecting to parent:",e)}))},[e]),(0,a.useEffect)(()=>()=>{var e;null===(e=t.current)||void 0===e||e.destroy(),l(null)},[]),{snowbooksParent:o,snowbooksState:s,setDispatchNotebookEditorState:d}},e=>e.snowbooksParent,e=>e.snowbooksState,e=>e.setDispatchNotebookEditorState)},775358:function(e,t,n){n.d(t,{U:()=>l});var r=n(549979),o=n(877814),i=n(832898);function a(){let e=(0,o.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.describeFileBasedEntity}function l(){return(0,i.U)(r.U,a)()}},739090:function(e,t,n){n.d(t,{Z:()=>s});var r=n(535250),o=n(796723),i=n(877814),a=n(832898);function l(){let e=(0,i.ZF)();return!!(null==e?void 0:e.runtimeName)&&e.runtimeName!==o.U}function s(e){return(0,a.U)(r.Z,l)(e)}},777600:function(e,t,n){n.d(t,{L:()=>l});var r=n(396219),o=n(877814),i=n(832898);function a(){let e=(0,o.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.checkoutOrAddVersionAndRead}function l(){return(0,i.U)(r.L,a)()}},832898:function(e,t,n){n.d(t,{U:()=>i});var r=n(499924),o=n(851858);function i(e,t){let n=(0,r.useRef)(e),i=(0,r.useRef)(!1),a=(0,o.w)();return window.__SNOWSIGHT_NOTEBOOK_PARENT_ORIGIN&&a&&!i.current&&(i.current=!0,n.current=t),n.current}},895458:function(e,t,n){n.d(t,{Hx:()=>th,PW:()=>tv,QE:()=>tS});var r=n(184168),o=n(332653),i=n(676898),a=n(561843),l=n(237257),s=n(269782),c=n.n(s),u=n(499924),d=n(758566),f=n(657321),E=n(251233),p=n(26194),y=n(666628),b=n(896315),O=n(866777),g=n(434841),v=n(333811),S=n(775358),m=n(641419),h=n(763063),_=n(559673),I=n(736889),T=n(188996),R=n(14045),C=n(334394),A=n(866154),N=n(797583),w=n(428522),L=n(836954),k=n(777159),P=n(550524),D=n(29174),M=n(278257),j=n(100467),U=n(582049),x=n(740238);let F=({hide:e,fullNotebookIdentifier:t})=>{var n,o;let i=(0,u.useRef)(null),a=(0,M.fo)(),l=a.useGetSkippableNoThrow(t,j.Y.describe),s=(null==l?void 0:null===(o=l.result)||void 0===o?void 0:null===(n=o.columns[0])||void 0===n?void 0:n.externalAccessIntegrations)||[],[c,d]=a.useHydratedListNoThrow(U.M.EXTERNAL_ACCESS_INTEGRATION,j.Y.show,void 0);if(null==c||(0,x.M)(d)||(0,x.M)(l))return(0,r.jsx)(G,{});let f={};for(let e of c)f[e.name]=e;let E=s.filter(e=>{var t;return!(null===(t=f[e])||void 0===t?void 0:t.enabled)});return(0,r.jsxs)(C.Vq,{manuallyShown:!0,onHide:e,causalElement:i,children:[(0,r.jsx)(C.fK,{children:(0,r.jsx)(D.Z,{id:"Can't start Notebook"})}),(0,r.jsxs)(C.a7,{children:[(0,r.jsx)(A.n,{marginBottom:24,children:(0,r.jsx)(N.x,{color:w.Q2.secondaryTextColor,children:(0,r.jsx)(D.Z,{id:"There was a problem attaching one or more external access integrations to this notebook:"})})}),(0,r.jsx)("ul",{children:E.map(e=>(0,r.jsx)("li",{children:e},e))})]}),(0,r.jsx)(C.cN,{children:(0,r.jsxs)(L.g,{children:[(0,r.jsx)(k.zx,{onClick:e,children:(0,r.jsx)(D.Z,{id:"Close"})}),(0,r.jsx)(k.zx,{use:"primary",onClick:async function(){await a.alter(t,{externalAccessIntegrations:s.filter(e=>!E.includes(e))}),e()},marginLeft:8,children:(0,r.jsx)(D.Z,{id:"Remove unavailable integrations"})})]})})]})};function G(){let e=(0,u.useRef)(null);return(0,r.jsxs)(C.Vq,{manuallyShown:!0,causalElement:e,children:[(0,r.jsx)(C.fK,{}),(0,r.jsx)(C.a7,{display:"flex",justifyContent:"center",alignItems:"center",children:(0,r.jsx)(P.T,{})}),(0,r.jsx)(C.cN,{})]})}F.displayName="NotebookExternalAccessIntegrationErrorDialog",G.displayName="LoadingDialog";var B=n(969059),V=n(162102),H=n(851858),$=n(888541),K=n(98050),Q=n(640961),W=n(877814),Y=n(832898);function Z(){let e=(0,W.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.refreshLastUpdatedInfo}var z=n(777600),q=n(267853);function J(){let e=(0,W.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.getNotebookHistoryFile}var X=n(483883);function ee(){let e=(0,W.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.writeToStageByObject}var et=n(361774),en=n(331119);let er=()=>{let e=(0,Y.U)(q.U,J)(),{user:t}=(0,b.m)(["user"]),n=(0,z.L)(),r=t.isUiSpecifiedSnowflakeFeatureEnabled("UI_ENABLE_APEX_FEATURE_32"),a=t.isUiSpecifiedSnowflakeFeatureEnabled("UI_ENABLE_NOTEBOOK_EXECUTION_HISTORY_FILE_FALLBACK"),l=t.isUiSpecifiedSnowflakeFeatureEnabled("FEATURE_UI_ENABLE_NOTEBOOKS_SCHEDULING"),s=t.isUiSpecifiedSnowflakeFeatureEnabled("UI_ENABLE_NOTEBOOK_FEATURE_10");return(0,o.z)(async(t,o)=>{let{id:c,role:u,secondaryRoles:d,queryId:f}=t;try{let t=f?await e({notebookId:c,historyQueryId:f}):await n(c,u,d);f&&!t&&a&&(t=await n(c,u,d)),o({type:"LOAD_SUCCEEDED",id:c,role:u,secondaryRoles:d,error:null,result:t,enforceUUIDAsCellId:r,enableSafeCellIdGeneration:l,isCellNameAndVariableConflictDetectionEnabled:s})}catch(e){(0,i.w)({content:e.message,type:"alert",autoDismiss:!1}),o({type:"LOAD_FAILED",id:c,role:u,secondaryRoles:d,error:e})}})},eo=()=>{let e=(0,Y.U)(X.Nk,ee)(),t=(0,Y.U)(Q._,Z)(),n=(0,S.U)(),{localTimeToServerTime:r}=(0,en.h)(),a=(0,K.N)("UI_ENABLE_NOTEBOOK_FEATURE_24"),l=(0,K.N)("UI_ENABLE_NOTEBOOK_FEATURE_0"),s=(0,et.d)(),c=(0,b.m)(["user"]);return(0,o.z)(async(o,u)=>{var d,f,E,p,y,b,O,g,v;let S,m;let{id:h,role:_,secondaryRoles:I,content:T,lastEditStatus:R,isSourceCodeChange:C,lastestNotebookLoadTime:A,currentNotebookViewId:N}=o,w=T,L="",k="canSave";try{if(a){let{urlId:e}=await n(h,_,I);L=e;let{checkStatus:t,lastEditStatusRetrieved:r}=await s({id:h,urlId:e,currentNotebookViewId:N,lastEditStatusInMemory:R,lastestNotebookLoadTime:A});k=t,m=null!=r?r:void 0,S=null!==(d=null!=r?r:R)&&void 0!==d?d:void 0}if("canSave"!==k){if(!C){u({type:"SAVE_SUCCEEDED",id:h,role:_,secondaryRoles:I,error:null,editStatusToUpdate:m,saveDone:!1,isSourceCodeChange:C});return}u({type:"SAVE_FAILED",id:h,role:_,secondaryRoles:I,error:null,editStatusToUpdate:m,isSourceCodeChange:C,saveEligibilityCheckStatus:k,editingUserId:null!==(f=null==S?void 0:S.authorId)&&void 0!==f?f:"",editingUserName:null!==(E=null==S?void 0:S.authorName)&&void 0!==E?E:"",editingUserEmail:null==S?void 0:S.authorEmail,lastEditTime:null==S?void 0:S.lastEditTime});return}if(a&&C){let e=Date.now(),t=r(e);m={notebookId:L,authorId:null!==(b=c.user.currentUserId)&&void 0!==b?b:"",authorName:null!==(O=null===(p=c.user.currentUser)||void 0===p?void 0:p.username)&&void 0!==O?O:"",authorEmail:null===(y=c.user.currentUser)||void 0===y?void 0:y.email,sessionId:N,lastEditTime:t};let n=JSON.parse(T);n.metadata.lastEditStatus=m,w=JSON.stringify(n,null,1),S=m}await e(h,_,I,w,!0),u({type:"SAVE_SUCCEEDED",id:h,role:_,secondaryRoles:I,error:null,editStatusToUpdate:m,saveDone:!0,isSourceCodeChange:C}),await t(h,_,I)}catch(e){if(l&&(0,$.e)(e)){u({type:"NETWORK_CONDITION_CHANGED",id:h,role:_,secondaryRoles:I,onlineToSnowflakeServer:!1});return}if(a&&!C){u({type:"SAVE_SUCCEEDED",id:h,role:_,secondaryRoles:I,error:null,editStatusToUpdate:m,saveDone:!1,isSourceCodeChange:C});return}(0,i.w)({content:e.message,type:"alert"}),u({type:"SAVE_FAILED",id:h,role:_,secondaryRoles:I,error:e,editStatusToUpdate:m,editingUserId:null!==(g=null==S?void 0:S.authorId)&&void 0!==g?g:"",editingUserName:null!==(v=null==S?void 0:S.authorName)&&void 0!==v?v:"",editingUserEmail:null==S?void 0:S.authorEmail,lastEditTime:null==S?void 0:S.lastEditTime,isSourceCodeChange:C})}})},ei=()=>{let e=er(),t=eo();return(0,u.useMemo)(()=>({readFromStage:e,writeToStage:t}),[e,t])};var ea=n(984213),el=n(736332);function es(){let e=(0,W.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.createWebsocketProtoParams}var ec=n(391926);function eu(){let e=(0,W.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.fetchNotebookAuthToken}var ed=n(481888);function ef(){let e=(0,W.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.fetchNotebookUrlInfo}function eE(){let e=(0,W.JM)();return(null==e?void 0:e.snowbooks)?t=>{var n,r,o;if(!t.notebookState)return;let i=(r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},t),o=o={notebookState:null===(n=t.notebookState)||void 0===n?void 0:n.toJson()},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}),r);e.snowbooks.reifyNotebookEditorState(i)}:()=>{}}function ep(){return()=>{}}let ey=()=>(0,Y.U)(ep,eE)();var eb=n(328349),eO=n(173584),eg=n(713579),ev=n(130092),eS=n(392800),em=n(873807),eh=n(491742),e_=n(708048);let eI=e=>new eh.L().add("CALL SYSTEM$LIST_RUNNING_NOTEBOOK_INSTANCES(?)",(0,e_.M)(e)).toQuery(),eT=e=>{let[[t]]=e.rows;return JSON.parse(t)},eR=async(e,t)=>{let{fullNotebookIdentifier:n,role:r,secondaryRoles:o}=t,i=eI(n);return eT(await e.api.query(i,{role:r,secondaryRoles:o,isInternal:!0,desc:"system-list-running-notebook-instance"}))};var eC=n(105242);async function eA(e,t,n,r,o,i){try{if(e){let e=await eN(t,n,r,o,i);e&&(await (0,eC.Dy)(t,{fullNotebookIdentifier:n,role:r,secondaryRoles:o,serviceIdentifier:e}),i({notebookId:n,event:eS.fA1,eventType:em.fs,eventData:{}}))}else await (0,eC.HT)(t,{fullNotebookIdentifier:n,role:r,secondaryRoles:o}),i({notebookId:n,event:eS.jK4,eventType:em.fs,eventData:{}})}catch(r){let t=`SPCS Notebooks: Failed to delete notebook instance. ${r}`;(0,ev.k)(t,{fullNotebookIdentifier:n,isDeleteOnlyRunningInteractiveNotebookEnabled:e}),i({notebookId:n,event:eS.XTd,eventType:em.gK,eventData:{error:t}})}}async function eN(e,t,n,r,o){let i=(await eR(e,{fullNotebookIdentifier:t,role:n,secondaryRoles:r})).filter(e=>e.isInteractive&&e.serviceId).map(e=>e.serviceId);return 0===i.length?((0,ev.k)("SPCS Notebooks: No running service instance ID found",{fullNotebookIdentifier:t}),o({notebookId:t,event:eS.phx,eventType:em.gK,eventData:{}}),null):(i.length>1&&((0,ev.k)("SPCS Notebooks: Found multiple running service instance IDs for interactive notebook.",{fullNotebookIdentifier:t}),o({notebookId:t,event:eS.SKU,eventType:em.gK,eventData:{}})),i[0])}var ew=n(89357),eL=n(499269),ek=n(229708);let eP=["SAVE_SUCCEEDED","SAVE_FAILED","START_NOTEBOOK","RUN_NOTEBOOK","CANCEL_EXECUTION","UPDATE_PACKAGE"],eD=e=>!!eP.includes(e.type)&&("RUN_NOTEBOOK"!==e.type&&"START_NOTEBOOK"!==e.type||!1!==e.userTriggered);var eM=n(623520),ej=n(60018),eU=n(452431);let ex=()=>(0,r.jsx)(D.Z,{id:"Cant start container notebooks using the ACCOUNTADMIN, SECURITYADMIN, or ORGADMIN roles. Switch your role by clicking your profile icon in the left navigation menu, and then try again."});var eF=n(88640),eG=n(95238);function eB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function eV(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function eH(e,t,n){var o,i,a;let l=e.notebookState,s=e.udfConnectionStatus,c="spcs"===e.notebookRuntime,u=(0,eF.e)(t.role)&&t.isUiEnabledNotebookDisabledSpcsExperienceForAdmins&&c,d=t.isNotebookNameValidationsEnabled&&c;if(!l){console.debug("Notebook state is not yet loaded");return}if(u){n({type:"pushNotification",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,notificationProps:{type:"alert",content:ex(),autoDismiss:!1}});return}if(d){let e=function(e){switch(e){case"valid":return null;case"empty":return(0,r.jsx)(D.Z,{id:"Missing"});case"tooLong":return(0,r.jsx)(D.Z,{id:"Couldnt start notebook. Notebook name exceeds maximum length of 255 characters"});case"invalidCharacters":return(0,r.jsx)(D.Z,{id:"Couldnt start notebook. Notebook name can only include letters, numbers, spaces, underscores, -, $, and :"})}}((0,eG.V)(t.id.name));if(e){n({type:"pushNotification",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,notificationProps:{type:"alert",content:e,autoDismiss:!1}});return}}if((null===(o=e.sessionLifecycleState)||void 0===o?void 0:o.isReplayingMessagesAfterReconnect)||s!==eO.Q.Connecting&&s!==eO.Q.Reconnecting)s===eO.Q.NotConnected&&(e.udfConnectionStatus=eO.Q.Connecting,e.sessionLifecycleState=eV(eB({},null!==(a=e.sessionLifecycleState)&&void 0!==a?a:{}),{sessionStartTimeMs:Date.now(),sessionEndTimeMs:void 0,sessionEndReason:void 0}));else{(null===(i=e.sessionLifecycleState)||void 0===i?void 0:i.sessionEndReason)&&(e.sessionLifecycleState.sessionEndReason=void 0);return}"running"!==e.runStatus&&(e.runStatus="waiting");let f=l.getCellsProto().filter(e=>"markdown"!==e.type);t.clearCodeResults&&(f=f.map(e=>eV(eB({},e),{code:""}))),n({id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,type:"runCells",cellRunType:t.cellRunType,runCellId:t.runCellId,clientState:t.clientState,cells:f,eventType:t.eventType,notebookRuntime:e.notebookRuntime})}function e$(e,t,n){var r,o,i,a,l;let s=e.notebookState;if(!s)return;let c=null===(r=e.notebookState)||void 0===r?void 0:r.data.cells,u=(0,eU.i)(null!=c?c:[]),d=(0,ej.B)(t.cellType,u),f=s.addCell(t.index,d);return e.notebookState=f,e.selectedCell=d.id,n({type:"writeToStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,content:f.toJson(),currentNotebookViewId:null!==(i=null===(o=e.sessionLifecycleState)||void 0===o?void 0:o.notebookViewId)&&void 0!==i?i:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!==(a=e.lastestNotebookLoadTime)&&void 0!==a?a:0,lastEditStatus:null!==(l=e.notebookState.getLastEditStatus())&&void 0!==l?l:null}),n({type:"logNotebookCellUITelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:eS.JW3,data:{cellId:d.id,cellIndex:t.index,cellType:t.cellType}}),f}var eK=n(359701),eQ=n(764629),eW=n(925819),eY=n(112982);let eZ=()=>(0,r.jsx)(D.Z,{id:"Kernel restarted. Your notebook is ready to run."});var ez=n(533953),eq=n(750129),eJ=n(351388),eX=n(336766);let e0={UPDATE_RESULT:(e,t)=>{let n=t.cellId,r=e.notebookState;if(!r)return;let o=r.getCellResult(n);if(!o)return;let i=r,a=o.runId,l=o.tempRunId;if(!l||l!==a){if("running"===o.status.cellRunStatus)i=i.updateCellResult(n,{message:[t.result]});else{let e=o.message;i=i.updateCellResult(n,{message:[...e,t.result]})}}let s=o.status.cellRunStatus;(0,eX.be)(s)?(0,ev.k)("Received forward message for a cell already done",{cellId:n}):i=i.updateCellStatus(n,{cellRunStatus:(0,eJ.G)(t.result)?"unfinishedError":"populatingResults"}),e.notebookState=i},CELL_RUN_STARTED:(e,t)=>{var n,r,o,i,a,l;let s=t.cellRunInfo.cellId,c=e.notebookState;if(!c||!s)return;let u=c.updateCellResult(s,{tempSelfContentHash:null!==(r=t.cellRunInfo.selfContentHash)&&void 0!==r?r:void 0,tempFullContentHash:null!==(o=t.cellRunInfo.fullContentHash)&&void 0!==o?o:void 0,tempRunId:null!==(i=t.cellRunInfo.runId)&&void 0!==i?i:void 0,tempParentExecutionId:null!==(a=t.cellRunInfo.parentExecutionId)&&void 0!==a?a:void 0,tempExecutionId:null!==(l=t.cellRunInfo.executionId)&&void 0!==l?l:void 0});e.notebookState=u.updateCellStatus(s,{cellRunStatus:"running",startedAt:t.cellRunInfo.startedAt?"number"==typeof t.cellRunInfo.startedAt?t.cellRunInfo.startedAt:null===(n=t.cellRunInfo.startedAt)||void 0===n?void 0:n.toNumber():void 0,endAt:void 0,pushdownQueries:[]})},CELL_RUN_FINISHED:(e,t)=>{let{cellId:n}=t,r=e.notebookState;if(!r)return;let o=r.getCellResult(n);if(!o)return;let i=r;"error"!==t.state&&(i=(i=i.updateCellResult(n,{selfContentHash:o.tempSelfContentHash,fullContentHash:o.tempFullContentHash,runId:o.tempRunId,parentExecutionId:o.tempParentExecutionId,executionId:o.tempExecutionId,tempSelfContentHash:void 0,tempFullContentHash:void 0,tempRunId:void 0,tempParentExecutionId:void 0,tempExecutionId:void 0})).updatePredictExecutionId(n)),"running"===o.status.cellRunStatus&&(i=i.updateCellResult(n,{message:[]})),i="unfinishedError"===o.status.cellRunStatus?i.updateCellStatus(n,{cellRunStatus:"idle"===t.state?"idle":"error"}):i.updateCellStatus(n,{cellRunStatus:"errorStopRunning"===t.state?"error":t.state}),0!==t.timestamp&&(i=i.updateCellStatus(n,{endAt:t.timestamp})),e.notebookState=i},NOTEBOOK_RUN_FINISHED:(e,t)=>{let n=e.notebookState;if(!n)return;let r=n;for(let e of n.data.cells)("running"===e.result.status.cellRunStatus||"populatingResults"===e.result.status.cellRunStatus)&&(r=r.updateCellStatus(e.id,{cellRunStatus:"error"})),"waiting"===e.result.status.cellRunStatus&&(3===t.state||4===t.state)&&(r=r.updateCellStatus(e.id,{cellRunStatus:e.result.status.cellRunStatusBeforeExecution}));e.notebookState=r,e.runStatus="idle"},NOTEBOOK_RUN_STARTED:(e,t)=>{var n,r,o,i;e.runStatus="running",e.cacheStatus="loaded";let a=e.notebookState;if(!a)return;let l=a;for(let e of t.cellIdsToRun)l=l.updateCellStatus(e,{cellRunStatus:"waiting",cellRunStatusBeforeExecution:null!==(r=null===(n=l.getCellById(e))||void 0===n?void 0:n.result.status.cellRunStatus)&&void 0!==r?r:"neverRun"});e.notebookState=l,e.udfConnectionStatus!==eO.Q.Connected&&(e.udfConnectionStatus=eO.Q.Connected,e.sessionLifecycleState=(o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},e.sessionLifecycleState),i=i={sessionEndReason:void 0},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))}),o)),e.bottomBarState=void 0},NOTEBOOK_CACHE_STARTED:e=>{e.cacheStatus="fetching"},NOTEBOOK_CACHE_DONE:e=>{e.cacheStatus="loaded"},NOTEBOOK_CELL_STATUS:(e,t)=>{let n=e.notebookState;if(!n)return;let r=t.cellStatus.cellId,o=n.getCellById(r);if(o){if((0,eK.ro)(o))e.notebookState=n.updateCellStatus(t.cellStatus.cellId,{pushdownQueries:[]});else if((0,eK.XN)(o)){var i,a;e.notebookState=n.updateCellStatus(t.cellStatus.cellId,{pushdownQueries:null!==(a=null===(i=t.cellStatus.sqlCellStatus)||void 0===i?void 0:i.pushdownQueries)&&void 0!==a?a:[]})}}},NOTEBOOK_UPDATE_RESOURCE_USAGE:(e,t)=>{var n;e.resourceStats=null===(n=t.resourceUtilization)||void 0===n?void 0:n.resourceStats}},e1=(e,t,n)=>{let r=e0[t.type];void 0!==r&&r(e,t,n)};function e9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function e4(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}var e2=n(352567);function e3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function e5(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function e8({notebookViewId:e}){return{loadStatus:"notLoaded",notebookState:null,runStatus:"notStarted",websocketStatus:{status:eO.Q.NotConnected,error:null},selectedCell:void 0,cacheStatus:"notLoaded",cacheLoadId:void 0,udfConnectionStatus:eO.Q.NotConnected,sessionLifecycleState:{notebookViewId:null!=e?e:E.Z(),onlineToSnowflakeServer:!0},urlId:"",resultHeightMap:{}}}function e6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}let e7=e6({START_LOADING:(e,t,n)=>{n({type:"readFromStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,queryId:t.queryId}),e.loadStatus="loading",n({type:"logNotebookIPYNBTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:eS.weH,eventType:"ui_visit"})},LOAD_SUCCEEDED:(e,t,n)=>{try{var r,o;e.notebookState=eQ.v.fromJson(t.result,{enforceUUIDAsCellId:null!==(r=t.enforceUUIDAsCellId)&&void 0!==r&&r,enableSafeCellIdGeneration:null!==(o=t.enableSafeCellIdGeneration)&&void 0!==o&&o,isCellNameAndVariableConflictDetectionEnabled:t.isCellNameAndVariableConflictDetectionEnabled}),e.loadStatus="loaded",e.lastestNotebookLoadTime=Date.now(),n({type:"logNotebookIPYNBTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:eS.j4e,eventType:"ui_response_success"})}catch(r){e.error=r,e.loadStatus="error",n({type:"logNotebookIPYNBTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:eS.vJg,eventType:"ui_response_error",data:{error:null==r?void 0:r.message}})}},LOAD_FAILED:(e,t,n)=>{var r;e.error=t.error,e.loadStatus="error",n({type:"logNotebookIPYNBTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:eS.vJg,eventType:"ui_response_error",data:{error:null===(r=t.error)||void 0===r?void 0:r.message}})},START_SAVING:(e,t,n)=>{var r,o,i,a;let l=e.notebookState;"loaded"===e.loadStatus&&l&&n({type:"writeToStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,content:l.toJson(),currentNotebookViewId:null!==(o=null===(r=e.sessionLifecycleState)||void 0===r?void 0:r.notebookViewId)&&void 0!==o?o:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!==(i=e.lastestNotebookLoadTime)&&void 0!==i?i:0,lastEditStatus:null!==(a=l.getLastEditStatus())&&void 0!==a?a:null})},SAVE_SUCCEEDED:function(e,t,n){let{editStatusToUpdate:r,saveDone:o,isSourceCodeChange:i}=t;o&&(e.lastestNotebookLoadTime=Date.now()),(null==e?void 0:e.notebookState)&&r&&(e.notebookState=e.notebookState.updateLastEditStatus(r)),n({type:"logNotebookEditTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:eS.ZOT,eventType:"ui_response_success",data:{currentEditingUser:null==r?void 0:r.authorId,lastEditTime:null==r?void 0:r.lastEditTime,saveEligibilityCheckStatus:"canSave",saveDone:o,isSourceCodeChange:i}})},SAVE_FAILED:function(e,t,n){var r;e.error=t.error;let{editStatusToUpdate:o,saveEligibilityCheckStatus:i,editingUserId:a,editingUserName:l,editingUserEmail:s,lastEditTime:c,isSourceCodeChange:u}=t;(null==e?void 0:e.notebookState)&&o&&(e.notebookState=e.notebookState.updateLastEditStatus(o)),i&&"canSave"!==i&&n({type:"onNotebookConcurrentEditAlert",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,saveEligibilityCheckStatus:i,editingUserName:null!=l?l:"",editingUserEmail:s}),n({type:"logNotebookEditTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:eS.Ari,eventType:"ui_response_error",error:i&&"canSave"!==i?i:String(null!==(r=t.error)&&void 0!==r?r:""),data:{currentEditingUser:a,lastEditTime:c,saveEligibilityCheckStatus:i,isSourceCodeChange:u}})},UPDATE_NOTEBOOK_RUNTIME:function(e,t){e.notebookRuntime=t.notebookRuntime},SET_URL_ID_AND_RESULT_HEIGHT_MAP:function(e,t){e.urlId=t.urlId,e.resultHeightMap=t.resultHeightMap},FETCH_RESOURCE_USAGE:function(e,t,n){let{id:r,role:o,secondaryRoles:i}=t;e.udfConnectionStatus===eO.Q.Connected&&n({type:"fetchResourceUsage",id:r,role:o,secondaryRoles:i})},SET_BOTTOM_BAR_STATE:function(e,t){var n;t.expectedPrevType&&(null===(n=e.bottomBarState)||void 0===n?void 0:n.type)!==t.expectedPrevType||(e.bottomBarState=t.bottomBarState)},UPDATE_EDIT_STATUS:function(e,t){let{editStatusToUpdate:n}=t;(null==e?void 0:e.notebookState)&&n&&(e.notebookState=e.notebookState.updateLastEditStatus(n))},ADD_CELL:e$,MODIFIED_CELL:function(e,t,n){let r=t.writeToStage,o=e.notebookState;if(!o)return;let i=o.modifyCell(t.index,t.content);if(e.notebookState=i,r){var a,l,s,c;n({type:"writeToStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,content:i.toJson(),currentNotebookViewId:null!==(l=null===(a=e.sessionLifecycleState)||void 0===a?void 0:a.notebookViewId)&&void 0!==l?l:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!==(s=e.lastestNotebookLoadTime)&&void 0!==s?s:0,lastEditStatus:null!==(c=e.notebookState.getLastEditStatus())&&void 0!==c?c:null})}return i},ADD_AND_MODIFY_CELL:function(e,t,n){var r,o,i,a,l,s,c;let u=e.notebookState;if(!u)return;let d=e.selectedCell,f=u.data.cells.findIndex(e=>e.id===d),E=-1===f?u.data.cells.length:f+1,p=null===(r=e.notebookState)||void 0===r?void 0:r.data.cells,y=(0,eU.i)(null!=p?p:[]),b=(0,ej.B)(t.cellType,y,t.content),O=u.addCell(E,b);e.notebookState=O,e.selectedCell=b.id,n({type:"writeToStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,content:O.toJson(),currentNotebookViewId:null!==(i=null===(o=e.sessionLifecycleState)||void 0===o?void 0:o.notebookViewId)&&void 0!==i?i:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!==(a=e.lastestNotebookLoadTime)&&void 0!==a?a:0,lastEditStatus:null!==(l=e.notebookState.getLastEditStatus())&&void 0!==l?l:null}),n({type:"logNotebookCellUITelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:eS.JW3,data:{cellId:b.id,cellIndex:E,cellType:t.cellType}}),t.runCellAfterCreation&&eH(e,(s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},t),c=c={type:"RUN_NOTEBOOK",runCellId:b.id,cellRunType:0,userTriggered:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(c)).forEach(function(e){Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(c,e))}),s),n)},CELL_LANGUAGE:(e,t,n)=>{var r,o,i,a;let l=e.notebookState;if(!l)return;let s=l.setLanguage(t.index,t.language);e.notebookState=s,n({type:"writeToStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,content:s.toJson(),currentNotebookViewId:null!==(o=null===(r=e.sessionLifecycleState)||void 0===r?void 0:r.notebookViewId)&&void 0!==o?o:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!==(i=e.lastestNotebookLoadTime)&&void 0!==i?i:0,lastEditStatus:null!==(a=e.notebookState.getLastEditStatus())&&void 0!==a?a:null})},CELL_CONTENT_STATE:(e,t)=>{let n=e.notebookState;n&&(e.notebookState=n.setContentState(t.index,t.contentState))},CELL_RESULT_HEIGHT:(e,t,n)=>{e.resultHeightMap[t.cellId]=t.resultHeight,t.shouldSave&&n({type:"saveResultHeight",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,urlId:e.urlId,cellId:t.cellId,resultHeight:t.resultHeight})},REMOVE_CELL:(e,t,n)=>{var r,o,i,a;let l=e.notebookState;if(!l)return;let s=l.data.cells[t.index],c=s.id,u=(0,eK.DA)(s),d=l.removeCell(t.index);e.notebookState=d;let f=Math.min(d.data.cells.length-1,t.index);e.selectedCell=f>=0?d.data.cells[f].id:void 0,n({type:"writeToStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,content:d.toJson(),currentNotebookViewId:null!==(o=null===(r=e.sessionLifecycleState)||void 0===r?void 0:r.notebookViewId)&&void 0!==o?o:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!==(i=e.lastestNotebookLoadTime)&&void 0!==i?i:0,lastEditStatus:null!==(a=e.notebookState.getLastEditStatus())&&void 0!==a?a:null}),n({type:"logNotebookCellUITelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:eS.Q_$,data:{cellId:c,cellIndex:t.index,cellType:u}})},INSERT_BEFORE_CELL:(e,t,n)=>{var r,o,i,a;let l=e.notebookState;if(!l)return;e.selectedCell=l.data.cells[t.from].id;let s=l.insertBefore(t.from,t.to);e.notebookState=s,n({type:"writeToStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,content:s.toJson(),currentNotebookViewId:null!==(o=null===(r=e.sessionLifecycleState)||void 0===r?void 0:r.notebookViewId)&&void 0!==o?o:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!==(i=e.lastestNotebookLoadTime)&&void 0!==i?i:0,lastEditStatus:null!==(a=e.notebookState.getLastEditStatus())&&void 0!==a?a:null}),n({type:"logNotebookCellUITelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:eS.jSd})},MOVE_CELL_UP:(e,t,n)=>{var r,o,i,a;let l=e.notebookState;if(!l)return;let s=l.data.cells[t.index],c=s.id,u=(0,eK.DA)(s),d=l.moveCellUp(t.index);e.notebookState=d;let f=l.getCellResult(c);n({type:"writeToStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,content:d.toJson(),currentNotebookViewId:null!==(o=null===(r=e.sessionLifecycleState)||void 0===r?void 0:r.notebookViewId)&&void 0!==o?o:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!==(i=e.lastestNotebookLoadTime)&&void 0!==i?i:0,lastEditStatus:null!==(a=e.notebookState.getLastEditStatus())&&void 0!==a?a:null}),n({type:"logNotebookCellUITelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:eS.ETJ,data:{cellId:c,cellIndex:t.index,cellType:u,runId:null==f?void 0:f.runId}})},MOVE_CELL_DOWN:(e,t,n)=>{var r,o,i,a;let l=e.notebookState;if(!l)return;let s=l.data.cells[t.index],c=s.id,u=(0,eK.DA)(s),d=l.moveCellDown(t.index);e.notebookState=d;let f=l.getCellResult(c);n({type:"writeToStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,content:d.toJson(),currentNotebookViewId:null!==(o=null===(r=e.sessionLifecycleState)||void 0===r?void 0:r.notebookViewId)&&void 0!==o?o:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!==(i=e.lastestNotebookLoadTime)&&void 0!==i?i:0,lastEditStatus:null!==(a=e.notebookState.getLastEditStatus())&&void 0!==a?a:null}),n({type:"logNotebookCellUITelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:eS.G1R,data:{cellId:c,cellIndex:t.index,cellType:u,runId:null==f?void 0:f.runId}})},ADVANCE_CELL:function(e,t,n){let r=e.notebookState;if(!r)return;let o=r.data.cells,i=r.getCellById(t.runCellId),a=r.getCellIndexById(t.runCellId);i&&void 0!==a&&(a+1>=o.length?e$(e,{type:"ADD_CELL",cellType:(0,eK.M1)(i)?i.metadata.language:"markdown",index:a+1,role:t.role,secondaryRoles:t.secondaryRoles,id:t.id},n):e.selectedCell=o[a+1].id||void 0)},UPDATE_SELECTED_CELL:function(e,t){e.selectedCell=t.cellId},UNSELECT_CELL:function(e){e.selectedCell=void 0},RENAME_CELL:function(e,t,n){let r=e.notebookState;if(!r)return;let{newCellName:o,index:i,id:a,role:l,secondaryRoles:s}=t;e.runStatus="idle";let{isValid:c}=(0,eg.Ke)(o,r.getGlobalVariables()),u=(0,eg.ae)(r.data.cells,o,i);if(c&&u){var d,f,E,p;let t=r.renameCell(i,o);n({type:"writeToStage",id:a,role:l,secondaryRoles:s,content:t.toJson(),currentNotebookViewId:null!==(f=null===(d=e.sessionLifecycleState)||void 0===d?void 0:d.notebookViewId)&&void 0!==f?f:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!==(E=e.lastestNotebookLoadTime)&&void 0!==E?E:0,lastEditStatus:null!==(p=t.getLastEditStatus())&&void 0!==p?p:null}),e.notebookState=t}u||n({type:"onNotebookError",id:a,role:l,secondaryRoles:s,error:eg._y.DUPLICATE,logError:!1})},UPDATE_MARKDOWN_CELL_RESULT:function(e,t){let n=e.notebookState;if(!n){console.error("Cannot update markdown result as Notebook state is not initialized yet");return}let{cellId:r,message:o}=t,i=n.updateCellResult(r,{message:[o]});e.notebookState=i.updateCellStatus(r,{cellRunStatus:"idle"})},RECEIVE_MESSAGE:(e,t,n)=>{var r,o,i,a,l,s,c,u,d,f,E,p,y,b,O,g,v,S,m,h;let{message:I,id:T,role:R,secondaryRoles:C}=t;if(null===(r=I.notebookStart)||void 0===r?void 0:r.isCache)e1(e,{type:"NOTEBOOK_CACHE_STARTED"},n),n({type:"logNotebookRunTelemetry",event:eS.F1$,id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,data:{isCache:!0}});else if(null===(o=I.notebookStart)||void 0===o?void 0:o.cellIdsToRun){let r=e.udfConnectionStatus;e1(e,{type:"NOTEBOOK_RUN_STARTED",cellIdsToRun:I.notebookStart.cellIdsToRun},n),r!==e.udfConnectionStatus&&e.udfConnectionStatus===eO.Q.Connected&&n(r===eO.Q.Reconnecting?{type:"logSessionReconnectCompleted",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,data:{}}:{type:"logNotebookSessionTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,data:{isSuccess:!0,previousUdfStatus:r}});let o=(0,eL.Js)(e),i=[];for(let e of I.notebookStart.cellIdsToRun){let t=null==o?void 0:null===(a=o.notebookState)||void 0===a?void 0:a.getCellById(e);t?i.push((0,eK.DA)(t)):i.push("unknown")}n({type:"logNotebookRunTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:eS.dJY,data:{cellIdsToRun:I.notebookStart.cellIdsToRun,cellTypes:i}}),n({type:"startRunningNotebookHeartbeat",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles})}else if(I.cellRunInfo&&I.cellRunInfo.cellId&&I.cellRunInfo.runId){let r=(0,eL.Js)(e),o=I.cellRunInfo.cellId?null==r?void 0:null===(l=r.notebookState)||void 0===l?void 0:l.getCellById(I.cellRunInfo.cellId):void 0;e1(e,{type:"CELL_RUN_STARTED",cellRunInfo:I.cellRunInfo},n);let i=I.cellRunInfo.cellId;(0,_.H$)(eb.kk,i),n({type:"logNotebookCellRunTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:eS._KU,data:{cellId:i,runId:I.cellRunInfo.runId,cellType:o?(0,eK.DA)(o):""},markerInfo:{event:eb.QX,markers:[i]}})}else if(I.cellRunDone&&I.cellRunDone.cellId){let r=e.cacheStatus,o=1===I.cellRunDone.state,i=I.cellRunDone.cellId,a="success";"fetching"===r?a="idle":o||(a=4===I.cellRunDone.state?"errorStopRunning":"error"),e1(e,{type:"CELL_RUN_FINISHED",cellId:i,state:a,timestamp:"number"==typeof I.cellRunDone.timestamp?I.cellRunDone.timestamp:I.cellRunDone.timestamp.toNumber(),role:R,secondaryRoles:C,id:T},n);let l=e.notebookState;if(!l)return;let u=l.getCellResult(i),d=l.getCellById(i),f=d?(0,eK.DA)(d):"",E=l.getCellResultSize(i),p=l.getCellResultQueryId(i);n({type:"logNotebookCellRunTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:eS.Hn4,data:{cellId:I.cellRunDone.cellId,isSuccess:o,error:o?void 0:null!==(s=I.cellRunDone.errorId)&&void 0!==s?s:void 0,cause:o?void 0:null!==(c=I.cellRunDone.additionalErrorMessage)&&void 0!==c?c:void 0,cellType:f,bytesLoaded:E,queryId:p,runId:null==u?void 0:u.runId},markerInfo:{event:eb.kk,markers:[I.cellRunDone.cellId]}})}else if(I.cellForwardMsg){let r=null===(u=I.cellForwardMsg)||void 0===u?void 0:u.forwardMsg,o=I.cellForwardMsg.cellId;if(!o&&r&&(0,eJ.G)(r)){let o=null==r?void 0:null===(p=r.delta)||void 0===p?void 0:null===(E=p.newElement)||void 0===E?void 0:null===(f=E.exception)||void 0===f?void 0:f.message,i=e.udfConnectionStatus===eO.Q.Connecting,a=e.udfConnectionStatus===eO.Q.Reconnecting;((i||a)&&(e.udfConnectionStatus=eO.Q.NotConnected),i?n({type:"logNotebookSessionTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,data:{isSuccess:!1,error:o}}):a&&n({type:"logSessionReconnectCompleted",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,data:{error:o}}),o&&o.match(/integration '.+'/imu))?n({type:"onExternalAccessIntegrationError",id:T,role:R,secondaryRoles:C,error:o}):n({type:"onNotebookError",id:T,role:R,secondaryRoles:C,error:null!=o?o:""}),e1(e,{type:"NOTEBOOK_RUN_FINISHED",state:2},n)}if(!o)return;let i=null===(d=e.notebookState)||void 0===d?void 0:d.getCellById(o);if(void 0===i)return;let a="ModuleNotFoundError",l=(0,eJ.e)({message:r,errorType:a});l&&n({type:"logNotebookCellRunTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:eS.Hn4,data:{isSuccess:!1,error:a,cause:l}}),(null==r?void 0:r.delta)&&e1(e,{type:"UPDATE_RESULT",cellId:i.id,result:r},n)}else if(null===(i=I.notebookDone)||void 0===i?void 0:i.isCache){e1(e,{type:"NOTEBOOK_CACHE_DONE"},n);let r=e.udfConnectionStatus===eO.Q.Reconnecting;n({type:"logNotebookRunTelemetry",event:eS.AK5,id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,data:{isCache:!0,isReconnect:r}})}else if(I.controlResponse){if(I.controlResponse.resourceUtilization)e1(e,{type:"NOTEBOOK_UPDATE_RESOURCE_USAGE",resourceUtilization:I.controlResponse.resourceUtilization},n);else if(I.controlResponse.requestId){let e=null!==(b=I.controlResponse.requestId)&&void 0!==b?b:"";eq.log.warn(`Received controlResponse with id: ${e}`),n({type:"controlResponseStatus",id:T,role:R,secondaryRoles:C,requestId:I.controlResponse.requestId,status:null!==(O=null===(y=I.controlResponse)||void 0===y?void 0:y.status)&&void 0!==O?O:void 0})}}else if(I.notebookDone&&I.notebookDone.state){let r=2===I.notebookDone.state,o=null===(g=e.sessionLifecycleState)||void 0===g?void 0:g.isReplayingMessagesAfterReconnect;e.sessionLifecycleState=(m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},null!==(v=e.sessionLifecycleState)&&void 0!==v?v:{}),h=h={isReplayingMessagesAfterReconnect:!1},Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(h)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(h)).forEach(function(e){Object.defineProperty(m,e,Object.getOwnPropertyDescriptor(h,e))}),m),r&&I.notebookDone.additionalErrorMessage&&n({type:"onNotebookError",id:T,role:R,secondaryRoles:C,error:I.notebookDone.additionalErrorMessage}),e1(e,{type:"NOTEBOOK_RUN_FINISHED",state:I.notebookDone.state},n),n({type:"logNotebookRunTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:eS.MKg,data:{isSuccess:!r,error:r&&null!==(S=I.notebookDone.additionalErrorMessage)&&void 0!==S?S:void 0,isReplayingMessagesAfterReconnect:o}}),n({type:"stopRunningNotebookHeartbeat",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles})}else I.cellStatus&&e1(e,{type:"NOTEBOOK_CELL_STATUS",cellStatus:I.cellStatus},n)},RECEIVE_CONTROL_MESSAGE:(e,t,n)=>{var r,o,i;let{message:a,updatePackageTimeoutId:l,isNotebookRestartKernelEnabled:s}=t,c=e.notebookState,u=t=>{(0,eW.h)(0===t.level),e.bottomBarState={type:"ReceivedStreamlitLifecycleMsg",data:{level:0,topic:t.topic,payload:t.payload}}};switch(a.type){case"lifecycleMsg":{let i=(0,eW.h)(a.lifecycleMsg);switch(i.level){case 0:switch(i.topic){case 2:{let t=i.payload?JSON.parse(i.payload):void 0;(null==t?void 0:t.serviceStatus)==="RUNNING"&&(e.serviceStatusInfo=t),u(i);break}case 3:case 4:s&&e.udfConnectionStatus===eO.Q.RestartingKernel&&(e.notebookState=c.clearAllExecutionStates(),e.runStatus="notStarted"),u(i);break;case 5:s&&e.udfConnectionStatus===eO.Q.RestartingKernel&&(e.udfConnectionStatus=eO.Q.Connected,n({type:"pushNotification",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,notificationProps:{type:"success",content:eZ(),autoDismiss:!0}}),n({type:"logNotebookKernelRestartEnd",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles})),u(i);break;case 1:case 8:u(i)}break;case 1:{let a=7===i.topic&&(null===(r=i.payload)||void 0===r?void 0:r.startsWith("UNAVAILABLE")),l=null===(o=(0,eY.xe)(i,U.M.NOTEBOOK))||void 0===o?void 0:o();e.udfConnectionStatus===eO.Q.Connecting?(e.udfConnectionStatus=eO.Q.NotConnected,n({type:"logNotebookSessionTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,data:{isSuccess:!1,error:`${i.topic}. ${i.payload}`}})):e.udfConnectionStatus===eO.Q.Reconnecting?(e.udfConnectionStatus=eO.Q.NotConnected,n({type:"logSessionReconnectCompleted",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,data:{error:`${i.topic}. ${i.payload}`}})):e.udfConnectionStatus===eO.Q.RestartingKernel&&s&&n({type:"logNotebookKernelRestartEnd",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,data:{error:`${i.topic}. ${i.payload}`}}),n({type:"pushNotification",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,notificationProps:{type:"alert",content:l,autoDismiss:!1},notificationRefCallback:a?ez.ZN:void 0}),n({type:"onNotebookError",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,error:(null==l?void 0:l.props.id)||`${i.topic}. ${i.payload}`,silent:!0})}}break}case"clientControlResponse":{clearTimeout(l);let r=(0,eW.h)(a.clientControlResponse),o=1===r.status||(null===(i=r.error)||void 0===i?void 0:i.errorMessage);e.runStatus=o?"updatingPackagesFailed":"idle",o||n({type:"pushNotification",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,notificationProps:{type:"success",content:(0,eY.Oz)(),autoDismiss:!0}})}}},RUN_NOTEBOOK:eH,CLEAR_CODE_RESULTS:(e,t,n)=>{var r,o;eH(e,(r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},t),o=o={type:"RUN_NOTEBOOK",cellRunType:1,runCellId:"",clearCodeResults:!0,userTriggered:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}),r),n)},RUN_NOTEBOOK_FAILED:e=>{e.runStatus="idle"},CANCEL_EXECUTION:function(e,t,n){let{id:r,role:o,secondaryRoles:i}=t;"running"===e.runStatus&&(e.runStatus="cancelling",n({type:"cancelExecution",id:r,role:o,secondaryRoles:i}))},SHUTDOWN_NOTEBOOK:(e,t,n)=>{let{id:r,role:o,secondaryRoles:i,isContainerRuntime:a}=t;n({type:"shutdownNotebook",id:r,role:o,secondaryRoles:i,isContainerRuntime:a})},START_NOTEBOOK:(e,t,n)=>{var r;"loaded"===e.loadStatus&&(e.sessionLifecycleState=e4(e9({},null!==(r=e.sessionLifecycleState)&&void 0!==r?r:{}),{isReplayingMessagesAfterReconnect:t.isReplayingMessagesAfterReconnect}),eH(e,e4(e9({},t),{type:"RUN_NOTEBOOK",cellRunType:7,runCellId:"",userTriggered:t.userTriggered}),n))},RECONNECT_NOTEBOOK:function(e,t,n){let{id:r,role:o,secondaryRoles:i}=t;n({type:"reconnectSession",id:r,role:o,secondaryRoles:i})},RESTART_NOTEBOOK:function(e,t,n){let{id:r,role:o,secondaryRoles:i,isContainerRuntime:a}=t;n({type:"restartNotebook",id:r,role:o,secondaryRoles:i,isContainerRuntime:a})},RESTART_KERNEL:function(e,t,n){let{id:r,role:o,secondaryRoles:i}=t;e.udfConnectionStatus=eO.Q.RestartingKernel,n({type:"restartNotebookKernel",id:r,role:o,secondaryRoles:i})},CLEAR_DISCONNECT_REASON:function(e){let t=e.sessionLifecycleState;t&&(t.sessionEndReason=void 0)},WEBSOCKET_UNMOUNTED:function(e){let t=e.notebookState;t&&(e.runStatus="notStarted",e.cacheStatus="notLoaded",e.notebookState=t.clearAllResults())},WEBSOCKET_START_CONNECTING:function(e,t){let{numOfActiveSessions:n}=t;if(e.websocketStatus.status=n?eO.Q.Reconnecting:eO.Q.Connecting,void 0!==n){var r,o,i;n&&(e.udfConnectionStatus=eO.Q.Reconnecting),e.sessionLifecycleState=(o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},null!==(r=e.sessionLifecycleState)&&void 0!==r?r:{}),i=i={numberOfRunningSessions:n},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))}),o)}},WEBSOCKET_CONNECTED:function(e,t){console.log("Websocket connected"),e.websocketStatus.status=eO.Q.Connected,e.websocketStatus.idOfAlreadyRunningInstance=t.idOfAlreadyRunningInstance,e.websocketStatus.error=null,e.websocketStatus.streamlitVersionOfAlreadyRunningInstance=t.streamlitVersionOfAlreadyRunningInstance},WEBSOCKET_DISCONNECTED:function(e,t,n){var r,o,i;let{id:a,role:l,secondaryRoles:s,reason:c}=t;console.log("Websocket disconnected due to reason:",c);let u=e.notebookState;u&&(t.reason&&"string"==typeof t.reason&&(e.sessionLifecycleState=e5(e3({},null!==(o=e.sessionLifecycleState)&&void 0!==o?o:{}),{sessionEndReason:t.reason})),!(0,e2.vi)({udfConnectionStatus:e.udfConnectionStatus,disconnectReason:c})||(null==e?void 0:null===(r=e.sessionLifecycleState)||void 0===r?void 0:r.isNonInteractiveSession)?(e.websocketStatus.status=eO.Q.NotConnected,e.runStatus="updatingPackages"===e.runStatus?"updatingPackagesFailed":"idle",e.notebookState=u.clearAllExecutionStates(),e.udfConnectionStatus=eO.Q.NotConnected,e.bottomBarState=void 0,e.sessionLifecycleState=e5(e3({},null!==(i=e.sessionLifecycleState)&&void 0!==i?i:{}),{sessionEndTimeMs:Date.now()}),(0,e2.ne)(c)&&"loaded"!==e.cacheStatus&&(console.debug("[Notebook] Reconnect websocket to load cache results after reconnecting existing session failed"),e.cacheStatus="notLoaded",n({type:"connectWebsocket",id:a,role:l,secondaryRoles:s,connectExistingSession:!1,loadCachedResultsAfterConnection:!0})),c===eO.w.USER_NOTEBOOK_SHUTDOWN&&(e.runStatus="notStarted")):(e.websocketStatus.status=eO.Q.Reconnecting,e.udfConnectionStatus=eO.Q.Reconnecting,n({type:"reconnectSession",id:a,role:l,secondaryRoles:s})))},WEBSOCKET_CONNECTION_ERROR:function(e,t,n){console.error("Web socket connection error",t.error);let{id:r,role:o,secondaryRoles:i}=t;e.udfConnectionStatus=eO.Q.NotConnected,e.websocketStatus.status=eO.Q.NotConnected,e.websocketStatus.idOfAlreadyRunningInstance=void 0,e.websocketStatus.error=t.error,e.bottomBarState=void 0,e.runStatus="updatingPackages"===e.runStatus?"updatingPackagesFailed":"notStarted"===e.runStatus?"notStarted":"idle";let a=e.sessionLifecycleState;a&&(a.sessionEndTimeMs=Date.now()),n({type:"onNotebookError",id:r,role:o,secondaryRoles:i,error:"Unable to establish web socket connection after max attempts"===t.error?"Unable to connect.":"Unable to connect. A firewall or ad blocker might be preventing you from connecting."})},NETWORK_CONDITION_CHANGED:function(e,t,n){var r,o,i;let{id:a,role:l,secondaryRoles:s,onlineToSnowflakeServer:c}=t,u=null!==(r=e.sessionLifecycleState)&&void 0!==r?r:{},d=void 0===u.onlineToSnowflakeServer||u.onlineToSnowflakeServer,f=void 0!==c?c:d;e.sessionLifecycleState=(o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},u),i=i={onlineToSnowflakeServer:f},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))}),o),f===d&&f||(console.debug("User's network condition changed.",{onlineToSnowflakeServer:f}),n({type:"networkConditionChanged",id:a,role:l,secondaryRoles:s,onlineToSnowflakeServer:f}))},UPDATE_PACKAGE:(e,t,n)=>{let{id:r,role:o,secondaryRoles:i,isContainerRuntime:a}=t;if(e.udfConnectionStatus!==eO.Q.Connected){console.warn(`UPDATE_PACKAGE is only applicable when UDF Connection Status is connected but got ${e.udfConnectionStatus}`);return}e.runStatus="updatingPackages",n(a?{type:"updatePackage",isContainerRuntime:a,imports:t.imports,id:r,role:o,secondaryRoles:i}:{type:"updatePackage",data:t.data,isContainerRuntime:a,id:r,role:o,secondaryRoles:i})},UPDATE_PACKAGE_FAILED:e=>{"updatingPackages"===e.runStatus&&(e.runStatus="updatingPackagesFailed")},UPDATE_PACKAGE_DONE:e=>{"updatingPackages"===e.runStatus&&(e.runStatus="idle")},START_FETCHING_CACHED_RESULTS:function(e,t,n){var r;let{id:o,role:i,secondaryRoles:a}=t;(0,_.OY)(eb.bZ,(0,p.m)(o)),null===(r=e.notebookState)||void 0===r||r.getCellsProto().forEach(e=>{var t;(0,_.OY)(eb.QX,null!==(t=e.id)&&void 0!==t?t:"")}),n({type:"fetchCachedResults",id:o,role:i,secondaryRoles:a})},START_FETCHING_CACHE_RESULT:function(e,t){let{cacheLoadId:n}=t;e.cacheStatus="pending",e.cacheLoadId=n},FETCHING_CACHE_TIMED_OUT:function(e,t,n){let{id:r,role:o,secondaryRoles:i,cacheLoadId:a}=t;a===e.cacheLoadId&&(0,eM.P)(e.cacheStatus)&&(e.cacheStatus="error",n({type:"onNotebookError",id:r,role:o,secondaryRoles:i,error:"Some cell results could not be loaded.",silent:!0}))},SET_NON_INTERACTIVE_MODE:function(e){var t,n,r;e.sessionLifecycleState=(n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},null!==(t=e.sessionLifecycleState)&&void 0!==t?t:{}),r=r={isNonInteractiveSession:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}),n)},RESET_STATE:function(e){var t;let n=e8({notebookViewId:null===(t=e.sessionLifecycleState)||void 0===t?void 0:t.notebookViewId});Object.assign(e,{},n)},REPLACE_STATE:function(e,t){Object.assign(e,{},t.state)}},ek.j),te=(e,t,n)=>(r,o,i)=>{i(()=>(function(e,t){for(let n of t)try{n(e)}catch(e){a.cM.error(e,{message:"An error occurred in the notebook event listener"})}})(o,e));let l=(0,eL.ZP)(r,e=>{let{type:t,id:n,role:r,secondaryRoles:a}=o,l=(0,ew.E)(n,r,a);if(e[l]||(e[l]=e8({})),eD(o)){var s,c,u;e[l].sessionLifecycleState=(c=e6({},null!==(s=e[l].sessionLifecycleState)&&void 0!==s?s:{}),u=u={latestUserInteractionTime:Date.now()},Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(u)).forEach(function(e){Object.defineProperty(c,e,Object.getOwnPropertyDescriptor(u,e))}),c),i({type:"triggerUserInteractionKeepalive",id:n,role:r,secondaryRoles:a})}let d=e7[t];void 0!==d&&d(e[l],o,i)});if(n&&t){let{id:e,role:t,secondaryRoles:n}=o;i({type:"syncNotebookEditorState",notebookEditorState:l[(0,ew.E)(e,t,n)],id:e,role:t,secondaryRoles:n})}return l};var tt=n(749490),tn=n(585376),tr=n(430854),to=n(242499),ti=n(564085),ta=n(739090);let tl=({hide:e,saveEligibilityCheckStatus:t,editingUserName:n,editingUserEmail:i,fullNotebookIdentifier:a,onDuplicateNotebook:l,notebookViewId:s,role:c,causalElement:f})=>{let E=(0,o.z)(()=>{y(a,eS.DsD,{notebookViewId:s,saveEligibilityCheckStatus:t},"ui_click"),window.location.reload()}),{formatMessage:p}=(0,d.Z)(),{logNotebookEditEvent:y}=(0,ea.N)(),O=!!(0,ta.Z)(a),g=(0,b.m)([]).untracked.user.isUiSpecifiedSnowflakeFeatureEnabled("UI_ENABLE_NOTEBOOK_DISABLED_SPCS_EXPERIENCE_FOR_ADMINS"),v=(0,u.useMemo)(()=>(0,r.jsxs)(tt.s,{width:"100%",rowGap:12,children:[(0,r.jsx)(A.n,{color:w.Q2.primaryTextColor,children:p({id:"{userName}{emailPart} is editing this notebook."},{userName:(0,r.jsx)(N.x,{fontWeight:600,children:n}),emailPart:i?` (${i}) `:""})}),(0,r.jsx)(A.n,{color:w.Q2.primaryTextColor,marginTop:24,children:p({id:"To prevent overwriting each other, wait until {userName} stops editing for 1 minute. You can also duplicate this notebook to make your own copy."},{userName:n})})]}),[n,i,p]),S=(0,u.useMemo)(()=>(0,r.jsxs)(tt.s,{width:"100%",rowGap:16,children:[(0,r.jsx)(A.n,{color:w.Q2.primaryTextColor,children:p({id:"{userName}{emailPart} recently edited this notebook. Reload to see their latest changes."},{userName:(0,r.jsx)(N.x,{fontWeight:600,children:n}),emailPart:i?` (${i}) `:""})}),(0,r.jsx)(tn.j,{marginTop:16,theme:"yellow",icon:"warning-triangle",title:(0,r.jsx)(N.x,{color:w.Q2.statusWarningColor,fontSize:14,weight:500,children:p({id:"Reloading will discard your unsaved changes."})})})]}),[n,i,p]),m=(0,u.useMemo)(()=>(0,r.jsx)(A.n,{color:w.Q2.primaryTextColor,children:p({id:"You recently edited this notebook in another browser tab. Reload to see your latest changes."})}),[p]),h=(0,u.useCallback)(()=>{e(),l(a),y(a,eS.$aC,{notebookViewId:s,saveEligibilityCheckStatus:t},"ui_click")},[e,l,a,s,t,y]),_=(0,u.useCallback)(()=>{y(a,eS.mBO,{notebookViewId:s,saveEligibilityCheckStatus:t},"ui_click"),e()},[e,a,s,t,y]),I=(0,u.useMemo)(()=>{if("cannotSaveDueToRecentChangeFromSameUser"===t)return(0,r.jsx)(C.cN,{marginTop:8,children:(0,r.jsxs)(L.g,{children:[(0,r.jsx)(k.zx,{onClick:_,children:(0,r.jsx)(D.Z,{id:"Close"})}),(0,r.jsx)(k.zx,{use:"primary",onClick:E,marginLeft:8,children:(0,r.jsx)(D.Z,{id:"Reload notebook"})})]})});let e=g&&O&&(0,eF.e)(c),n=(0,r.jsx)(tr.h,{onClick:e?void 0:h,textDecorationLine:"none",color:e?w.Q2.textButtonDisabledColor:w.Q2.textButtonColor,disabled:e,children:p({id:"Duplicate notebook"})});return(0,r.jsxs)(C.cN,{align:"justify",verticalAlign:"middle",marginTop:8,children:[e?(0,r.jsx)(to.u,{text:p({id:"Can't duplicate container notebooks using the ACCOUNTADMIN, SECURITYADMIN, or ORGADMIN roles. Try a different role."}),children:n}):n,(0,r.jsxs)(L.g,{children:[(0,r.jsx)(k.zx,{onClick:_,children:(0,r.jsx)(D.Z,{id:"Close"})}),"cannotSaveDueToRecentChangeFromOtherUser"===t&&(0,r.jsx)(k.zx,{use:"primary",onClick:E,marginLeft:8,children:(0,r.jsx)(D.Z,{id:"Reload notebook"})})]})]})},[t,h,E,p,_,g,O,c]);return(0,r.jsxs)(C.Vq,{manuallyShown:!0,behaviors:[ti.O],onHide:e,causalElement:f,width:500,children:[(0,r.jsx)(C.fK,{children:(0,r.jsx)(D.Z,{id:"Can't save changes"})}),(0,r.jsxs)(C.a7,{marginBottom:12,children:["cannotSaveDueToEditLocked"===t&&v,"cannotSaveDueToRecentChangeFromOtherUser"===t&&S,"cannotSaveDueToRecentChangeFromSameUser"===t&&m]}),I]})};tl.displayName="NotebookConcurrentEditAlertDialog";var ts=n(598955);function tc(e,t){let n=(0,ts.mk)(),r=t.urlId,o=n.get(r)||{};o[t.cellId]=t.resultHeight,n.delete(r),n.set(r,o),n.size>=ts.Dz&&(n=new Map(Array.from(n.entries()).slice(-ts.Dz))),localStorage.setItem(ts.Y7,JSON.stringify(Array.from(n.entries())))}var tu=n(51723);function td(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function tf(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let tE=({websocketMapRef:e})=>{let{logEvent:t}=(0,tu.useTelemetry)(),n=(0,ea.N)(),r=(0,o.z)((t,r)=>{var o,i;let{id:a,event:l,data:s={},role:c,secondaryRoles:u}=r,d=(0,ew.E)(a,c,u),f=e.current[d],E=t[d];n.logCellUITelemetry(a,l,tf(td({},s),{connectionId:null!==(i=null==f?void 0:f.connectionId)&&void 0!==i?i:"",notebookViewId:null==E?void 0:null===(o=E.sessionLifecycleState)||void 0===o?void 0:o.notebookViewId,notebookRuntime:null==E?void 0:E.notebookRuntime}),{event:eb.Xv,markers:[`${s.cellIndex}`]})}),i=(0,o.z)((t,r)=>{var o,i;let{id:a,event:l,data:s,role:c,secondaryRoles:u,markerInfo:d}=r,f=(0,ew.E)(a,c,u),E=e.current[f],p=t[f];n.logCellRunTelemetry(a,l,tf(td({},s),{connectionId:null!==(i=null==E?void 0:E.connectionId)&&void 0!==i?i:"",notebookViewId:null==p?void 0:null===(o=p.sessionLifecycleState)||void 0===o?void 0:o.notebookViewId,notebookRuntime:null==p?void 0:p.notebookRuntime}),s.isSuccess,d)}),a=(0,o.z)((t,r)=>{var o,i,a;let{id:l,event:s,data:c,role:u,secondaryRoles:d}=r,f=(0,ew.E)(l,u,d),E=e.current[f],y=t[f];n.logRunEvent(l,s,tf(td({},c),{connectionId:null!==(a=null==E?void 0:E.connectionId)&&void 0!==a?a:"",notebookViewId:null==y?void 0:null===(o=y.sessionLifecycleState)||void 0===o?void 0:o.notebookViewId,notebookRuntime:null==y?void 0:y.notebookRuntime,isReplayingMessage:!!(s===eS.MKg&&c&&c.isReplayingMessagesAfterReconnect),reconnectInstanceId:null==y?void 0:null===(i=y.websocketStatus)||void 0===i?void 0:i.idOfAlreadyRunningInstance}),c?c.isSuccess:void 0,{event:eb.bZ,markers:[(0,p.m)(l)],isUserE2E:!0})}),l=(0,o.z)((t,r)=>{var o,i;let{id:a,event:l,eventType:s,role:c,secondaryRoles:u,data:d={}}=r,f=(0,ew.E)(a,c,u),E=e.current[f],y=t[f];n.logIPYNBEvent(a,l,tf(td({},d),{connectionId:null!==(i=null==E?void 0:E.connectionId)&&void 0!==i?i:"",notebookViewId:null==y?void 0:null===(o=y.sessionLifecycleState)||void 0===o?void 0:o.notebookViewId,notebookRuntime:null==y?void 0:y.notebookRuntime}),s,{event:eb.sW,markers:[(0,p.m)(a)]})}),s=(0,o.z)((t,r)=>{var o;let{id:i,role:a,secondaryRoles:l}=r,s=(0,ew.E)(i,a,l),c=e.current[s],u=t[s];n.logSessionStarting(i,{connectionId:null==c?void 0:c.connectionId,notebookViewId:null==u?void 0:null===(o=u.sessionLifecycleState)||void 0===o?void 0:o.notebookViewId,notebookRuntime:null==u?void 0:u.notebookRuntime})}),c=(0,o.z)((t,r)=>{var o,i;let{id:a,role:l,secondaryRoles:s,data:c}=r,u=(0,ew.E)(a,l,s),d=e.current[u],f=t[u];c.isSuccess?n.logSessionStartSuccess(a,{connectionId:null==d?void 0:d.connectionId,notebookViewId:null==f?void 0:null===(o=f.sessionLifecycleState)||void 0===o?void 0:o.notebookViewId,notebookRuntime:null==f?void 0:f.notebookRuntime}):n.logSessionStartFailed(a,{connectionId:null==d?void 0:d.connectionId,notebookViewId:null==f?void 0:null===(i=f.sessionLifecycleState)||void 0===i?void 0:i.notebookViewId,notebookRuntime:null==f?void 0:f.notebookRuntime,error:c.error})}),d=(0,o.z)((t,r)=>{var o,i;let{id:a,role:l,secondaryRoles:s,data:c}=r,u=(0,ew.E)(a,l,s),d=e.current[u],f=t[u];n.logSessionReconnectCompleted(a,{connectionId:null==d?void 0:d.connectionId,notebookViewId:null==f?void 0:null===(o=f.sessionLifecycleState)||void 0===o?void 0:o.notebookViewId,notebookRuntime:null==f?void 0:f.notebookRuntime,error:c.error,reconnectInstanceId:null==f?void 0:null===(i=f.websocketStatus)||void 0===i?void 0:i.idOfAlreadyRunningInstance})}),f=(0,o.z)((e,n)=>{var r;let{id:o,role:i,secondaryRoles:a,event:l,eventType:s,data:c={}}=n,u=e[(0,ew.E)(o,i,a)];t({data:tf(td({notebookIdentifier:(0,p.m)(o)},c),{notebookViewId:null==u?void 0:null===(r=u.sessionLifecycleState)||void 0===r?void 0:r.notebookViewId}),event:l,type:s})}),E=(0,o.z)((e,t)=>{var r;let{id:o,event:i,eventType:a,role:l,secondaryRoles:s,error:c,data:u={}}=t,d=e[(0,ew.E)(o,l,s)];n.logNotebookEditEvent(o,i,tf(td({},u),{notebookViewId:null==d?void 0:null===(r=d.sessionLifecycleState)||void 0===r?void 0:r.notebookViewId,notebookRuntime:null==d?void 0:d.notebookRuntime,error:c}),a,{event:eb.gr,markers:[(0,p.m)(o)]})}),y=(0,o.z)((t,r)=>{var o;let{id:i,role:a,secondaryRoles:l,data:s}=r,c=(0,ew.E)(i,a,l),u=e.current[c],d=t[c];n.logKernelRestartEnd(i,{connectionId:null==u?void 0:u.connectionId,notebookViewId:null==d?void 0:null===(o=d.sessionLifecycleState)||void 0===o?void 0:o.notebookViewId,notebookRuntime:null==d?void 0:d.notebookRuntime,error:null==s?void 0:s.error})});return(0,u.useMemo)(()=>({logNotebookTelemetry:f,logNotebookIPYNBTelemetry:l,logNotebookCellUITelemetry:r,logNotebookCellRunTelemetry:i,logNotebookRunTelemetry:a,logNotebookStartingSessionTelemetry:s,logNotebookSessionTelemetry:c,logSessionReconnectCompleted:d,logNotebookKernelRestartEnd:y,logNotebookEditTelemetry:E}),[f,l,r,i,a,c,s,d,y,E])};var tp=n(149268);function ty(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function tb(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let[tO,tg]=(0,l.Z)(()=>(function(){let{formatMessage:e}=(0,d.Z)(),t=(0,S.U)(),{openDialog:l,hideDialog:s}=(0,B.E)(),C=(0,ea.N)(),{user:A}=(0,b.m)(["user"]),N=A.isUiSpecifiedSnowflakeFeatureEnabled("UI_ENABLE_NOTEBOOK_LARGE_MESSAGE_CACHE"),w=A.isUiSpecifiedSnowflakeFeatureEnabled("FEATURE_UI_ENABLE_NOTEBOOKS_SCHEDULING"),L=A.isUiSpecifiedSnowflakeFeatureEnabled("NOTEBOOK_ENABLE_IDLE_HEARTBEAT"),k=(0,v.ep)("NOTEBOOK_IDLE_HEARTBEAT_TIMEOUT_SECONDS"),P=(0,v.ep)("NOTEBOOK_CACHE_FETCHING_TIMEOUT_SECONDS"),D=A.isUiSpecifiedSnowflakeFeatureEnabled("UI_ENABLE_NOTEBOOK_FEATURE_1"),M=A.isUiSpecifiedSnowflakeFeatureEnabled("UI_ENABLE_NOTEBOOK_FEATURE_21"),j=A.isUiSpecifiedSnowflakeFeatureEnabled("UI_ENABLE_NOTEBOOK_FEATURE_22"),U=(0,I.J)(),x=A.isUiSpecifiedSnowflakeFeatureEnabled("UI_ENABLE_NOTEBOOK_FEATURE_32"),G=A.isUiSpecifiedSnowflakeFeatureEnabled("UI_ENABLE_NOTEBOOK_FEATURE_18"),$=(0,v.ep)("NOTEBOOK_UPDATE_PACKAGE_TIMEOUT_SECONDS")||300,K=A.isUiSpecifiedSnowflakeFeatureEnabled("UI_ENABLE_NOTEBOOK_JUPYTER_VARIABLE_SEMANTICS"),Q=A.isUiSpecifiedSnowflakeFeatureEnabled("UI_ENABLE_NOTEBOOK_FEATURE_25"),W=A.isUiSpecifiedSnowflakeFeatureEnabled("UI_ENABLE_NOTEBOOK_FEATURE_30"),Z=(0,u.useRef)({}),z=(0,u.useContext)(b.L),q=null==z?void 0:z.user.isUiSpecifiedSnowflakeFeatureEnabled("UI_ENABLE_NOTEBOOK_FEATURE_29"),J=A.getSnowflakeParameterValue("STREAMLIT_WEBSOCKET_IDLE_TIMEOUT","number"),X=(0,u.useRef)(null),{organization:ee}=(0,b.m)(["organization"]),{region:et,org:en}=ee.currentRegionAndOrgInfoFromOrganization,{readFromStage:er,writeToStage:eo}=ei(),eE=(0,u.useCallback)((e,t,n)=>void er(t,n),[er]),ep=(0,u.useCallback)((e,t,n)=>{let{id:r}=t;C.markEventStart(eb.gr,(0,p.m)(r)),eo(t,n)},[eo,C]),ev=(0,u.useMemo)(()=>c()(ep,3e3,{trailing:!0}),[ep]),eS=(0,O.d)(),em=(0,Y.U)(el.l,es)(),eh=(0,Y.U)(ed.W,ef)(),e_=(0,Y.U)(ec.P,eu)(),eI=(0,o.z)(async({id:e,role:t,secondaryRoles:r,urlInfo:o,queryId:i,connectExistingSession:a=!0,loadCachedResultsAfterConnection:l=!1})=>{var s,c,u;let d=(0,ew.E)(e,t,r),f=Z.current,y=o||await eh({id:e,role:t,secondaryRoles:r,isPrivatelink:eS(),isNotebookPrivateLinkEnabled:!!q}),{ConnectionManager:b}=await Promise.all([n.e("94641"),n.e("70434"),n.e("95918"),n.e("20467"),n.e("73213")]).then(n.bind(n,15938));(null===(s=f[d])||void 0===s?void 0:s.connection.isConnected())&&(null===(u=f[d])||void 0===u||u.connection.disconnect("NOTEBOOK_RECONNECT"));let O=E.Z(),v=tm[d],S=null==v?void 0:v.notebookRuntime,_=!!i,{additionalProtoParams:I,activeInstanceJobId:T,activeNotebookInstancesNum:R,additionalMetadata:A}=a&&!_?await em(e):{additionalProtoParams:[],activeInstanceJobId:null,activeNotebookInstancesNum:void 0,additionalMetadata:void 0},L=[(0,p.m)(e),O];C.markEventStart(eb.x5,...L),C.markEventStart(eb.wT,O||"UNKNOWN"),R&&C.markEventStart(eb.Ff,(0,p.m)(e),O),C.logWebsocketStartConnecting(e,{connectionId:O,notebookViewId:null==v?void 0:null===(c=v.sessionLifecycleState)||void 0===c?void 0:c.notebookViewId,notebookRuntime:S,isReconnect:!!R,reconnectInstanceId:null!=T?T:void 0}),th({type:"WEBSOCKET_START_CONNECTING",id:e,role:t,secondaryRoles:r,numOfActiveSessions:R});let k=!!(R&&v&&"notStarted"!==v.runStatus&&!_),P=[],D=e=>{P.includes(e)||P.push(e)},M=e=>{let t=P.indexOf(e);t>=0&&P.splice(t,1)},x=e=>{let t=!0;for(let n of P)if(!(t=n.onMessage(e)))break;return t},F=e=>{let t=!0;for(let n of P)if(!(t=n.onSendMessage(e)))break;return t},G=e=>{let t=!0;for(let n of P)if(!(t=n.onControlMessage(e)))break;return t},B=(e,t,n)=>{let r=[];for(let o of P)o.onConnectionChange(e,t,n)||r.push(o);for(let e of r)M(e)},V=Date.now();return new Promise((n,o)=>{f[d]={registerHandler:D,unregisterHandler:M,sendMessage:e=>{if(F(e)){var t;null===(t=f[d])||void 0===t||t.connection.sendMessage(e)}},connection:new b({connectionId:O,additionalProtocolParams:I,onMessage:n=>{var o;O===(null===(o=f[d])||void 0===o?void 0:o.connectionId)&&(U?x(n)&&th({type:"RECEIVE_MESSAGE",id:e,role:t,secondaryRoles:r,message:n}):th({type:"RECEIVE_MESSAGE",id:e,role:t,secondaryRoles:r,message:n}))},onControlMessage:n=>{var o,i;O===(null===(o=f[d])||void 0===o?void 0:o.connectionId)&&(U?G(n)&&th({type:"RECEIVE_CONTROL_MESSAGE",id:e,role:t,secondaryRoles:r,message:n,isNotebookRestartKernelEnabled:W,updatePackageTimeoutId:tr.current}):th({type:"RECEIVE_CONTROL_MESSAGE",id:e,role:t,secondaryRoles:r,message:n,isNotebookRestartKernelEnabled:W,updatePackageTimeoutId:tr.current}),C.logWebsocketControlMessage(e,{connectionId:O,notebookViewId:null==v?void 0:null===(i=v.sessionLifecycleState)||void 0===i?void 0:i.notebookViewId,notebookRuntime:S,messageJson:n.toJSON()}))},onConnectionError:n=>{var i,a;if(O!==(null===(i=f[d])||void 0===i?void 0:i.connectionId))return;let l="string"==typeof n?n:"Unknown error";C.logWebsocketConnectError(e,{connectionId:O,notebookViewId:null==v?void 0:null===(a=v.sessionLifecycleState)||void 0===a?void 0:a.notebookViewId,notebookRuntime:S,error:l,isReconnect:!!R,reconnectInstanceId:null!=T?T:void 0},{event:eb.x5,markers:L}),th({type:"WEBSOCKET_CONNECTION_ERROR",id:e,role:t,secondaryRoles:r,error:l}),o()},connectionStateChanged:(i,a,s)=>{var c,u,E,p,y,b;if(O===(null===(c=f[d])||void 0===c?void 0:c.connectionId))switch(B(i,a,s),i){case h.e.CONNECTED:th({type:"WEBSOCKET_CONNECTED",id:e,role:t,secondaryRoles:r,idOfAlreadyRunningInstance:null!=T?T:void 0,streamlitVersionOfAlreadyRunningInstance:null==A?void 0:A.streamlitVersionOfAlreadyRunningInstance}),k&&th({type:"START_NOTEBOOK",id:e,role:t,secondaryRoles:r,userTriggered:!1,isReplayingMessagesAfterReconnect:!0}),l&&th({type:"START_FETCHING_CACHED_RESULTS",id:e,role:t,secondaryRoles:r}),C.logWebsocketConnected(e,{connectionId:O,notebookViewId:null==v?void 0:null===(u=v.sessionLifecycleState)||void 0===u?void 0:u.notebookViewId,notebookRuntime:S,connectionState:"CONNECTED",reason:s,error:a,isReconnect:!!R,reconnectInstanceId:null!=T?T:void 0},{event:eb.x5,markers:L}),m.v.addDurationVital(eb.P7,{startTime:V,duration:Date.now()-V,context:{isReconnect:!!R,reconnectInstanceId:null!=T?T:void 0}}),n();break;case h.e.DISCONNECTED_FOREVER:th({type:"WEBSOCKET_DISCONNECTED",id:e,role:t,secondaryRoles:r,reason:s}),null===(E=eW.current)||void 0===E||E.stop(),eW.current=null,j&&eV(-1),C.logWebsocketDisconnected(e,{connectionId:O,notebookViewId:null==v?void 0:null===(p=v.sessionLifecycleState)||void 0===p?void 0:p.notebookViewId,notebookRuntime:S,connectionState:i,reason:s,error:a,isReconnect:!!R,reconnectInstanceId:null!=T?T:void 0},{event:eb.x5,markers:L}),s===eO.w.NOTEBOOK_IDLE_TIMEOUT&&C.logSessionEnd(e,{connectionId:O,notebookViewId:null==v?void 0:null===(y=v.sessionLifecycleState)||void 0===y?void 0:y.notebookViewId,notebookRuntime:S,connectionState:i,reason:s,error:a,isReconnectEnabled:!0}),o();break;default:C.logWebsocketConnectionStateChange(e,{connectionId:O,notebookViewId:null==v?void 0:null===(b=v.sessionLifecycleState)||void 0===b?void 0:b.notebookViewId,notebookRuntime:S,connectionState:i,reason:s,error:a,isReconnect:!!R,reconnectInstanceId:null!=T?T:void 0})}},claimHostAuthToken:async()=>await e_({id:e,role:t,secondaryRoles:r,queryId:i,isHistoryQueryResultEnabled:w}),resetHostAuthToken:g.EI,setAllowedOriginsResp:g.EI,baseUriParts:y.baseUriParts,isHttps:y.isHttps,isLargeMessageCacheEnabled:N}),urlInfo:y,connectionId:O}})}),eT=(0,o.z)((e,t,n,r)=>{var o;let i=(0,ew.E)(e,t,n),a=null===(o=Z.current[i])||void 0===o?void 0:o.connection;a&&(null==a||a.disconnect(r),Z.current[i]=void 0)}),eR=(0,o.z)(async(t,n)=>{var r,o,a;let{id:l,role:s,secondaryRoles:c,cellRunType:u,runCellId:d,cells:f,clientState:E,eventType:y,notebookRuntime:b}=t,O=(0,ew.E)(l,s,c);(1===u||7===u)&&C.markEventStart(eb.bZ,(0,p.m)(l)),f.forEach(e=>{var t,n;C.markEventStart(eb.QX,null!==(t=e.id)&&void 0!==t?t:""),C.markE2EEventStart(eb.QX,null!==(n=e.id)&&void 0!==n?n:"")});let g=Z.current[O];if(void 0===g||g.connection.isDisconnected())try{await eI({id:l,role:s,secondaryRoles:c}),g=Z.current[O]}catch(e){}else try{await g.connection.waitForConnection()}catch(e){}let v=t_(l,s,c);if(void 0!==g&&g.connection.isConnected()){(null==v?void 0:v.udfConnectionStatus)===eO.Q.Connecting&&C.logSessionStarting(l,{notebookRuntime:v.notebookRuntime,connectionId:g.connectionId,notebookViewId:null==v?void 0:null===(a=v.sessionLifecycleState)||void 0===a?void 0:a.notebookViewId});let e={cellRunType:u,cellUpdateSemantics:1,cellInteractionSemantics:+!K,runCellId:d};Q&&(e=tb(ty({},e),{userErrorHandlingSemantics:0})),U?g.sendMessage({runCells:tb(ty({},e),{cells:f,clientState:E})}):g.connection.sendMessage({runCells:tb(ty({},e),{cells:f,clientState:E})}),C.logRunRequested(l,tb(ty({},e),{connectionId:g.connectionId,notebookViewId:null==v?void 0:null===(o=v.sessionLifecycleState)||void 0===o?void 0:o.notebookViewId,notebookRuntime:b,runId:d}),null!=y?y:"ui_click")}else(0,i.w)({content:e({id:"Connection is not ready yet"}),type:"alert",autoDismiss:!1}),C.logRunRequestedError(l,{error:"Connection is not ready yet",connectionId:(null==g?void 0:g.connectionId)||"",notebookViewId:null==v?void 0:null===(r=v.sessionLifecycleState)||void 0===r?void 0:r.notebookViewId,notebookRuntime:b,runId:d},null!=y?y:"ui_response_error"),n({type:"RUN_NOTEBOOK_FAILED",id:l,role:s,secondaryRoles:c})}),eC=(0,tp.q)(Z.current,e=>{e.connection.isConnected()&&(U?e.sendMessage({controlRequest:{cancelExecution:{cancelType:0}}}):e.connection.sendMessage({controlRequest:{cancelExecution:{cancelType:0}}}))}),eN=(0,tp.q)(Z.current,e=>{D&&e.connection.isConnected()&&(U?e.sendMessage({controlRequest:{resourceUtilization:{resourceTypes:[0,1]}}}):e.connection.sendMessage({controlRequest:{resourceUtilization:{resourceTypes:[0,1]}}}))}),eL=(0,tp.q)(Z.current,(e,t,n)=>{var r,o,i;let{id:a,role:l,secondaryRoles:s}=t,c=null===(r=t_(a,l,s))||void 0===r?void 0:r.notebookState,u=null==c?void 0:null===(i=c.data)||void 0===i?void 0:null===(o=i.cells)||void 0===o?void 0:o.filter(e=>"markdown"!==e.cell_type).map(e=>({cellId:e.id}));if(C.markEventStart(eb.bZ,(0,p.m)(a)),null==u||u.forEach(e=>{C.markEventStart(eb.QX,e.cellId)}),e.connection.isConnected()&&u&&u.length>0){let t=E.Z();n({type:"START_FETCHING_CACHE_RESULT",id:a,role:l,secondaryRoles:s,cacheLoadId:t}),U?e.sendMessage({previousResults:{warmStart:!1,cellIds:u}}):e.connection.sendMessage({previousResults:{warmStart:!1,cellIds:u}}),setTimeout(()=>{n({type:"FETCHING_CACHE_TIMED_OUT",id:a,role:l,secondaryRoles:s,cacheLoadId:t})},1e3*P)}}),ek=(0,u.useCallback)((e,t,n)=>{eR(t,n)},[eR]),eP=(0,u.useCallback)((t,n)=>{var r,o;!n.silent&&(0,i.w)({content:(o=n.error.replace(/Stack trace[\s\S]*/iu,"").trim(),Object.keys(eg._y).includes(o)?(0,eg.Ex)(o,e):e({id:"Something went wrong. {message}"},{message:o})),type:"alert",autoDismiss:!1}),(null===(r=n.logError)||void 0===r||r)&&(C.logError({notebookIdentifier:(0,p.m)(n.id),error:n.error}),a.cM.error(n.error))},[e,C]),eD=(0,u.useCallback)((e,t)=>{l((0,r.jsx)(F,{fullNotebookIdentifier:t.id,hide:s})),C.logError({notebookIdentifier:(0,p.m)(t.id),error:t.error}),a.cM.warn(t.error)},[C,l,s]),eM=(0,o.z)(e=>{l((0,r.jsx)(R.W,{urlData:{region:et,org:en},sourceFullNotebookIdentifier:e,hideLayer:s}))}),ej=(0,o.z)((e,t)=>{var n;let{id:o,role:i,secondaryRoles:a,saveEligibilityCheckStatus:c,editingUserName:u,editingUserEmail:d}=t,f=t_(o,i,a);l((0,r.jsx)(tl,{hide:s,role:i,saveEligibilityCheckStatus:c,editingUserName:u,editingUserEmail:d,fullNotebookIdentifier:o,onDuplicateNotebook:eM,notebookViewId:null==f?void 0:null===(n=f.sessionLifecycleState)||void 0===n?void 0:n.notebookViewId}))}),eU=(0,tp.q)(Z.current,(e,t)=>{var n;if(!W)return;e.connection.sendMessage({controlRequest:{restartKernelRequest:{restartKernel:!0}}});let{id:r,role:o,secondaryRoles:i}=t,a=t_(r,o,i);C.logKernelRestartBegin(r,{connectionId:e.connectionId,notebookViewId:null==a?void 0:null===(n=a.sessionLifecycleState)||void 0===n?void 0:n.notebookViewId,notebookRuntime:null==a?void 0:a.notebookRuntime})}),ex=(0,o.z)((e,t)=>{var n,r;let{id:o,role:i,secondaryRoles:a}=t,l=(0,ew.E)(o,i,a),s=Z.current[l],c=null==s?void 0:s.connection,u=(null==c?void 0:c.getConnectionId())||"UNKNOWN",d=t_(o,i,a),f=null==d?void 0:null===(n=d.sessionLifecycleState)||void 0===n?void 0:n.latestUserInteractionTime;if(C.logWebsocketHeartbeat(o,{connectionId:u,notebookViewId:null==d?void 0:null===(r=d.sessionLifecycleState)||void 0===r?void 0:r.notebookViewId,isConnected:(null==c?void 0:c.isConnected())||!1,isEnableIdleHeartbeat:L,idleHeartbeatTimeoutSeconds:k,isNotebookRunning:(null==d?void 0:d.runStatus)==="running"},{event:eb.wT,markers:[u]}),!(null==c?void 0:c.isConnected()))return!1;let E=Date.now();return U?null==s||s.sendMessage({heartbeatRequest:{browserState:f&&E-f<=6e4?1:0}}):c.sendMessage({heartbeatRequest:{browserState:f&&E-f<=6e4?1:0}}),console.debug("[Notebook] Heartbeat sent with browser state: ",f&&E-f<=6e4?"ACTIVE":"IDLE"),!0}),eF=(0,u.useMemo)(()=>c()(ex,J/5||6e4,{leading:!0}),[J,ex]),eG=(0,u.useRef)(-1),eB=(0,u.useRef)(null),eV=(0,u.useCallback)(e=>{var t;eG.current=e,null===(t=eB.current)||void 0===t||t.call(eB,e)},[]),eH=(0,u.useCallback)(async e=>{let n;let{id:r,role:o,secondaryRoles:i}=e;if(G){let e=await t(r,o,i);n=null==e?void 0:e.idleAutoShutdownTimeSeconds}return n||k||J/1e3||V.K7},[t,k,J,G]),e$=(0,u.useCallback)(async e=>{let{unsetNull:t,effect:n}=e;if(null==eG.current&&!t)return;let r=await eH(n);M?eV(new Date().getTime()+1e3*r):eV(new Date().getTime()+Math.max(1e3*r-(J||0),0))},[eH,M,eV,J]),eK=(0,o.z)((e,t)=>{L?e$({effect:t}):eF(e,t)}),eQ=(0,u.useCallback)(()=>{eV(null)},[eV]),eW=(0,u.useRef)(null),eY=(0,o.z)((e,t)=>{var n,r,o;if(L&&(eQ(),eW.current)){eW.current.restart();return}let{id:i,role:a,secondaryRoles:l}=t,s=(0,ew.E)(i,a,l),c=t_(i,a,l),u=null===(n=Z.current[s])||void 0===n?void 0:n.connection.getConnectionId();eW.current&&(C.logWebsocketHeartbeatEnd(i,{connectionId:u,notebookViewId:null==c?void 0:null===(o=c.sessionLifecycleState)||void 0===o?void 0:o.notebookViewId,isEnableIdleHeartbeat:L,idleHeartbeatTimeoutSeconds:k},{event:eb.wT,markers:[u||"UNKNOWN"]}),eW.current.stop()),C.logWebsocketHeartbeatStart(i,{connectionId:u,notebookViewId:null==c?void 0:null===(r=c.sessionLifecycleState)||void 0===r?void 0:r.notebookViewId,isEnableIdleHeartbeat:L,idleHeartbeatTimeoutSeconds:k});let d=(0,y.zp)(()=>{let n=!0;console.debug("Running heartbeater loop ",eG.current),console.debug("Sending heartbeat"),console.debug("Received response from heartbeat: ",n=ex(e,ty({},t))),n||(M?console.debug("No heartbeat sent but continuing to keep the heartbeat active."):(console.debug("Stopping heartbeater because no heartbeat was sent ",{heartbeatPollEndTimeMs:null==eG?void 0:eG.current}),d.stop()))},{pollingIntervalInSec:60,shouldPauseOnInactive:!1});eW.current=d,d.start()}),eZ=(0,u.useCallback)((e,t)=>{var n,r;let{id:o,role:i,secondaryRoles:a}=t,l=(0,ew.E)(o,i,a),s=null===(n=Z.current[l])||void 0===n?void 0:n.connection.getConnectionId();L?e$({unsetNull:!0,effect:t}):(C.logWebsocketHeartbeatEnd(o,{connectionId:s,isEnableIdleHeartbeat:L,idleHeartbeatTimeoutSeconds:k},{event:eb.wT,markers:[s||"UNKNOWN"]}),null===(r=eW.current)||void 0===r||r.stop())},[L,k,C,e$]),{logNotebookTelemetry:ez,logNotebookIPYNBTelemetry:eq,logNotebookCellUITelemetry:eJ,logNotebookCellRunTelemetry:eX,logNotebookRunTelemetry:e0,logNotebookSessionTelemetry:e1,logNotebookStartingSessionTelemetry:e9,logSessionReconnectCompleted:e4,logNotebookKernelRestartEnd:e2,logNotebookEditTelemetry:e3}=tE({websocketMapRef:Z}),e5=(0,o.z)(async e=>{var t,n;let{id:r,role:o,secondaryRoles:i,isContainerRuntime:a,reason:l}=e,s=(0,ew.E)(r,o,i),c=t_(r,o,i),u=null===(t=Z.current[s])||void 0===t?void 0:t.connection,d=(null==u?void 0:u.getConnectionId())||"";(0,_.H$)(eb.Sc,(0,p.m)(r),d),await eA(x,A,r,o,i,C.logNotebookEvent),C.logSessionEnd(r,{connectionId:d,notebookViewId:null==c?void 0:null===(n=c.sessionLifecycleState)||void 0===n?void 0:n.notebookViewId,reason:l,notebookRuntime:a?"spcs":"wh",isReconnectEnabled:!0}),eT(r,o,i,"USER_NOTEBOOK_SHUTDOWN")}),e8=(0,o.z)((e,t)=>{e5(tb(ty({},t),{reason:"USER_NOTEBOOK_SESSION_SHUTDOWN"}))}),e6=(0,o.z)(async(e,t)=>{let{id:n,role:r,secondaryRoles:o,isContainerRuntime:i}=e;await e5(tb(ty({},e),{type:"shutdownNotebook",isContainerRuntime:i,reason:"NOTEBOOK_SESSION_RESTART"})),t({id:n,role:r,secondaryRoles:o,type:"START_NOTEBOOK",userTriggered:!0,isReplayingMessagesAfterReconnect:!1})}),e7=(0,o.z)((e,t,n)=>{e6(t,n)}),tt=(0,u.useCallback)((e,t)=>{let{notificationProps:n,notificationRefCallback:r}=t;if(n.content){let e=(0,i.w)(n);null==r||r(e)}},[]),tn=(0,u.useRef)(""),tr=(0,u.useRef)(),to=(0,tp.q)(Z.current,(e,t,n)=>{if(!e.connection.isConnected())return;let{id:r,role:o,secondaryRoles:i,data:a,isContainerRuntime:l,imports:s}=t;if(a&&e.connection.sendControlMessage({clientControlRequest:{updateCondaEnvironment:{packageSpec:a.dependencies}}}),l&&void 0!==s){let t=E.Z();tn.current=t,U?e.sendMessage({controlRequest:{installPackage:{importUrls:s},requestId:t}}):e.connection.sendMessage({controlRequest:{installPackage:{importUrls:s},requestId:t}})}clearTimeout(tr.current),tr.current=setTimeout(()=>{n({type:"UPDATE_PACKAGE_FAILED",id:r,role:o,secondaryRoles:i})},1e3*$)}),ti=(0,o.z)((e,t,n)=>{let{id:r,role:o,secondaryRoles:i,requestId:l,status:s}=t,c=tn.current;tn.current="",""!==c&&c===l&&(0===s?n({type:"UPDATE_PACKAGE_DONE",id:r,role:o,secondaryRoles:i}):1===s?n({type:"UPDATE_PACKAGE_FAILED",id:r,role:o,secondaryRoles:i}):a.cM.warn(`Unknown status response for package import update: ${s}`))}),ta=(0,u.useCallback)((e,t,n)=>{let{id:r,role:o,secondaryRoles:i,queryId:a}=t,l=(0,ew.E)(r,o,i),s=Z.current[l];(null==s?void 0:s.connection.isConnected())?n({type:"START_NOTEBOOK",id:r,role:o,secondaryRoles:i,userTriggered:!1,isReplayingMessagesAfterReconnect:!0}):eI({id:r,role:o,secondaryRoles:i,urlInfo:void 0,queryId:a})},[eI]),ts=(0,u.useCallback)((e,t,n)=>{let{id:r,role:o,secondaryRoles:i,queryId:a,connectExistingSession:l,loadCachedResultsAfterConnection:s}=t,c=(0,ew.E)(r,o,i),u=Z.current[c];(null==u?void 0:u.connection.isConnected())||eI({id:r,role:o,secondaryRoles:i,queryId:a,urlInfo:void 0,connectExistingSession:l,loadCachedResultsAfterConnection:s})},[eI]),tu=(0,u.useCallback)((t,n,r)=>{let{id:o,role:a,secondaryRoles:l,queryId:s,onlineToSnowflakeServer:c}=n,u=(0,ew.E)(o,a,l);if(c){var d;null===(d=X.current)||void 0===d||d.hide(),X.current=null;let e=Z.current[u];(null==e?void 0:e.connection.isConnected())||eI({id:o,role:a,secondaryRoles:l,urlInfo:null==e?void 0:e.urlInfo,queryId:s});return}!X.current&&(X.current=(0,i.w)({content:e({id:"Notebook connection lost. Check your internet or wifi connection."}),type:"alert",autoDismiss:!1,onDismiss:()=>{X.current=null}}),eT(o,a,l,"NETWORK_DOWN"))},[eT,e,eI]),td=(0,u.useRef)([]),tf=(0,u.useCallback)(e=>(td.current.push(e),function(){let t=td.current.indexOf(e);!(t<0)&&td.current.splice(t,1)}),[]),tO=(0,T.S)(Z.current,10*P),tg=ey(),tv=(0,o.z)((e,t)=>{tg(t.notebookEditorState)}),tS=(0,H.w)(),[tm,th]=(0,f.M)(te(td.current,void 0!==window.__SNOWSIGHT_NOTEBOOK_PARENT_ORIGIN,tS),{},ty({readFromStage:eE,writeToStage:ep,writeToStageThrottled:ev,runCells:ek,onNotebookError:eP,logNotebookTelemetry:ez,logNotebookIPYNBTelemetry:eq,logNotebookCellUITelemetry:eJ,logNotebookCellRunTelemetry:eX,logNotebookRunTelemetry:e0,logNotebookSessionTelemetry:e1,logSessionReconnectCompleted:e4,logNotebookStartingSessionTelemetry:e9,logNotebookKernelRestartEnd:e2,logNotebookEditTelemetry:e3,fetchCachedResults:eL,saveResultHeight:tc,triggerUserInteractionKeepalive:eK,startRunningNotebookHeartbeat:eY,stopRunningNotebookHeartbeat:eZ,shutdownNotebook:e8,restartNotebook:e7,cancelExecution:eC,fetchResourceUsage:eN,restartNotebookKernel:eU,pushNotification:tt,updatePackage:to,controlResponseStatus:ti,onExternalAccessIntegrationError:eD,onNotebookConcurrentEditAlert:ej,reconnectSession:ta,connectWebsocket:ts,networkConditionChanged:tu,syncNotebookEditorState:tv},tO)),t_=(0,u.useCallback)((e,t,n)=>tm[(0,ew.E)(e,t,n)],[tm]),tI=(0,u.useCallback)(e=>{eB.current=e},[]),tT=(0,u.useCallback)((e,t,n)=>{let r=(0,ew.E)(e,t,n);return Z.current[r]},[]);return(0,u.useMemo)(()=>({getNotebookEditorState:t_,dispatchNotebookEditorStatesMap:th,connectToWebSocket:eI,disconnectWebsocket:eT,subscribe:tf,setHeartbeatPollEndTimeUpdateCallback:tI,getWebsocketConnection:tT}),[eI,eT,th,t_,tf,tI,tT])})()),tv=tg,tS=function({children:e}){return(0,r.jsx)(B.U,{children:(0,r.jsx)(tO,{children:e})})};tS.displayName="NotebookEditorGlobalProvider";let tm=()=>({cellRunStatus:"neverRun",pushdownQueries:[],startedAt:void 0,endAt:void 0,cellRunStatusBeforeExecution:"neverRun"}),th=()=>({status:tm(),message:[]})},764629:function(e,t,n){n.d(t,{v:()=>p});var r=n(561843),o=n(499269),i=n(518553),a=n(359701),l=n(60018),s=n(224284),c=n(883230);let u=e=>"string"==typeof e.source?e.source:e.source.join("\n");var d=n(751351),f=n(895458);function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}class p{swapCell(e,t){return new p((0,o.ZP)(this.data,n=>{let r=n.cells;return e>=0&&e<r.length&&t>=0&&t<r.length&&([r[e],r[t]]=[r[t],r[e]]),n}),this.options)}static fromJson(e,t){let{enforceUUIDAsCellId:n=!1,enableConvertRawToMarkdown:r=!1,enableSafeCellIdGeneration:o=!1,convertRawToMarkdown:i=!1,isCellNameAndVariableConflictDetectionEnabled:a=!1}=t||{};try{var l,c;let u=JSON.parse(e),y=(0,d.J)(u,{enforceUUIDAsCellId:n,enableConvertRawToMarkdown:r,enableSafeCellIdGeneration:o,convertRawToMarkdown:i});for(let e of y.cells)e.result=(0,f.Hx)();let b=!1;return a&&s.bW.pythonModule&&(y.globalVariableDefiningCellsCount=p.analyzeGlobalVars(y.cells),b=!0),new p(y,(l=E({},null!=t?t:{}),c={globalVariablesAnalyzed:b},c=null!=c?c:{},Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(c)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(c)).forEach(function(e){Object.defineProperty(l,e,Object.getOwnPropertyDescriptor(c,e))}),l))}catch(e){if(e instanceof d.m)throw e;throw Error(`Failed to parse nbformat string. ${null==e?void 0:e.message}`)}}toJson(){let e=[];for(let t of this.data.cells){let{result:n}=t,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,["result"]);e.push(r)}return JSON.stringify({metadata:this.data.metadata,nbformat_minor:this.data.nbformat_minor,nbformat:this.data.nbformat,cells:e},null,1)}static analyzeGlobalVars(e){let t={};for(let n of e)(0,a.ro)(n)&&(0,s.a_)(u(n)).forEach(e=>{t[e]=(t[e]||0)+1});return t}checkAndAnalyzeGlobalVars(e){s.bW.pythonModule&&!this.options.globalVariablesAnalyzed&&(e.globalVariableDefiningCellsCount=p.analyzeGlobalVars(e.cells),this.options.globalVariablesAnalyzed=!0)}addCell(e,t){return new p((0,o.ZP)(this.data,n=>{if(this.options.isCellNameAndVariableConflictDetectionEnabled&&this.checkAndAnalyzeGlobalVars(n),n.cells.splice(e,0,t),this.options.isCellNameAndVariableConflictDetectionEnabled&&(0,a.ro)(t)){let e=(0,s.a_)(u(t));n.globalVariableDefiningCellsCount||(n.globalVariableDefiningCellsCount={}),e.forEach(e=>{n.globalVariableDefiningCellsCount[e]=(n.globalVariableDefiningCellsCount[e]||0)+1})}}),this.options)}removeCell(e){return new p((0,o.ZP)(this.data,t=>{this.options.isCellNameAndVariableConflictDetectionEnabled&&this.checkAndAnalyzeGlobalVars(t);let n=t.cells[e];if(t.cells.splice(e,1),this.options.isCellNameAndVariableConflictDetectionEnabled&&(0,a.ro)(n)){let e=(0,s.a_)(u(n));t.globalVariableDefiningCellsCount||(t.globalVariableDefiningCellsCount={}),e.forEach(e=>{t.globalVariableDefiningCellsCount[e]&&(t.globalVariableDefiningCellsCount[e]-=1)})}}),this.options)}insertBefore(e,t){return new p((0,o.ZP)(this.data,n=>{if(e<0||e>=n.cells.length||t<0||t>=n.cells.length)return;let[r]=n.cells.splice(e,1);n.cells.splice(t,0,r)}),this.options)}moveCellUp(e){return this.swapCell(e,e-1)}moveCellDown(e){return this.swapCell(e,e+1)}modifyCell(e,t){return new p((0,o.ZP)(this.data,n=>{this.options.isCellNameAndVariableConflictDetectionEnabled&&this.checkAndAnalyzeGlobalVars(n);let r=u(n.cells[e]);if(n.cells[e].source=t,this.options.isCellNameAndVariableConflictDetectionEnabled&&(0,a.ro)(n.cells[e])){let e=(0,s.a_)(t),o=(0,s.a_)(r),i=[...e].filter(e=>!o.has(e)),a=[...o].filter(t=>!e.has(t));n.globalVariableDefiningCellsCount||(n.globalVariableDefiningCellsCount={}),i.forEach(e=>{n.globalVariableDefiningCellsCount[e]=(n.globalVariableDefiningCellsCount[e]||0)+1}),a.forEach(e=>{n.globalVariableDefiningCellsCount[e]&&(n.globalVariableDefiningCellsCount[e]-=1)})}}),this.options)}updateCellResult(e,t){let n=this.cellIndexById[e];if(void 0===n)return r.cM.warn("can not find cell corresponding to the cellId"),this;let i=E({},this.data.cells[n].result,t);return new p((0,o.ZP)(this.data,e=>{e.cells[n].result=i}),this.options)}updateCellStatus(e,t){let n=this.cellIndexById[e];if(void 0===n)return r.cM.warn("can not find cell corresponding to the cellId"),this;let i=E({},this.data.cells[n].result.status,t);return new p((0,o.ZP)(this.data,e=>{e.cells[n].result.status=i}),this.options)}updatePredictExecutionId(e){let t=this.cellIndexById[e];return void 0===t?(r.cM.warn("can not find cell corresponding to the cellId"),this):new p((0,o.ZP)(this.data,e=>{var n;let r=null!==(n=(0,o.Js)(e.cells))&&void 0!==n?n:[],i=t>0?r[t-1].result.executionId:void 0;for(let n=t;n<r.length;n++){let t=(0,c.b)(i,e.cells[n].result.selfContentHash,e.cells[n].result.runId);e.cells[n].result.predictedExecutionId=t,i=t}}),this.options)}setLanguage(e,t){return new p((0,o.ZP)(this.data,n=>{let r=n.cells[e],o=(0,a.ro)(r);if(this.options.isCellNameAndVariableConflictDetectionEnabled&&this.checkAndAnalyzeGlobalVars(n),(0,a.NT)(r)&&"markdown"!==t?n.cells[e]=function(e,t){let n=(0,l.B)(t,e.metadata.name);return n.metadata.collapsed=e.metadata.collapsed,n.metadata.codeCollapsed=e.metadata.collapsed,n.source=e.source,n.id=e.id,n}(r,t):(0,a.M1)(r)&&"markdown"===t?n.cells[e]=function(e){let t=(0,l.B)("markdown",e.metadata.name);return t.metadata.collapsed=e.metadata.collapsed&&e.metadata.codeCollapsed,t.source=e.source,t.id=e.id,t}(r):(0,a.M1)(r)&&"markdown"!==t&&(r.metadata.language=t),n.globalVariableDefiningCellsCount||(n.globalVariableDefiningCellsCount={}),o||"python"!==t){if(o&&"python"!==t){let t=u(n.cells[e]);(0,s.a_)(t).forEach(e=>{n.globalVariableDefiningCellsCount[e]&&(n.globalVariableDefiningCellsCount[e]-=1)})}}else{let t=u(n.cells[e]);(0,s.a_)(t).forEach(e=>{n.globalVariableDefiningCellsCount[e]=(n.globalVariableDefiningCellsCount[e]||0)+1})}}),this.options)}setWarehouse(e,t){return new p((0,o.ZP)(this.data,n=>{let r=n.cells[e];if(!(0,a.XN)(r))throw Error("setting warehouse on non-SQL cell not yet supported");r.metadata.EXECUTION_WAREHOUSE=t}),this.options)}setContentState(e,t){return new p((0,o.ZP)(this.data,n=>{if(void 0!==e){let r=n.cells[e];void 0!==t.collapsed&&(r.metadata.collapsed=t.collapsed),(0,a.M1)(r)&&void 0!==t.codeCollapsed&&(r.metadata.codeCollapsed=t.codeCollapsed)}else{let e=this.data.cells;for(let r=0;r<e.length;r++){let e=n.cells[r];void 0!==t.collapsed&&(e.metadata.collapsed=t.collapsed),(0,a.M1)(e)&&void 0!==t.codeCollapsed&&(e.metadata.codeCollapsed=t.codeCollapsed)}}}),this.options)}updateLastEditStatus(e){return new p((0,o.ZP)(this.data,t=>{t.metadata.lastEditStatus=e}),this.options)}renameCell(e,t){return new p((0,o.ZP)(this.data,n=>{n.cells[e].metadata.name=t}),this.options)}getCellsProto(){let e=[];for(let n of this.data.cells){var t;let{id:r,metadata:o,cell_type:i,source:a}=n,l={};for(let e in o)("string"==typeof o[e]||o[e]instanceof String)&&(l[e]=o[e]);e.push({id:r,name:null!==(t=o.name)&&void 0!==t?t:"",metadata:l,type:"code"===i?o.language:i,code:"string"==typeof a?a:a.join(""),outputFormat:o.outputFormat})}return e}getCellIndexById(e){return this.cellIndexById[e]}getCellById(e){return this.data.cells[this.cellIndexById[e]]}getCellResult(e){var t;return null===(t=this.getCellById(e))||void 0===t?void 0:t.result}getCellResultSize(e){var t;return(0,i.Q)(null===(t=this.getCellResult(e))||void 0===t?void 0:t.message)}getCellResultQueryId(e){var t,n,r;let o=null===(t=this.getCellResult(e))||void 0===t?void 0:t.status,[i]=null!==(n=null==o?void 0:o.pushdownQueries)&&void 0!==n?n:[];return null!==(r=null==i?void 0:i.queryId)&&void 0!==r?r:void 0}getLastEditStatus(){var e,t;return null===(t=this.data)||void 0===t?void 0:null===(e=t.metadata)||void 0===e?void 0:e.lastEditStatus}getGlobalVariables(){var e;return null!==(e=this.data.globalVariableDefiningCellsCount)&&void 0!==e?e:{}}clearAllResults(){let e=this.data.cells;return new p((0,o.ZP)(this.data,t=>{for(let n=0;n<e.length;n++)t.cells[n].result=(0,f.Hx)()}),this.options)}clearAllExecutionStates(){let e=this.data.cells;return new p((0,o.ZP)(this.data,t=>{for(let n=0;n<e.length;n++)"neverRun"!==t.cells[n].result.status.cellRunStatus&&(t.cells[n].result.status.cellRunStatus="idle")}),this.options)}isAllCellsExpanded(){let e=!0;return this.data.cells.forEach(t=>{(0,a.M1)(t)&&t.metadata.codeCollapsed&&t.metadata.collapsed&&(e=!1),(0,a.NT)(t)&&t.metadata.collapsed&&(e=!1)}),e}isCellResultCollapsed(e){var t;let n=this.cellIndexById[e];return!!(null===(t=this.data.cells[n])||void 0===t?void 0:t.metadata.collapsed)}constructor(e,t={}){this.data=e,this.options=t,this.cellIndexById={};for(let t=0;t<e.cells.length;t++){let n=e.cells[t];this.cellIndexById[n.id]=t}}}},361774:function(e,t,n){n.d(t,{d:()=>d});var r=n(499924),o=n(337607),i=n(334239),a=n(896315),l=n(98050);let s=({observerEnabled:e,visibleCallback:t})=>{(0,r.useEffect)(()=>{let n=()=>{e&&"visible"===document.visibilityState&&t&&t()};return document.addEventListener("visibilitychange",n),()=>{document.removeEventListener("visibilitychange",n)}},[e,t])};var c=n(777600),u=n(331119);let d=()=>{let{dataDiscoverRole:e,secondaryRoles:t}=(0,o.j)(),n=(0,a.m)(["user"]),d=(0,l.N)("UI_ENABLE_NOTEBOOK_FEATURE_38"),{localTimeToServerTime:E}=(0,u.h)(),p=(0,c.L)(),y=(0,r.useRef)(!1),b=(0,r.useCallback)(async n=>{var r;return null!==(r=JSON.parse(await p(n,e,t)).metadata.lastEditStatus)&&void 0!==r?r:null},[p,e,t]);return s({observerEnabled:d,visibleCallback:(0,r.useCallback)(()=>{y.current=!0},[])}),(0,r.useCallback)(async({id:e,urlId:t,currentNotebookViewId:r,lastEditStatusInMemory:o,lastestNotebookLoadTime:a})=>{let l=!1,s=o;if(!n.user.currentUserId)return{checkStatus:"cannotSaveDueToEditLocked",lastEditStatusRetrieved:null};let c=E();if(!(null==s?void 0:s.lastEditTime)||c-s.lastEditTime>6e4||d&&n.user.currentUserId===s.authorId&&s.sessionId!==r||y.current){if(s=await b(e),(0,i.IG)(i.cf.NOTEBOOK_EDIT_LOCK_CHECK)){var u;(null==o?void 0:o.lastEditTime)?c-(null!==(u=null==s?void 0:s.lastEditTime)&&void 0!==u?u:0)>6e4?console.debug("[\uD83D\uDD10 Notebook Concurrent Editing] Recent check expired, reload latest edit history from file: ",s):n.user.currentUserId===(null==s?void 0:s.authorId)&&s.sessionId!==r?console.debug("[\uD83D\uDD10 Notebook Concurrent Editing] Same user switched to a different session: ",s):y.current&&console.debug("[\uD83D\uDD10 Notebook Concurrent Editing] Notebook transit to focused state, reload latest edit history from file: ",s):console.debug("[\uD83D\uDD10 Notebook Concurrent Editing] No in memory last edit status, load latest edit history from file: ",s)}l=!0,y.current&&(y.current=!1)}s&&s.notebookId===t||(s={notebookId:t,authorId:"",authorName:"",sessionId:r,lastEditTime:0},l=!0);let p="canSave",O=a?E(a):0;return c=E(),s.authorId===n.user.currentUserId?d&&O&&s.sessionId!==r&&O<s.lastEditTime?((0,i.IG)(i.cf.NOTEBOOK_EDIT_LOCK_CHECK)&&console.debug("[\uD83D\uDD10 Notebook Concurrent Editing] Recent edit was from the same user with changes from other sessions. lastEditTime: ",f(s.lastEditTime)," current time: ",f(c)," lastestNotebookLoadServerTime: ",f(O)),p="cannotSaveDueToRecentChangeFromSameUser"):((0,i.IG)(i.cf.NOTEBOOK_EDIT_LOCK_CHECK)&&console.debug("[\uD83D\uDD10 Notebook Concurrent Editing] Recent edit was from the same user. lastEditTime: ",f(s.lastEditTime)," current time: ",f(c)," lastestNotebookLoadServerTime: ",f(O)),p="canSave"):c-s.lastEditTime<=6e4?((0,i.IG)(i.cf.NOTEBOOK_EDIT_LOCK_CHECK)&&console.debug("[\uD83D\uDD10 Notebook Concurrent Editing] Active lock from different user. lastEditTime: ",f(s.lastEditTime)," current time: ",f(c)),p="cannotSaveDueToEditLocked"):O&&O<s.lastEditTime?((0,i.IG)(i.cf.NOTEBOOK_EDIT_LOCK_CHECK)&&console.debug("[\uD83D\uDD10 Notebook Concurrent Editing] Inactive Lock but has recent changes after previous load. lastEditTime: ",f(s.lastEditTime)," lastestNotebookLoadServerTime ",f(O)),p="cannotSaveDueToRecentChangeFromOtherUser"):((0,i.IG)(i.cf.NOTEBOOK_EDIT_LOCK_CHECK)&&console.debug("[\uD83D\uDD10 Notebook Concurrent Editing] Inactive Lock and has no recent changes after previous load. lastEditTime: ",f(s.lastEditTime)," lastestNotebookLoadServerTime ",f(O)),p="canSave"),{checkStatus:p,lastEditStatusRetrieved:l?s:null}},[n.user.currentUserId,b,E,d])},f=e=>new Date(e).toISOString()},39447:function(e,t,n){n.d(t,{Z:()=>a});var r=n(499924),o=n(491742),i=n(896315);let a=()=>{let{user:e}=(0,i.m)(["user"]);return(0,r.useCallback)(async({role:t,secondaryRoles:n})=>{let r=new o.L("SELECT SYSDATE()").toQuery();return new Date((await e.api.query(r,{isInternal:!0,role:t,secondaryRoles:n,desc:"get-system-utc-time"})).rows[0][0])},[e.api])}},331119:function(e,t,n){n.d(t,{h:()=>d});var r=n(499924),o=n(337607),i=n(896315),a=n(98050),l=n(39447),s=n(877814),c=n(832898);function u(){let e=(0,s.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.fetchSystemDate}let d=()=>{let{user:e}=(0,i.m)(["user"]),{dataDiscoverRole:t,secondaryRoles:n}=(0,o.j)(),s=(0,c.U)(l.Z,u)(),[d,f]=(0,r.useState)(0),E=(0,a.N)("UI_ENABLE_NOTEBOOK_FEATURE_24"),p=!!e.currentUserId;(0,r.useEffect)(()=>{let e=async()=>{let e=await s({role:t,secondaryRoles:n}),r=Date.now();f(e.getTime()-r)};E&&p&&e()},[t,n,p,e.api,E,s]);let y=(0,r.useCallback)(e=>(null!=e?e:Date.now())+d,[d]);return{localToServerTimeOffset:d,localTimeToServerTime:y}}},149268:function(e,t,n){n.d(t,{q:()=>i});var r=n(499924),o=n(89357);let i=(e,t)=>(0,r.useCallback)((n,r,i)=>{let{id:a,role:l,secondaryRoles:s}=r,c=e[(0,o.E)(a,l,s)];c&&t(c,r,i)},[e,t])},328349:function(e,t,n){n.d(t,{FG:()=>o,Ff:()=>E,IM:()=>v,P7:()=>S,QX:()=>c,Sc:()=>y,Ti:()=>p,Xv:()=>l,_n:()=>r,bZ:()=>b,g3:()=>g,gr:()=>a,kk:()=>s,lX:()=>i,nL:()=>O,sW:()=>u,wT:()=>d,x5:()=>f});let r="notebook-open-event",o="notebook-create-event",i="notebook-rename-event",a="notebook-edit-event",l="cell-ui-event",s="cell-run-event",c="submit-cell-run-event",u="ipynb-loading",d="mark-ws-heartbeat-start",f="websocket-connection",E="session-reconnect",p="notebook-session-start",y="notebook-session-end",b="notebook-run-event",O="notebook-kernel-restart-event",g="entity-duplicate-start",v="notebook-duration-new-cache-load",S="notebook-websocket-full-connecting-duration"},201801:function(e,t,n){n.d(t,{A:()=>r});function r(e){return!(e.length<1)&&!(e.length>64)&&!!/^[a-zA-Z0-9-_]+$/u.test(e)}},173584:function(e,t,n){n.d(t,{Q:()=>i,w:()=>a});var r,o,i=((r={}).NotConnected="notConnected",r.Connected="connected",r.Connecting="connecting",r.Reconnecting="reconnecting",r.RestartingKernel="restartingKernel",r.Error="error",r),a=((o={}).NOTEBOOK_RECONNECT="NOTEBOOK_RECONNECT",o.GS_XP_STREAM_CLOSED="1011: GS/XP stream closed",o.NOTEBOOK_IDLE_TIMEOUT="1011: Idle time reached",o.USER_NOTEBOOK_SHUTDOWN="USER_NOTEBOOK_SHUTDOWN",o.NEW_WEBSOCKET_CONNECTION="1011: New websocket started",o.CLOSE_NOTEBOOK_PAGE="CLOSE_NOTEBOOK_PAGE",o.NETWORK_DOWN="NETWORK_DOWN",o.SERVER_INTERNAL_ERROR="1011: Internal error in [Streamlit server]",o.NOTEBOOK_RECONNECT_FAILED="1008: RECONNECTION_FAILED",o)},297251:function(e,t,n){n.d(t,{N0:()=>f,Qe:()=>p,Te:()=>d,Zl:()=>u,eO:()=>c,wZ:()=>s,zd:()=>E});var r=n(946570),o=n(491742),i=n(26194),a=n(345970),l=n(325463);let s=(e,t)=>({isInternal:!0,role:e,secondaryRoles:t,desc:"generate-notebook-url"});function c(e){return e.isPrivatelinkEnabled?new o.L().add("CALL SYSTEM$GENERATE_NOTEBOOK_URL_FROM_NAME({} , {} );",(0,l.i)((0,i.m)(e.fullNotebookIdentifier)),(0,a.S)(e.isAccountUsingPrivateLink)).toQuery():new o.L().add("CALL SYSTEM$GENERATE_NOTEBOOK_URL_FROM_NAME({});",(0,l.i)((0,i.m)(e.fullNotebookIdentifier))).toQuery()}function u({fullNotebookIdentifier:e,queryId:t}){return t?new o.L().add("CALL SYSTEM$GENERATE_READ_ONLY_NOTEBOOK_TOKEN_WITH_REPLAY_QUERY_ID({}, {});",(0,l.i)((0,i.m)(e)),(0,l.i)(t)).toQuery():new o.L().add("CALL SYSTEM$GENERATE_NOTEBOOK_TOKEN({});",(0,l.i)((0,i.m)(e))).toQuery()}function d(e){let t=new URL(e);return{baseUriParts:{host:t.hostname,port:""===t.port?443:Number(t.port),basePath:(0,r.WC)()?t.pathname.split("/").filter(e=>"bootstrap"!==e).join("/"):t.pathname},isHttps:"https:"===t.protocol}}function f(e){return e&&`${e.isHttps?"https":"http"}://${e.baseUriParts.host}:${e.baseUriParts.port}${e.baseUriParts.basePath}`}function E({fullNotebookIdentifier:e,queryId:t}){return new o.L().add("CALL SYSTEM$GET_NOTEBOOK_EXECUTION_MAIN_FILE({}, {});",(0,l.i)((0,i.m)(e)),(0,l.i)(t)).toQuery()}function p({database:e,schema:t}){return new o.L().add("SELECT SYSTEM$SHOW_NOTEBOOK_COMPUTE_POOLS(?)",(0,l.i)(`${e}.${t}`)).toQuery()}},598955:function(e,t,n){n.d(t,{Dz:()=>o,Y7:()=>r,mk:()=>i});let r="notebooks-result-height-cache",o=50;function i(){let e;try{e=new Map(JSON.parse(localStorage.getItem(r)||"[]"))}catch(t){localStorage.setItem(r,"[]"),e=new Map}return e}},336766:function(e,t,n){function r(e){return"running"===e||"populatingResults"===e}function o(e){return r(e)||"waiting"===e}function i(e){if("code"!==e.cell_type)return!1;let t="string"==typeof e.source?e.source:e.source.join("");return/^(?!\s*#)\s*[!%](?:pip|conda)\s+install/mu.test(t)}function a(e){return"success"===e||"error"===e}n.d(t,{WT:()=>r,YX:()=>o,be:()=>a,rv:()=>i})},359701:function(e,t,n){function r(e){return"python"===e.metadata.language}function o(e){return"sql"===e.metadata.language}function i(e){return!!(r(e)||o(e))}function a(e){return"markdown"===e.cell_type}function l(e){let{metadata:t,cell_type:n}=e;return"markdown"===n?n:t.language}function s(e){return"code"===e.cell_type}n.d(t,{DA:()=>l,M1:()=>i,NT:()=>a,XN:()=>o,fM:()=>s,ro:()=>r})},224284:function(e,t,n){n.d(t,{We:()=>o,a_:()=>i,bW:()=>r});let r={pythonModule:null},o=()=>{Promise.all([n.e("52734"),n.e("19294"),n.e("31505")]).then(n.bind(n,996081)).then(e=>{r.pythonModule=e})};function i(e){if(!r.pythonModule)return new Set;let{parser:t}=r.pythonModule.python().language,n=t.parse(e),o=new Set,i=n.cursor(),a=t=>{if(t.firstChild()){do"VariableName"===t.name?o.add(e.slice(t.from,t.to)):("TupleExpression"===t.name||"ExpressionList"===t.name)&&a(t);while(t.nextSibling());t.parent()}},l=(t,n=0)=>{if(!(n>2))do{let r=t.name;if("FunctionDefinition"!==r&&"ClassDefinition"!==r||n){if(("AssignStatement"===r||"ForStatement"===r||"WhileStatement"===r)&&0===n){if(t.firstChild()){let n=-1,r=0;do"AssignOp"===t.name&&(n=r),r++;while(t.nextSibling());for(;t.prevSibling(););r=0;do(r<n||-1===n)&&("VariableName"===t.name?o.add(e.slice(t.from,t.to)):("TupleExpression"===t.name||"ExpressionList"===t.name)&&a(t)),r++;while(t.nextSibling());t.parent()}t.firstChild()&&(l(t,n),t.parent())}else t.firstChild()&&(l(t,n),t.parent())}else t.firstChild()&&t.nextSibling()&&(o.add(e.slice(t.from,t.to)),t.parent()),t.firstChild()&&(l(t,n+1),t.parent())}while(t.nextSibling())};return i.firstChild()&&l(i),o}},883230:function(e,t,n){n.d(t,{S:()=>i,b:()=>a});var r=n(271754),o=n(359701);function i(e,t){let n=r.sha256.create();if(n.update(e.id),!t){var i;n.update(null!==(i=e.metadata.name)&&void 0!==i?i:"")}return n.update((0,o.DA)(e).toUpperCase()),n.update("string"==typeof e.source?e.source:e.source.join("")),n.hex()}function a(e,t,n){let o=r.sha256.create();return o.update(null!=e?e:""),o.update(null!=t?t:""),o.update(null!=n?n:""),o.hex()}},60018:function(e,t,n){n.d(t,{B:()=>i});var r=n(251233),o=n(895458);function i(e,t,n){let i;return"markdown"===e?{cell_type:"markdown",id:r.Z(),metadata:{name:t},source:null!=n?n:"",result:(0,o.Hx)()}:{cell_type:"code",id:r.Z(),metadata:{language:e,name:t},outputs:[],source:null!=n?n:"",execution_count:null,result:(0,o.Hx)()}}},843504:function(e,t,n){n.d(t,{t:()=>r});function r(e,t){switch(e){case"valid":case"empty":return null;case"tooLong":return t({id:"Exceeds maximum length of 255 characters"});case"invalidCharacters":return t({id:"Name can only include letters, numbers, spaces, underscores, -, $, and :"})}}},452431:function(e,t,n){n.d(t,{i:()=>r});function r(e){let t=new Set(e.map(e=>{var t;return null===(t=e.metadata)||void 0===t?void 0:t.name})),n="";for(let r=1;r<=e.length+1;r++){let e=`cell${r}`;if(!t.has(e)){n=e;break}}return n}},623520:function(e,t,n){function r(e){return"pending"===e||"fetching"===e}function o(e){return"loaded"===e||"error"===e}n.d(t,{P:()=>r,f:()=>o})},351388:function(e,t,n){function r(e){var t,n;return null!==(n=e.delta)&&void 0!==n&&null!==(t=n.newElement)&&void 0!==t&&!!t.exception}function o({message:e,errorType:t}){var n,o,i,a,l,s,c;return r(e)&&(null===(i=e.delta)||void 0===i?void 0:null===(o=i.newElement)||void 0===o?void 0:null===(n=o.exception)||void 0===n?void 0:n.type)===t&&null!==(c=null===(s=e.delta)||void 0===s?void 0:null===(l=s.newElement)||void 0===l?void 0:null===(a=l.exception)||void 0===a?void 0:a.message)&&void 0!==c?c:void 0}n.d(t,{G:()=>r,e:()=>o})},751351:function(e,t,n){n.d(t,{m:()=>y,J:()=>b});var r=n(561843),o=n(207055),i=n.n(o),a=n(251233),l=n(544005),s=n(201801);let c="ce110000-1111-2222-3333-ffffff",u=c+"{:06d}",d=c.length+6;class f{_markIfMatchingPattern(e){let t=null;if(e.length===d&&e.startsWith(c)){if(!Number.isInteger(t=Number(e.slice(c.length))))return null;this._seenIndexes[t]=t}return t}markIfMatchingPattern(e){let t=null;return null!==e&&(t=this._markIfMatchingPattern(e)),t}_doGeneratedId(){let e=u.replace("{:06d}",this._lastGeneratedIndex.toString().padStart(6,"0"));return this._lastGeneratedIndex+=1,e}_generateNextId(){let e=null;for(;null===e;){for(;this._lastGeneratedIndex in this._seenIndexes;)this._lastGeneratedIndex+=1;(e=this._doGeneratedId())in this._seenIds&&(e=null)}return e}generateAndMarkNextId(){let e=this._generateNextId();return this._seenIds[e]=e,e}ensureValidId(e){return null===e||""===e||e in this._seenIds?this.generateAndMarkNextId():(this._seenIds[e]=e,e)}constructor(){this._lastGeneratedIndex=0,this._seenIds={},this._seenIndexes={}}}var E=n(359701),p=n(452431);class y extends Error{constructor(...e){super(...e),this.name="RawCellDetectedError",this.message="RawCellDetectedError"}}function b(e,t){let{enforceUUIDAsCellId:n=!1,enableConvertRawToMarkdown:o=!1,enableSafeCellIdGeneration:c=!1,convertRawToMarkdown:u=!1}=t||{},d=i()(e);if(!Array.isArray(d.cells))throw Error("Can not find cell arrays.");let b=new f;for(let e of d.cells){var g;if(!e||!O(e))throw Error("Format of a cell is incorrect.");if(o&&"raw"===e.cell_type){if(!u)throw new y;e.cell_type="markdown"}if("code"!==e.cell_type&&"markdown"!==e.cell_type)throw Error("Cell type is incorrect.");if(c){let t=null==e.id?null:e.id.toString();e.id=b.ensureValidId(t),e.id!==t&&r.cM.info("parseIpynb",`New notebook cell ID is generated: ${e.id}. Original ID: ${t}.`)}else e.id||(e.id=a.Z());if("string"!=typeof e.id||!(0,s.A)(e.id))throw Error("Cell id is not valid.");n&&(g=e.id,!/^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$/u.test(g))&&(e.id=a.Z()),"code"!==e.cell_type||e.outputs||(e.outputs=[]),"code"===e.cell_type&&void 0===e.execution_count&&(e.execution_count=null),e.source||(e.source=""),O(e.metadata)||(e.metadata={}),e.metadata.name||(e.metadata.name=(0,p.i)(d.cells)),(0,E.fM)(e)&&!e.metadata.language&&(e.metadata.language="python")}return e.nbformat!==l.$&&(d.nbformat=l.$),d}function O(e){return"object"==typeof e}},89357:function(e,t,n){n.d(t,{E:()=>o});var r=n(121085);function o(e,t,n){let o=(0,r.P)(e.database),i=(0,r.P)(e.schema),a=(0,r.P)(e.name);return`${t}.${n}.${o}.${i}.${a}`}},352567:function(e,t,n){n.d(t,{ne:()=>l,qq:()=>o,vi:()=>a});var r=n(173584);let o=[r.w.NOTEBOOK_RECONNECT,r.w.NOTEBOOK_IDLE_TIMEOUT,r.w.USER_NOTEBOOK_SHUTDOWN,r.w.NEW_WEBSOCKET_CONNECTION,r.w.CLOSE_NOTEBOOK_PAGE,r.w.GS_XP_STREAM_CLOSED,r.w.NETWORK_DOWN],i=[r.w.NOTEBOOK_RECONNECT_FAILED,r.w.SERVER_INTERNAL_ERROR],a=({udfConnectionStatus:e,disconnectReason:t})=>e===r.Q.Connected&&!o.includes(null!=t?t:"")&&!i.some(e=>null==t?void 0:t.startsWith(e)),l=e=>!!(null==e?void 0:e.startsWith(r.w.NOTEBOOK_RECONNECT_FAILED))},105242:function(e,t,n){n.d(t,{Dy:()=>l,HT:()=>s,jX:()=>c});var r=n(491742),o=n(26194),i=n(708048),a=n(325463);function l(e,t){let{role:n,secondaryRoles:i,fullNotebookIdentifier:l,serviceIdentifier:s}=t;return e.api.query(new r.L("CALL SYSTEM$DELETE_RUNNING_NOTEBOOK_INSTANCES({}, {})",(0,a.i)((0,o.m)(l)),(0,a.i)(s)).toQuery(),{role:n,secondaryRoles:i,isInternal:!0,desc:"delete-notebook-instances"})}function s(e,t){let{fullNotebookIdentifier:n,role:i,secondaryRoles:l}=t;return e.api.query(new r.L("CALL SYSTEM$DELETE_RUNNING_NOTEBOOK_INSTANCES({})",(0,a.i)((0,o.m)(n))).toQuery(),{role:i,secondaryRoles:l,isInternal:!0,desc:"delete-notebook-instances"})}async function c({userStore:e,fullNotebookIdentifier:t,role:n,secondaryRoles:o}){let a=new r.L().add("CALL SYSTEM$LIST_RUNNING_NOTEBOOK_INSTANCES(?)",(0,i.M)(t)).toQuery(),[[l]]=(await e.api.query(a,{role:n,secondaryRoles:o,isInternal:!0,desc:"system-list-running-notebook-instances"})).rows;return JSON.parse(l).filter(e=>e.serviceId.length>0)}},713579:function(e,t,n){n.d(t,{Ex:()=>u,Ke:()=>l,_Z:()=>c,_y:()=>a,ae:()=>s});let r=/^[_a-zA-Z]/u,o=/^[_a-zA-Z][_a-zA-Z0-9]*$/u;var i,a=((i={}).DUPLICATE="DUPLICATE",i.RESERVED_WORDS="RESERVED_WORDS",i.INVALID_START="INVALID_START",i.INVALID_CHAR="INVALID_CHAR",i.VARIABLE_CONFLICT="VARIABLE_CONFLICT",i.NONE="NONE",i);function l(e,t){return new Set(["and","as","assert","break","class","continue","def","del","elif","else","except","false","finally","for","from","global","if","import","in","is","lambda","none","nonlocal","not","or","pass","raise","return","true","try","while","with","yield"]).has(e.toLowerCase())?{isValid:!1,reason:"RESERVED_WORDS"}:r.test(e)?o.test(e)?t[e]?{isValid:!1,reason:"VARIABLE_CONFLICT"}:{isValid:!0,reason:"NONE"}:{isValid:!1,reason:"INVALID_CHAR"}:{isValid:!1,reason:"INVALID_START"}}function s(e,t,n){for(let r=0;r<e.length;r++)if(e[r].metadata.name===t&&r!==n)return!1;return!0}function c(e,t){switch(e){case"RESERVED_WORDS":return t({id:"Reserved word in Python cannot be used as a cell name."});case"INVALID_START":return t({id:"Cell names must start with a letter or an underscore."});case"INVALID_CHAR":return t({id:"Cell names can only contain alphanumeric characters and underscores."});case"DUPLICATE":return t({id:"Cell name must be unique."});case"VARIABLE_CONFLICT":return t({id:"Cant use the same name as a Python variable."});default:return""}}function u(e,t){return t({id:"Failed to rename cell. {message}"},{message:c(e,t)})}},95238:function(e,t,n){n.d(t,{V:()=>o});var r=n(107181);let o=e=>{let t=e.trim();return t?t.length>r.g0?"tooLong":/^[a-zA-Z0-9_$\- :]+$/u.test(t)?"valid":"invalidCharacters":"empty"}},853509:function(e,t,n){n.d(t,{R:()=>l});var r=n(832943),o=n.n(r),i=n(121085),a=n(84225);function l(e){var t,n;return[...(0,a.p)(!o()(e.database),[(0,i.P)(null!==(t=e.database)&&void 0!==t?t:"")]),...(0,a.p)(!o()(e.schema),[(0,i.P)(null!==(n=e.schema)&&void 0!==n?n:"")]),(0,i.P)(e.name)].join(".")}},100067:function(e,t,n){n.d(t,{O:()=>r});function r(e){return e?e.cols.reduce((e,t,n)=>{var r,o;return r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},e),o=o={[t.name.toUpperCase()]:n},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}),r},{}):{}}},84225:function(e,t,n){function r(e){return"function"==typeof e?e():e}function o(e,t){return r(e)?t:{}}function i(e,...t){return r(e)?t:[]}n.d(t,{V:()=>o,p:()=>i})},652088:function(e,t,n){n.d(t,{$2:()=>d,VP:()=>b,Ww:()=>p,YJ:()=>E,Zg:()=>u,dy:()=>f,hb:()=>s,p6:()=>c,tx:()=>O});var r=n(793380),o=n.n(r),i=n(578892),a=n.n(i),l=n(703559);function s(e){if(null==e);else if("true"===e.toLowerCase())return!0;else if("false"===e.toLowerCase())return!1;return null}function c(e){return e?new Date(e):null}function u(e){if(e){let t=Number(e);return Number.isNaN(t)?null:t}return null}function d(e){if(e)try{return JSON.parse(e)}catch(e){}return null}function f(e){try{let t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return[]}}function E(e,t){let n=Object.entries(e);return({tableData:e,timestamp:r})=>{let i=p(e),{rows:d}=e,f=t=>{let r={},a={};for(let d of(Object.keys(i).forEach(e=>{let n=i[e],r=null==n?void 0:n.column,o=null==n?void 0:n.index;if(void 0===r||void 0===o)throw Error(`Got mapping of '${e}' not present in the database response`);a[r.name]=(function(e){switch(e){case"text":case"category":case"email":case"link":case"json":case"variant":case"array":case"object":return e=>e;case"fixed":case"number":case"real":case"currency":return u;case"bool":case"boolean":return s;case"date":case"timestamp_ntz":case"timestamp_ltz":case"timestamp_tz":return c;default:throw(0,l.U)(e),Error("unreachable")}})(r.type)(t[o])}),n)){let[n,l]=d;if(o()(l))r[n]=l(a);else{let o=y(l)?l.column:l,s=i[o.toUpperCase()];if(!s){let t=e.cols.map(e=>e.name).join(", ");throw Error(`Got mapping of '${o}' not present in the actual columns: ${t}`)}r[n]=y(l)?l.convert(t[s.index]):a[s.column.name]}}return r};return a()(t)?{rows:d.slice(0,t).map(f),isIncomplete:d.length>t,lastLoadTime:new Date(r)}:{rows:d.map(f)}}}function p(e){return e.cols.reduce((e,t,n)=>{var r,o;return r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},e),o=o={[t.name.toUpperCase()]:{index:n,column:t}},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}),r},{})}function y(e){return"string"!=typeof e}function b(e,t={}){return e.map(e=>{let n=t[e];return n?`${n} as ${e}`:e}).join(", ")}function O(e,t={}){return e.map(e=>{let n=t[e];return n&&n!==e?`${n} as ${e}`:e}).join(", ")}},98050:function(e,t,n){n.d(t,{N:()=>o});var r=n(896315);let o=e=>{var t;let{user:n}=null!==(t=(0,r.m)([]).untracked)&&void 0!==t?t:{};return null==n?void 0:n.isUiSpecifiedSnowflakeFeatureEnabled(e)}},620149:function(e,t,n){n.d(t,{z:()=>s});var r=n(641419),o=n(51723),i=n(499924),a=n(931878),l=n(559673);let s=()=>{let{logEvent:e}=(0,o.useTelemetry)(),t=(0,i.useCallback)((e,...t)=>l.H$(e,...t),[]),n=(0,i.useCallback)((e,...t)=>l.bR(e,...t),[]),s=(0,i.useCallback)((e,...t)=>l.OY(e,...t),[]),c=(0,i.useCallback)(e=>l.x3(e),[]),u=(0,i.useCallback)(e=>{var t,r;let o;if(e.isUserE2E){let t=l.Oi(e);o=n(e.event,t).duration}let i=l.Oi((t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},e),r=r={isUserE2E:!1},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t));return{durationMs:n(e.event,i).duration,e2eDurationMs:o}},[n]);return{markEventStart:t,measureEventDuration:n,markE2EEventStart:s,isMarkerSet:c,_getDurationsFromMarker:u,logEventToSnowflakeAndDatadog:(0,i.useCallback)(t=>{e(t),a.A.isDisallowedDatadogEvent(t)&&r.v.addAction(t.event,t.data)},[e])}}},559673:function(e,t,n){n.d(t,{H$:()=>a,OY:()=>l,Oi:()=>i,bR:()=>c,x3:()=>s});var r=n(561843);let o=(e,...t)=>`${e}${t?":":""}${null==t?void 0:t.join(":")}`,i=e=>{var t,n;let r=e.isUserE2E?[...null!==(t=e.markers)&&void 0!==t?t:[],"user-e2e"]:[...null!==(n=e.markers)&&void 0!==n?n:[]];return o(e.event,...r)},a=(e,...t)=>{let n=i({event:e,markers:t});return performance.clearMarks(n),performance.mark(n)},l=(e,...t)=>{let n=i({event:e,markers:t,isUserE2E:!0});return performance.clearMarks(n),performance.mark(n)},s=e=>{let t=i(e),n=performance.getEntriesByName(t);return!!(n&&n.length>0&&n.filter(e=>"mark"===e.entryType).length>0)},c=(e,...t)=>{let n=t.join(":");try{return performance.measure(e,n)}catch(e){return r.cM.info("[TELEMETRY] measureEvent: Event start was not marked for the marker: ",n),{duration:-1}}}},333811:function(e,t,n){n.d(t,{UB:()=>u,ZX:()=>s,_T:()=>d,ep:()=>c,kH:()=>l,so:()=>a});var r=n(499924),o=n(601583),i=n(896315);function a(e){let t=(0,r.useContext)(i.L);return!!(null==t?void 0:t.user.isSnowflakeFeatureEnabled(e))}function l(e){let t=(0,r.useContext)(i.L);return!!(null==t?void 0:t.user.isUiSpecifiedSnowflakeFeatureEnabled(e))}function s(e){let t=(0,i.m)(["user"]);return!!(null==t?void 0:t.user.isUiSpecifiedSnowflakeFeatureEnabled(e))}function c(e){var t;let n=(0,r.useContext)(i.L);return null!==(t=null==n?void 0:n.user.uiSpecifiedSnowflakeFeatureNumber(e))&&void 0!==t?t:0}function u(e){var t;let n=(0,r.useContext)(i.L);return null!==(t=null==n?void 0:n.user.uiSpecifiedSnowflakeFeatureDate(e))&&void 0!==t?t:null}function d(e){let t=(0,r.useContext)(i.L),{loading:n,data:a}=(0,o.w2)(!0),l=!!(null==t?void 0:t.user.isUiSpecifiedSnowflakeFeatureEnabled(e));return{[`IS_${e}_VISIBLE`]:l,[`IS_${e}_IN_PREVIEW`]:!!a&&!n}}},934074:function(e,t,n){n.d(t,{E:()=>l});var r=n(499924),o=n(663271),i=n(51961),a=n(260999);function l(e){let t=(0,a.k)();return(0,r.useCallback)(async n=>{await (0,i.J)((0,i.R)(e),(0,o.mJ)(n),t)},[e,t])}},483883:function(e,t,n){n.d(t,{KP:()=>l,NT:()=>f,Nk:()=>m,p5:()=>d,EX:()=>s.E});var r=n(499924),o=n(758566),i=n(815046),a=n(822920);function l(){let{read:e}=(0,a.l)(),{formatMessage:t}=(0,o.Z)();return(0,r.useCallback)(async({rootLocation:n,mainFile:r,throwRawError:o})=>{let{stage:a,path:l}=(0,i.T)(n),s=await e(a,l,r);if(!s.success){if(o)throw s.error;throw Error(t({id:"An unexpected error occurred. Try refreshing the page or contact Support if the error persists."}))}return s.content},[t,e])}var s=n(934074),c=n(51723),u=n(392800);function d(){let{logNavigation:e}=(0,c.useTelemetry)();(0,r.useEffect)(()=>{e(u.Hku)},[e])}function f(){let e=(0,r.useRef)(),{logEvent:t}=(0,c.useTelemetry)(),n=(0,r.useCallback)(()=>{if(!e.current)return;let t=Math.round(performance.now()-e.current);return e.current=void 0,t},[]),o=(0,r.useCallback)(n=>{e.current=performance.now(),t({event:u.fmT,type:"ui_performance",component:"useStageFilesUploader",data:{filesCount:n}})},[t]);return{logUploadStarted:o,logUploadSucceeded:(0,r.useCallback)(e=>{t({event:u.rlY,type:"ui_performance",component:"useStageFilesUploader",data:{uploadedFilesCount:e,uploadingTimeInMs:n()}})},[t,n]),logUploadFailed:(0,r.useCallback)(e=>{t({event:u.U3e,type:"ui_response_error",component:"useStageFilesUploader",data:{error:e,uploadingTimeInMs:n()}})},[t,n])}}var E=n(524603),p=n(315234),y=n(925819),b=n(278257),O=n(264644),g=n(100467),v=n(432541),S=n(107370);function m(){let{write:e}=(0,a.l)(),t=(0,r.useContext)(b.V1),{formatMessage:n}=(0,o.Z)(),l=(0,S.iA)();return(0,r.useCallback)(async(r,o,a,s,c)=>{var u,d;let f=await (0,O.W)(t.get(o,r,g.Y.describe,{secondaryRoles:a}));if((0,v.D)(f))throw Error(n({id:"Could not get details for {type} object. Error: {message}"},{type:r.type.toLowerCase(),message:null===(u=f.error)||void 0===u?void 0:u.message}));if(!f.result)throw Error(n({id:"Could not get details for {type} object."},{type:r.type.toLowerCase()}));let{rootLocation:b,kind:S,isLive:m}=(0,p.R)(f.result.columns[0]),h=b;if("versioned"===S&&!m){let{liveVersionLocationUri:e}=await l({id:r,role:o,secondaryRoles:a});h=(0,y.h)(e,n({id:"Expected a valid live version location"}))}let{stage:_,path:I}=(0,i.T)(h),T=await e(_,E.join(I,E.dirname(f.result.columns[0].mainFile)),E.basename(f.result.columns[0].mainFile),s);if(!T.success){if(c)throw T.error;throw Error(n({id:"Could not save {type} content to stage. Error: {message}"},{type:r.type.toLowerCase(),message:null===(d=T.error)||void 0===d?void 0:d.message}))}},[l,n,t,e])}},976142:function(e,t,n){n.d(t,{Q:()=>R,B:()=>C});var r=n(184168),o=n(499924),i=n(814539),a=n(897727),l=n(434025),s=n(26194),c=n(611541),u=n(845637),d=n(109621),f=n(650294),E=n(700010),p=n(359135),y=n(392800),b=n(849346),O=n(736625);let g=({fullStreamlitIdentifier:e,clearFatalError:t,appStateMachine:n,appPreviewStatus:r,setAppPreviewStatus:i,updateIframeFetchId:a,loadAppTelemetry:l,websocketTelemetry:s,interactiveStartedTelemetry:c,initialResponseCacheState:u,iframeRef:g,iframeOrigin:v})=>{let S=(0,E.Yb)(),m=(0,E.EX)(),h=(0,O.h)(),_=(0,f.v)(n,b.pO),I=m?_:r===d.I.suspended;return{reloadApp:(0,o.useCallback)(({isReconnect:r,resetLoadAppTelemetry:o,source:f})=>{if(S&&h({fullStreamlitIdentifier:e,componentName:y.uD0,eventName:y.igR,eventType:"ui_impression",additionalTelemetryParams:{source:f}}),t("fatalErrorPage"===f),I&&!m&&i(d.I.loaded),r&&v){var E,b;m&&n.send("RESTART");let e={stCommVersion:p.hb,type:"RESTART_WEBSOCKET_CONNECTION"};null===(b=g.current)||void 0===b||null===(E=b.contentWindow)||void 0===E||E.postMessage(e,v),s.onRestartWebsocketConnection()}else m&&("fatalErrorPage"===f?n.send("FORCE_RESTART"):n.send("RESTART")),a();"retry"===f&&(m&&n.send("FAIL"),l.incrementRetryCount()),o&&(l.reset(),c.reset(),u.reset())},[t,I,v,i,m,n,g,h,e,a,l,s,c,u,S])}};var v=n(124823),S=n(251233),m=n(439337),h=n(767904);let _=(0,m.C)({tsTypes:{},schema:{context:{},events:{}},context:{iframeLoadRetryCount:0},id:"streamlitApp",initial:"loading",on:{FATAL:{target:"#streamlitApp.failed"}},states:{loading:{on:{LOADED:{target:"loaded"},FAIL:[{cond:"canIframeLoadRetry",actions:"incrementIframeLoadRetry",target:"loading"},{target:"failed"}]},after:{DEFAULT_DELAY:{target:"failed"}},description:"The app is currently loading. In this state, the app is initializing and preparing to be displayed."},loaded:{on:{SUSPEND:{target:"suspended"},RESTART:{target:"restarting"}},description:"The app has successfully loaded. In this state, the app is fully operational and ready for user interaction."},failed:{on:{FORCE_RESTART:{target:"restarting"}},description:"The app failed to load after reaching the maximum number of retries, encountered a fatal exception, or timed out while loading."},suspended:{on:{LOADED:{target:"loaded"},RESTART:{target:"restarting"}},description:"The app is suspended. In this state, the app is temporarily inactive and not available for user interaction."},restarting:{always:{target:"loading"},entry:{type:"resetIframeLoadRetryCount"},description:"The app is restarting. In this state, the app is resetting and will transition back to the loading state."}}},{delays:{DEFAULT_DELAY:3e4},actions:{incrementIframeLoadRetry:(0,h.f0)({iframeLoadRetryCount:e=>e.iframeLoadRetryCount++}),resetIframeLoadRetryCount:(0,h.f0)({iframeLoadRetryCount:()=>0})},guards:{canIframeLoadRetry:e=>e.iframeLoadRetryCount<3}});var I=n(586221);let T=(0,o.createContext)({appStateMachine:{},appPreviewStatus:d.I.loading,setAppPreviewStatus:()=>{},iframeRef:(0,o.createRef)(),iframeFetchId:"",reloadApp:()=>{},terminateWebsocketConnection:()=>{},initialResponseCacheState:{stateName:"NONE",reset:()=>{}},loadAppTelemetry:{getLoadAppData:()=>({isReload:!1,retryCount:0,firstLoadStartedAt:0,currentLoadStartedAt:0}),onAppLoadStep:()=>void 0,onShowIframe:()=>void 0,incrementRetryCount:()=>void 0,reset:()=>void 0},websocketTelemetry:{getWebsocketData:()=>({firstConnectedAt:void 0,lastConnectedAt:void 0,lastDisconnectedAt:void 0,attemptingToReconnect:!1}),onConnected:()=>void 0,onDisconnected:()=>void 0,onTerminateWebsocketConnection:()=>void 0,onRestartWebsocketConnection:()=>void 0},interactiveStartedTelemetry:{reset:()=>void 0,onWarehouseSelectedAt:()=>void 0},warehouseState:void 0,shouldShowIframe:!1,isNativeApp:!1,isInEditMode:!1,setIsInEditMode:()=>{}}),R=(0,o.memo)(({fullStreamlitIdentifier:e,bootstrapResult:t,historyQueryData:n,configToml:f,iframeRef:p,appPreviewStatus:b,setAppPreviewStatus:m,initialResponseCacheState:h,loadAppTelemetry:R,websocketTelemetry:C,interactiveStartedTelemetry:A,warehouseState:N,shouldShowIframe:w,isNativeApp:L,isInEditMode:k,setIsInEditMode:P,fatalError:D,clearFatalError:M,terminateWebsocketConnection:j,children:U})=>{var x;let{fetchId:F,updateFetchId:G}=(0,i.m)("streamlit-preview-pane"),B=function(e){let t=(0,E.EX)(),n=(0,O.h)(),r=(0,v.k)(_,{id:S.Z()});return(0,o.useEffect)(()=>{if(!t)return;let o=r.subscribe(t=>{var r;(t.changed||!t.historyValue)&&n({fullStreamlitIdentifier:e,componentName:y.uD0,eventName:y.UG5,eventType:"ui_impression",error:t.event.error||void 0,additionalTelemetryParams:{from:null===(r=t.history)||void 0===r?void 0:r.value,to:t.value}})});return()=>{o.unsubscribe()}},[e,t,n,r]),r}(e);(0,o.useEffect)(()=>()=>{B.stop()},[B]),(0,o.useEffect)(()=>{b===d.I.suspended&&B.send("SUSPEND")},[b,B]),(0,o.useEffect)(()=>{t.error&&B.send("FATAL",{error:t.error})},[t.error,B]),(0,o.useEffect)(()=>{D&&B.send("FATAL",{error:D})},[D,B]);let{reloadApp:V}=g({fullStreamlitIdentifier:e,clearFatalError:M,appStateMachine:B,appPreviewStatus:b,setAppPreviewStatus:m,updateIframeFetchId:G,loadAppTelemetry:R,websocketTelemetry:C,interactiveStartedTelemetry:A,initialResponseCacheState:h,iframeRef:p,iframeOrigin:(0,u.A)(null===(x=t.data)||void 0===x?void 0:x.url)}),H=(0,o.useMemo)(()=>({fullStreamlitIdentifier:e,appStateMachine:B,appPreviewStatus:b,setAppPreviewStatus:m,iframeRef:p,iframeFetchId:F,reloadApp:V,terminateWebsocketConnection:j,initialResponseCacheState:h,loadAppTelemetry:R,websocketTelemetry:C,interactiveStartedTelemetry:A,shouldShowIframe:w,warehouseState:N,isNativeApp:L,isInEditMode:k,setIsInEditMode:P,fatalError:D}),[e,B,b,m,p,F,V,j,h,R,C,A,w,N,L,k,P,D]);return(0,r.jsx)(c.h,{value:(0,s.m)(e),children:(0,r.jsx)(T.Provider,{value:H,children:(0,r.jsx)(l.X,{value:n||null,children:(0,r.jsx)(I.t,{bootstrapResult:t,children:(0,r.jsx)(a.EQ,{configToml:f,children:U})})})})})});R.displayName="StreamlitAppProvider";let C=()=>(0,o.useContext)(T)},586221:function(e,t,n){n.d(t,{E:()=>l,t:()=>a});var r=n(184168),o=n(499924);let i=(0,o.createContext)({data:null,loading:!1,appViewRequestId:"default-request-id"}),a=({bootstrapResult:e,children:t})=>(0,r.jsx)(i.Provider,{value:e,children:t});a.displayName="StreamlitBootstrapDataProvider";let l=()=>(0,o.useContext)(i)},365957:function(e,t,n){n.d(t,{Y:()=>f,t:()=>d});var r=n(561843),o=n(499924),i=n(337607),a=n(925819),l=n(896315),s=n(866777),c=n(540313),u=n(591712);let d=640;function f(){var e;let{dataDiscoverRole:t,secondaryRoles:n}=(0,i.j)(),f="log-streamlit-batch-telemetry",E=(0,o.useContext)(l.L),p=(0,a.h)(null==E?void 0:null===(e=E.user)||void 0===e?void 0:e.api,"UserStore is not loaded"),y=(0,s.d)();return(0,o.useCallback)(async({events:e,fullStreamlitIdentifier:o})=>{let i=e.filter(e=>u.k.includes(e.eventName));if(0===i.length)return;let a=Date.now();for(let e=0;e<i.length;e+=d){let l=function(e,t,n){let r={};for(let a of e){var o,i;let{eventName:e,additionalParams:l={},componentName:s}=a,c=function(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({clientTimeStamp:null!==(o=l.clientTimeStamp)&&void 0!==o?o:n},l),{componentName:s,isPrivateLink:t()}),u=null!==(i=r[e])&&void 0!==i?i:[];u.push(c),r[e]=u}return r}(i.slice(e,e+d),y,a),s=(0,c.s9)(o,l);try{await p.query(s,{isInternal:!0,role:t,secondaryRoles:n,desc:f})}catch(e){r.cM.error(e)}}},[p,t,n,f,y])}},591712:function(e,t,n){n.d(t,{k:()=>v,Q:()=>S});var r=n(561843),o=n(499924),i=n(337607),a=n(925819),l=n(896315),s=n(866777),c=n(540313),u=n(700010),d=n(392800),f=n(295591);class E{actOnItems(){this.action(this.queue.splice(0,this.queue.length))}enqueueItem(e){this.queue.push(e),-1!==this.maxQueueSize&&this.queue.length>=this.maxQueueSize&&this.actOnItems(),this.throttledAction()}flush(){this.throttledAction.flush()}get length(){return this.queue.length}constructor(e,t,n=-1){this.queue=[],this.action=e,this.throttledAction=(0,f.P)(this.actOnItems.bind(this),t,{leading:!1}),this.maxQueueSize=n}}var p=n(26194),y=n(365957);let b=()=>{var e;let t=(0,y.Y)(),n=(0,o.useCallback)(e=>{let n={};for(let t of e){var r;let e=t.fullStreamlitIdentifier?(0,p.m)(t.fullStreamlitIdentifier):"<none>",o=null!==(r=n[e])&&void 0!==r?r:[];o.push(t),n[e]=o}for(let e of Object.values(n))t({fullStreamlitIdentifier:e[0].fullStreamlitIdentifier,events:e.map(e=>({componentName:e.componentName,eventName:e.eventName,additionalParams:e.additionalParams}))})},[t]),{analytics:r}=(0,l.m)(["analytics"]),i=r.getStreamlitQueue(),a=null!==(e=(0,u.sB)())&&void 0!==e?e:5e3,s=(0,u.wd)()?new E(n,a,y.t):void 0;return i||r.setStreamlitQueue(s),null!=i?i:s};function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function g(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let v=[d.WmD,d.D3Z,d.w0o,d.SxE,d.Zq6,d.Hqt,d.pwE,d.ESo,d.RKz,d.__d,d.KF8,d.Bpb,d.qnG,d.rKO,d.hn2,d.IeT,d.cT0,d.u9u,d.Vdk,d.wKB,d.Rb3,d.J8b,d.yDA,d.Xrf,d.me3,d.VF4,d.K5l,d.FSx,d.xJE,d.m2U,d.peE,d.Ao4,d.jym];function S(){var e;let{dataDiscoverRole:t,secondaryRoles:n}=(0,i.j)(),d="log-streamlit-telemetry",f=(0,o.useContext)(l.L),E=(0,a.h)(null==f?void 0:null===(e=f.user)||void 0===e?void 0:e.api,"UserStore is not loaded"),p=(0,s.d)(),y=(0,u.gN)(),S=(0,u.wd)()&&y,m=b();return(0,o.useCallback)(e=>{let{fullStreamlitIdentifier:o,componentName:i,eventName:a,additionalParams:l={}}=e;if(!v.includes(a))return;if(S&&m){l.clientTimeStamp=Date.now(),m.enqueueItem(g(O({},e),{additionalParams:l}));return}let s=g(O({},l),{componentName:i,clientTimeStamp:Date.now(),eventType:a,isPrivateLink:p()}),u=(0,c.Sz)(o,a,s);E.query(u,{isInternal:!0,role:t,secondaryRoles:n,desc:d}).catch(e=>{r.cM.error(e)})},[E,t,n,d,p,S,m])}},736625:function(e,t,n){n.d(t,{h:()=>O});var r=n(51723),o=n(499924),i=n(807629),a=n(26194),l=n(931878),s=n(727347),c=n(700010),u=n(392800),d=n(620149),f=n(976142),E=n(586221),p=n(591712);function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function b(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let O=()=>{let e=(0,p.Q)(),{logEvent:t}=(0,r.useTelemetry)(),{logEventToSnowflakeAndDatadog:n}=(0,d.z)(),O=(0,c.I1)(),g=sessionStorage.getItem(i.VE),{appViewRequestId:v}=(0,E.E)(),{isNativeApp:S,isInEditMode:m}=(0,f.B)();return(0,o.useCallback)(r=>{var o,i,c,d;let f=r.fullStreamlitIdentifier?(0,a.m)(r.fullStreamlitIdentifier):void 0,E=null!==(i=r.appViewRequestId)&&void 0!==i?i:v,p=null!==(c=r.isNativeApp)&&void 0!==c?c:S,h=null!==(d=r.isInEditMode)&&void 0!==d?d:m,_=b(y({},r.additionalTelemetryParams,(0,s.T)({error:r.error,isUserError:(null===(o=r.additionalTelemetryParams)||void 0===o?void 0:o.isUserError)===!0})),{windowId:g,appViewRequestId:E,isNativeApp:p,isInEditMode:h,runtimeName:r.runtimeName});e({fullStreamlitIdentifier:r.fullStreamlitIdentifier,componentName:r.componentName,eventName:r.eventName,additionalParams:_});let I={component:r.componentName,event:r.eventName,type:r.eventType,data:b(y({},_),{area:u.Y$F,streamlitIdentifier:f})};O&&l.A.disallowedDatadogEventTypes.includes(I.type)?n(b(y({},I),{type:I.type})):t(I)},[v,S,m,g,t,e,O,n])}},849346:function(e,t,n){n.d(t,{E2:()=>o,EV:()=>a,fL:()=>i,pO:()=>r});let r=e=>e.matches("suspended"),o=e=>e.matches("loading")||e.matches("restarting"),i=e=>e.matches("loaded")&&!e.matches("suspended"),a=e=>e.matches("failed")},982055:function(e,t){var n,r;t.SFDBErrorCode=void 0,t.hasCode=function(e){return!!e&&!!e.code};(r=n||(t.SFDBErrorCode=n={})).ACCOUNT_ALREADY_EXISTS_003723="003723",r.ALREADY_EXISTS_002002="002002",r.NOT_FOUND_002043="002043",r.BROKEN_SHARE_003030="003030",r.NOT_FOUND_001999="001999",r.NOT_FOUND_002003="002003",r.UNKNOWN_IDENTIFIER="002004",r.INSUF_PRIV_003001="003001",r.ACCOUNT_CANNOT_BE_ADDED_003516="003516",r.LISTING_ALREADY_REQUESTED_090532="090532",r.DX_ALREADY_HAS_ACCOUNT_090542="090542",r.DX_DOES_NOT_HAVE_ACCOUNT_090543="090543",r.LISTING_CANNOT_DROP_PUBLISHED_090553="090553",r.LISTING_CANNOT_EDIT_PUBLISHED_090554="090554",r.SHARE_LISTING_ALREADY_SET_090557="090557",r.LISTING_NO_REQUEST_090561="090561",r.LISTING_ALREADY_FULFILLED_090566="090566",r.SHARE_ALREADY_ATTACHED_TO_LISTING_090567="090567",r.TOKEN_EXPIRED_ERROR="390114",r.WAREHOUSE_ALREADY_RESUMED_ERROR="090063",r.WAREHOUSE_ALREADY_SUSPENDED_ERROR="090064",r.WAREHOUSE_SUSPENDED_WHILE_QUEUED_ERROR="090109",r.WAREHOUSE_CANNOT_BE_RESUMED_BECAUSE_RESOURCE_MONITOR_EXCEEDED_QUOTA_ERROR="090073",r.WAREHOUSE_SUSPENDED_ERROR="000608",r.WAREHOUSE_DO_NOT_EXIST_OR_HAVE_ROLE_ACCESS_ERROR="092803",r.STAGE_DOES_NOT_EXIST_OR_HAVE_ROLE_ACCESS_ERROR_092804="092804",r.EXTERNAL_STAGES_NOT_SUPPORTED_092805="092805",r.STREAMLIT_NOT_FOUND_092806="092806",r.NO_WAREHOUSE_FOUND_092807="092807",r.WAREHOUSE_NOT_AVAILBLE_092808="092808",r.UNSUPPORTED_FEATURE="000002",r.NO_FEATURED_SECTIONS="000603",r.NO_ACTIVE_WAREHOUSE="000606",r.INVALID_PROFILE_STATE_090622="090622",r.INVALID_IP_ADDRESS_090302="090302",r.RESULT_NOT_FOUND_000612="000612",r.NO_IMPORT_SHARE_PRIV_090594="090594",r.SHARING_NOT_ENABLED_003027="003027",r.TRIAL_ACCOUNT_SUSPENDED_000666="000666",r.CANNOT_RUN_COMMAND_391833="391833",r.UNKNOWN_FUNCTION_REQUEST_002140="002140",r.CANNOT_AUTO_FULFILL_LISTING_090685="090685",r.CANNOT_AUTO_FULFILL_APP_PACKAGE_090824="090824",r.SHARE_HAS_NON_CONSUMER_TARGETS_090602="090602",r.CANNOT_REPLICATE_TAGS_391810="391810",r.PYTHON_UDF_ERROR="100357",r.CONTAINS_PYTHON_UDF_003948="003948",r.CONTAINS_EXTERNAL_TABLE_003906="003906",r.INVALID_PROPERTY_001420="001420",r.CANNOT_DROP_LISTING_DIRECTLY="090673",r.CANNOT_DROP_LISTING_AUTOFULFILLMENT_ENABLED_090684="090684",r.CANNOT_MODIFY_RETIRED_LISTING_090674="090674",r.SQL_EXECUTION_TIMED_OUT_AND_WAS_CANCELED="000630",r.EMAIL_RECIPIENT_NOT_ALLOWED_394209="394209",r.MONETIZATION_NOT_ENABLED_FOR_ACCOUNT_090659="090659",r.NO_SUITABLE_BILLING_ENTITY_FOR_TARGET_CLOUD_042119="042119",r.NATIVE_APPS_CREATION_FEATURE_NOT_ENABLED_092521="092521",r.NATIVE_APPS_APPLICATION_NO_LONGER_INSTALLED="093079",r.NATIVE_APPS_INSTALLATION_SCRIPT_ERROR_093082="093082",r.ACCOUNT_BUDGET_NOT_ACTIVATE_ERROR_20000="-20000",r.ACCOUNT_BUDGET_SNOWFLAKE_DB_NOT_SETUP_ERROR_002141="002141",r.USER_TASK_RETRY_TARGET_RUN_HAD_NO_FAILURES="091456",r.REVOKE_PARTIALLY_EXECUTED_DEPENDENT_GRANTS_NO_CASCADE_SPECIFIED="003935",r.DMX_BUY_NOT_ENABLED_042105="042105",r.CIRCULAR_ROLE_GRANT_ERROR="003010",r.LISTING_NAME_CANNOT_CONTAIN_DOLLAR_SIGN="092755",r.DRAFT_LISTINGS_PER_ACCOUNT_LIMIT_REACHED="091972",r.EMPTY_SQL_STATEMENT="000900",r.REMOTE_FILE_NOT_FOUND="091016",r.INTERNAL_DISTRIBUTION_FLAG="093085",r.NONE_APPROVED_VERSION="093086",r.NO_DEFAULT_RELEASE_DIRECTIVE="090720",r.USER_ERROR_REPORT_100315="100315",r.SNOWGIT_INTERNAL_ERROR="000600",r.GIT_REPOSITORY_NOT_AUTHORIZED="093550",r.GIT_REPOSITORY_CONNECTION_FAILED="093555",r.GIT_REPOSITORY_UNEXPECTED_BRANCH_HEAD="093560",r.GIT_REPOSITORY_FILE_OR_DIRECTORY_CONFLICT="093561",r.GIT_REPOSITORY_REMOTE_UPDATE_FAILED="093562",r.VSTAGE_LIVE_VERSION_EXISTS="099106",r.VSTAGE_LIVE_VERSION_NOT_FOUND="099108",r.VSTAGE_INVALID_READ_LOCATION="099112",r.VSTAGE_GIT_PUSH_FAILED="099120",r.VSTAGE_GIT_PULL_SUCCESS="099125",r.VSTAGE_GIT_PULL_ALREADY_LATEST="099126",r.VSTAGE_GIT_PULL_FAILED_WITH_MERGE_CONFLICT="099127",r.INSUF_PRIV_391882="391882",r.DYNAMIC_TABLE_MANUAL_REFRESH_FAILED="002742",r.PROPERTY_VALUE_IS_INVALID="001481"}}]);
//# sourceMappingURL=8208-03c72fea25ef4d8c.js.map